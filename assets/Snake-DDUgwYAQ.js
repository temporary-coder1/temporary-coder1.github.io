import{_ as ke,r as s,j as oe,o as Se,n as we,k as _e,c as R,b as a,e as O,E as se,t as V,f as X,m as Ie,v as Ce,g as ue,y as ie,h as M}from"./index-DcJe6jmK.js";const Re={id:"snake-app-container"},Me={class:"game-stats-header"},De={class:"stat-item"},Ee={class:"stat-value"},Ae={class:"stat-item"},Pe={class:"stat-value"},Te={class:"stat-item"},Ke={class:"stat-value"},Le={class:"game-controls-header"},Ve={key:0},ze={key:1},Be={key:0,class:"settings-overlay"},Fe={class:"settings-modal"},Ge={class:"settings-content"},Ue={class:"setting-item"},We={class:"setting-item"},$e={for:"food-count",class:"form-label"},He={class:"setting-item checkbox-item"},Oe={class:"checkbox-label"},Xe={class:"setting-item checkbox-item"},Ye={class:"checkbox-label"},Ne={class:"button-group"},je={class:"game-container"},Ze={key:0,class:"game-over-overlay"},qe={class:"game-over-content"},Je={key:0},Qe={key:1,class:"pause-overlay"},et={class:"pause-content"},tt={key:0},at={key:1},lt=["width","height"],nt={class:"game-controls",style:{display:"none"}},ot={class:"control-row"},st={class:"control-row"},ut={class:"control-row"},p=20,it=150,vt=30,rt={__name:"Snake",setup(ct){const Y=s(null),n=s(null),y=s(!1),d=s(!1),x=s(!1),T=s(0),_=s([]),v=s({x:0,y:0}),K=s({x:0,y:0}),m=s([]),I=s(0),D=s(0),U=s(8),E=s("dynamic"),b=s(1),L=s(!1),C=s(!1),W=s(!1),z=s(400),B=s(400),o=s(20),F=s(null),G=s(null),A=s(null),$=s(0),ve={dynamic:{baseSpeed:8,speedIncrease:!0},easy:{baseSpeed:5,speedIncrease:!1},medium:{baseSpeed:8,speedIncrease:!1},hard:{baseSpeed:15,speedIncrease:!1},extreme:{baseSpeed:25,speedIncrease:!1}},H=oe(()=>{const t=ve[E.value];return t.speedIncrease?Math.min(t.baseSpeed+Math.floor(_.value.length/5),20):t.baseSpeed}),re=oe(()=>Math.max(50,it-H.value*5));function J(){U.value=H.value,localStorage.setItem("snake-difficulty",E.value)}function ce(){y.value&&pe(),localStorage.setItem("snake-food-count",b.value.toString())}function de(){localStorage.setItem("snake-wrap",L.value.toString())}function fe(){localStorage.setItem("snake-left-right",C.value.toString())}function ge(){console.log("Initializing Snake game...");const t=localStorage.getItem("snake-difficulty");t&&(E.value=t);const e=localStorage.getItem("snake-food-count");e&&(b.value=parseInt(e));const l=localStorage.getItem("snake-wrap");l&&(L.value=l==="true");const f=localStorage.getItem("snake-left-right");f&&(C.value=f==="true");const S=localStorage.getItem("snake-best-score");S&&(D.value=parseInt(S)),console.log("‚öôÔ∏è Settings loaded:",{difficulty:E.value,foodCount:b.value,wrap:L.value,leftRight:C.value,bestScore:D.value}),J(),Q()?(ee(),console.log("Snake game initialized successfully")):console.error("Failed to initialize canvas"),P()}function Q(){const t=Y.value;if(!t)return console.error("Canvas element not found"),!1;if(n.value=t.getContext("2d"),!n.value)return console.error("Could not get canvas context"),!1;const e=Math.min(window.innerWidth-40,600),l=Math.min(window.innerHeight*.6,600),f=Math.min(e,l);return z.value=f,B.value=f,o.value=f/p,t.width=z.value,t.height=B.value,!0}function ee(){console.log("Resetting game...");const t=Math.floor(p/2),e=Math.floor(p/2);_.value=[{x:t,y:e}],v.value={x:0,y:0},K.value={x:0,y:0},I.value=0,U.value=H.value,m.value=[],N(),d.value=!1,y.value=!1,j()}function P(){console.log("Starting new game..."),A.value&&clearInterval(A.value),ee(),y.value=!0,d.value=!1,x.value=!1,$.value=Date.now(),A.value=setInterval(ye,16)}function te(){if(!(!y.value||d.value))if(x.value){T.value=3;const t=setInterval(()=>{T.value--,T.value<=0&&(clearInterval(t),x.value=!1,$.value=Date.now(),T.value=0)},1e3)}else x.value=!0}function N(){const t=[];for(let e=0;e<p;e++)for(let l=0;l<p;l++){const f=_.value.some(h=>h.x===e&&h.y===l),S=m.value.some(h=>h.x===e&&h.y===l);!f&&!S&&t.push({x:e,y:l})}for(;m.value.length<b.value&&t.length>0;){const e=Math.floor(Math.random()*t.length),l=t.splice(e,1)[0];m.value.push(l)}}function pe(){m.value.length<b.value?N():m.value.length>b.value&&(m.value=m.value.slice(0,b.value))}function ye(){if(!y.value||d.value||x.value)return;const t=Date.now();t-$.value>=re.value&&(me(),$.value=t),j()}function me(){if(v.value.x===0&&v.value.y===0)return;const t={..._.value[0]};if(t.x+=v.value.x,t.y+=v.value.y,L.value)t.x=(t.x+p)%p,t.y=(t.y+p)%p;else if(t.x<0||t.x>=p||t.y<0||t.y>=p){console.log("Wall collision at:",t),ae();return}if(_.value.some(l=>l.x===t.x&&l.y===t.y)){console.log("Self collision at:",t),ae();return}_.value.unshift(t);const e=m.value.findIndex(l=>l.x===t.x&&l.y===t.y);e!==-1?(m.value.splice(e,1),I.value+=1,N(),E.value==="dynamic"&&(U.value=H.value)):_.value.pop(),K.value={...v.value}}function ae(){console.log("Game Over! Final score:",I.value),d.value=!0,y.value=!1,I.value>D.value&&(D.value=I.value,localStorage.setItem("snake-best-score",D.value.toString()),console.log("üèÜ New best score achieved:",D.value)),A.value&&(clearInterval(A.value),console.log("Game loop stopped"))}function j(){if(!n.value){console.warn("Canvas context not available");return}if(!Y.value){console.warn("Canvas element not available");return}const e=getComputedStyle(document.documentElement),l=e.getPropertyValue("--snake-bg").trim()||"#f5f7f5",f=e.getPropertyValue("--snake-color").trim()||"#22c55e",S=e.getPropertyValue("--snake-head-color").trim()||"#16a34a",h=e.getPropertyValue("--food-color").trim()||"#ef4444",be=e.getPropertyValue("--theme-canvas-grid").trim()||"#d4d4d8";n.value.fillStyle=l,n.value.fillRect(0,0,z.value,B.value),n.value.strokeStyle=be,n.value.lineWidth=1,n.value.beginPath();for(let r=0;r<=p;r++){const g=r*o.value;n.value.moveTo(g,0),n.value.lineTo(g,B.value)}for(let r=0;r<=p;r++){const g=r*o.value;n.value.moveTo(0,g),n.value.lineTo(z.value,g)}if(n.value.stroke(),n.value.fillStyle=h,m.value.forEach(r=>{n.value.fillRect(r.x*o.value+2,r.y*o.value+2,o.value-4,o.value-4)}),_.value.forEach((r,g)=>{n.value.fillStyle=g===0?S:f;const i=g===0?1:2;n.value.fillRect(r.x*o.value+i,r.y*o.value+i,o.value-i*2,o.value-i*2)}),y.value){n.value.fillStyle="rgba(0, 0, 0, 0.7)",n.value.font=`${Math.min(o.value,24)}px Arial`,n.value.textAlign="left",n.value.textBaseline="top";const r=`Score: ${I.value}`,g=n.value.measureText(r),i=8;n.value.fillRect(i,i,g.width+i*2,30),n.value.fillStyle="white",n.value.fillText(r,i*2,i*2)}_.value.forEach((r,g)=>{const i=r.x*o.value,w=r.y*o.value;if(g===0){n.value.fillStyle=S,n.value.fillRect(i+2,w+2,o.value-4,o.value-4),n.value.fillStyle="white";const u=o.value*.15,c=o.value*.3;v.value.x===1?(n.value.fillRect(i+o.value-c,w+c,u,u),n.value.fillRect(i+o.value-c,w+o.value-c-u,u,u)):v.value.x===-1?(n.value.fillRect(i+c-u,w+c,u,u),n.value.fillRect(i+c-u,w+o.value-c-u,u,u)):v.value.y===-1?(n.value.fillRect(i+c,w+c-u,u,u),n.value.fillRect(i+o.value-c-u,w+c-u,u,u)):(n.value.fillRect(i+c,w+o.value-c,u,u),n.value.fillRect(i+o.value-c-u,w+o.value-c,u,u))}else n.value.fillStyle=f,n.value.fillRect(i+3,w+3,o.value-6,o.value-6)}),m.value.forEach(r=>{const g=r.x*o.value,i=r.y*o.value;n.value.fillStyle=h,n.value.beginPath(),n.value.arc(g+o.value/2,i+o.value/2,o.value/2-3,0,Math.PI*2),n.value.fill()})}function k(t){const l={up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}}[t];if(!l){console.warn("‚ö†Ô∏è Invalid direction:",t);return}!y.value&&!d.value&&P(),!(d.value||x.value)&&((K.value.x!==0||K.value.y!==0)&&l.x===-K.value.x&&l.y===-K.value.y||(v.value=l))}function Z(){if(!y.value&&!d.value&&P(),d.value||x.value)return;const t=v.value;if(t.x===0&&t.y===0){v.value={x:-1,y:0};return}t.x===1?v.value={x:0,y:-1}:t.x===-1?v.value={x:0,y:1}:t.y===1?v.value={x:1,y:0}:t.y===-1&&(v.value={x:-1,y:0})}function q(){if(!y.value&&!d.value&&P(),d.value||x.value)return;const t=v.value;if(t.x===0&&t.y===0){v.value={x:1,y:0};return}t.x===1?v.value={x:0,y:1}:t.x===-1?v.value={x:0,y:-1}:t.y===1?v.value={x:-1,y:0}:t.y===-1&&(v.value={x:1,y:0})}function le(t){if(t.code==="Space"||t.code==="Enter"){y.value&&!d.value?te():d.value&&P(),t.preventDefault();return}if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","KeyW","KeyS","KeyA","KeyD"].includes(t.code)){if(C.value)switch(t.code){case"ArrowLeft":case"KeyA":Z();break;case"ArrowRight":case"KeyD":q();break}else switch(t.code){case"ArrowUp":case"KeyW":k("up");break;case"ArrowDown":case"KeyS":k("down");break;case"ArrowLeft":case"KeyA":k("left");break;case"ArrowRight":case"KeyD":k("right");break}t.preventDefault()}}function he(t){const e=t.touches[0];F.value=e.clientX,G.value=e.clientY,t.preventDefault()}function xe(t){if(F.value===null||G.value===null)return;const e=t.changedTouches[0],l=e.clientX-F.value,f=e.clientY-G.value,S=Math.abs(l),h=Math.abs(f);if(Math.max(S,h)<vt){F.value=null,G.value=null;return}C.value?l>0?q():Z():S>h?k(l>0?"right":"left"):k(f>0?"down":"up"),F.value=null,G.value=null,t.preventDefault()}function ne(){Q()&&j()}return Se(async()=>{await we(),ge(),document.addEventListener("keydown",le),window.addEventListener("resize",ne)}),_e(()=>{A.value&&clearInterval(A.value),document.removeEventListener("keydown",le),window.removeEventListener("resize",ne)}),(t,e)=>(M(),R("div",Re,[e[20]||(e[20]=a("h1",null,"Snake",-1)),a("div",Me,[a("div",De,[e[11]||(e[11]=a("span",{class:"stat-label"},"Po√§ng",-1)),a("span",Ee,V(I.value),1)]),a("div",Ae,[e[12]||(e[12]=a("span",{class:"stat-label"},"B√§sta",-1)),a("span",Pe,V(D.value),1)]),a("div",Te,[e[13]||(e[13]=a("span",{class:"stat-label"},"Hastighet",-1)),a("span",Ke,V(U.value),1)])]),a("div",Le,[a("button",{onClick:te,class:"control-header-btn"},[x.value?(M(),R("span",ze,"Forts√§tt")):(M(),R("span",Ve,"Pausa"))]),a("button",{onClick:P,class:"control-header-btn"},"Starta Om"),a("button",{onClick:e[0]||(e[0]=l=>W.value=!0),class:"control-header-btn"},"‚öôÔ∏è")]),W.value?(M(),R("div",Be,[a("div",Fe,[a("button",{type:"button",class:"close-settings-button",onClick:e[1]||(e[1]=l=>W.value=!1)}," √ó "),e[18]||(e[18]=a("h2",null,"Inst√§llningar",-1)),a("div",Ge,[a("div",Ue,[e[15]||(e[15]=a("label",{for:"difficulty-select",class:"form-label"},"Sv√•righetsgrad",-1)),X(a("select",{id:"difficulty-select","onUpdate:modelValue":e[2]||(e[2]=l=>E.value=l),onChange:J,class:"form-input"},[...e[14]||(e[14]=[se('<option value="dynamic" data-v-87f735a1>Dynamisk</option><option value="easy" data-v-87f735a1>L√§tt</option><option value="medium" data-v-87f735a1>Medel</option><option value="hard" data-v-87f735a1>Sv√•r</option><option value="extreme" data-v-87f735a1>Extrem</option>',5)])],544),[[Ie,E.value]])]),a("div",We,[a("label",$e,"Mat: "+V(b.value),1),X(a("input",{type:"range",id:"food-count","onUpdate:modelValue":e[3]||(e[3]=l=>b.value=l),min:"1",max:"10",onInput:ce,class:"form-input range-input"},null,544),[[Ce,b.value]])]),a("div",He,[a("label",Oe,[X(a("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=l=>L.value=l),onChange:de},null,544),[[ue,L.value]]),e[16]||(e[16]=a("span",null,"Svep runt v√§ggarna",-1))])]),a("div",Xe,[a("label",Ye,[X(a("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=l=>C.value=l),onChange:fe},null,544),[[ue,C.value]]),e[17]||(e[17]=a("span",null,"Endast h√∂ger/v√§nster kontroller",-1))])])]),a("div",Ne,[a("button",{onClick:e[6]||(e[6]=l=>W.value=!1),class:"submit-button primary"},"St√§ng")])])])):O("",!0),a("div",je,[d.value?(M(),R("div",Ze,[a("div",qe,[e[19]||(e[19]=a("h2",null,"Game Over!",-1)),a("p",null,"Po√§ng: "+V(I.value),1),I.value===D.value?(M(),R("p",Je,"üéâ Nytt rekord!")):O("",!0),a("button",{onClick:P,class:"restart-btn"},"Spela igen")])])):O("",!0),x.value&&y.value?(M(),R("div",Qe,[a("div",et,[T.value===0?(M(),R("h2",tt,"Pausad")):(M(),R("h2",at,V(T.value),1))])])):O("",!0),a("canvas",{ref_key:"gameCanvas",ref:Y,onTouchstart:he,onTouchend:xe,width:z.value,height:B.value},null,40,lt)]),a("div",nt,[a("div",{class:ie(["touch-controls",{hidden:C.value}])},[a("div",ot,[a("button",{onClick:e[7]||(e[7]=l=>k("up")),class:"direction-btn up-btn"},"‚Üë")]),a("div",st,[a("button",{onClick:e[8]||(e[8]=l=>k("left")),class:"direction-btn left-btn"},"‚Üê"),a("button",{onClick:e[9]||(e[9]=l=>k("right")),class:"direction-btn right-btn"},"‚Üí")]),a("div",ut,[a("button",{onClick:e[10]||(e[10]=l=>k("down")),class:"direction-btn down-btn"},"‚Üì")])],2),a("div",{class:ie(["lr-controls",{hidden:!C.value}])},[a("button",{onClick:Z,class:"direction-btn left-turn-btn"},"‚Ü∫ V√§nster"),a("button",{onClick:q,class:"direction-btn right-turn-btn"},"‚Üª H√∂ger")],2)]),e[21]||(e[21]=se('<div class="game-instructions" data-v-87f735a1><details data-v-87f735a1><summary data-v-87f735a1>Hur man spelar</summary><div class="instructions-content" data-v-87f735a1><p data-v-87f735a1> Styr ormen f√∂r att samla mat och v√§x l√§ngre. Undvik att krocka med v√§ggarna eller dig sj√§lv! </p><ul data-v-87f735a1><li data-v-87f735a1>Anv√§nd piltangenterna p√• tangentbordet</li><li data-v-87f735a1>Tryck p√• knapparna ovan</li><li data-v-87f735a1>Svep p√• sk√§rmen (mobil)</li></ul><p data-v-87f735a1><strong data-v-87f735a1>Sv√•righetsgrad:</strong> Dynamisk √∂kar hastigheten n√§r du v√§xer.</p><p data-v-87f735a1><strong data-v-87f735a1>Inst√§llningar:</strong> Experimentera med olika inst√§llningar f√∂r olika spelupplevelser! </p></div></details></div>',1))]))}},ft=ke(rt,[["__scopeId","data-v-87f735a1"]]);export{ft as default};
