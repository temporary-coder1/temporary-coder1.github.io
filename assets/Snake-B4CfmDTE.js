import{_ as Ce,r as s,j as ee,o as De,n as Re,k as Me,c as I,b as a,e as $,E as ve,t as z,f as O,m as Ee,v as re,g as ce,y as de,h as C}from"./index-CVO9u6ab.js";const Pe={id:"snake-app-container"},Ae={class:"game-stats-header"},Ve={class:"stat-item"},Ke={class:"stat-value"},Le={class:"stat-item"},Te={class:"stat-value"},ze={class:"stat-item"},Ue={class:"stat-value"},Fe={class:"game-controls-header"},Ge={key:0},We={key:1},Be={key:0,class:"settings-overlay"},He={class:"settings-modal"},$e={class:"settings-content"},Oe={class:"setting-item"},Xe={key:0,class:"custom-speed-input"},Ye=["disabled"],Ne=["disabled"],je={class:"setting-item"},Ze={for:"food-count",class:"form-label"},qe={class:"setting-item checkbox-item"},Je={class:"checkbox-label"},Qe={class:"setting-item checkbox-item"},et={class:"checkbox-label"},tt={class:"button-group"},at={class:"game-container"},lt={key:0,class:"game-over-overlay"},nt={class:"game-over-content"},ot={key:0},st={key:1,class:"pause-overlay"},ut={class:"pause-content"},it={key:0},vt={key:1},rt=["width","height"],ct={class:"game-controls",style:{display:"none"}},dt={class:"control-row"},ft={class:"control-row"},pt={class:"control-row"},g=20,mt=30,gt={__name:"Snake",setup(yt){const N=s(null),n=s(null),b=s(!1),f=s(!1),k=s(!1),K=s(0),D=s([]),i=s({x:0,y:0}),L=s({x:0,y:0}),y=s([]),E=s(0),P=s(0),U=s(8),R=s("dynamic"),d=s(10),x=s(1),T=s(!1),M=s(!1),X=s(!1),F=s(400),G=s(400),o=s(20),W=s(null),B=s(null),A=s(null),Y=s(0),fe=ee(()=>({custom:{baseSpeed:d.value,speedIncrease:!1},dynamic:{baseSpeed:8,speedIncrease:!0},easy:{baseSpeed:5,speedIncrease:!1},medium:{baseSpeed:8,speedIncrease:!1},hard:{baseSpeed:15,speedIncrease:!1},extreme:{baseSpeed:25,speedIncrease:!1}})),H=ee(()=>{const t=fe.value[R.value];return t.speedIncrease?Math.min(t.baseSpeed+Math.floor(D.value.length/5),20):t.baseSpeed}),pe=ee(()=>1e3/H.value);function te(){U.value=H.value,localStorage.setItem("snake-difficulty",R.value)}function j(){d.value>100&&(d.value=100),d.value<1&&(d.value=1),R.value==="custom"&&(U.value=H.value,localStorage.setItem("snake-custom-difficulty",d.value.toString()))}function me(){d.value<100&&(d.value++,j())}function ge(){d.value>1&&(d.value--,j())}function ye(){b.value&&xe(),localStorage.setItem("snake-food-count",x.value.toString())}function he(){localStorage.setItem("snake-wrap",T.value.toString())}function be(){localStorage.setItem("snake-left-right",M.value.toString())}function ke(){console.log("Initializing Snake game...");const t=localStorage.getItem("snake-difficulty");t&&(R.value=t);const e=localStorage.getItem("snake-food-count");e&&(x.value=parseInt(e));const l=localStorage.getItem("snake-wrap");l&&(T.value=l==="true");const p=localStorage.getItem("snake-left-right");p&&(M.value=p==="true");const w=localStorage.getItem("snake-best-score");w&&(P.value=parseInt(w));const m=localStorage.getItem("snake-custom-difficulty");m&&(d.value=parseInt(m)),console.log("‚öôÔ∏è Settings loaded:",{difficulty:R.value,foodCount:x.value,wrap:T.value,leftRight:M.value,bestScore:P.value}),te(),ae()?(le(),console.log("Snake game initialized successfully")):console.error("Failed to initialize canvas"),V()}function ae(){const t=N.value;if(!t)return console.error("Canvas element not found"),!1;if(n.value=t.getContext("2d"),!n.value)return console.error("Could not get canvas context"),!1;const e=Math.min(window.innerWidth-40,600),l=Math.min(window.innerHeight*.6,600),p=Math.min(e,l);return F.value=p,G.value=p,o.value=p/g,t.width=F.value,t.height=G.value,!0}function le(){console.log("Resetting game...");const t=Math.floor(g/2),e=Math.floor(g/2);D.value=[{x:t,y:e}],i.value={x:0,y:0},L.value={x:0,y:0},E.value=0,U.value=H.value,y.value=[],Z(),f.value=!1,b.value=!1,q()}function V(){console.log("Starting new game..."),A.value&&clearInterval(A.value),le(),b.value=!0,f.value=!1,k.value=!1,Y.value=Date.now(),A.value=setInterval(Se,16)}function ne(){if(!(!b.value||f.value))if(k.value){K.value=3;const t=setInterval(()=>{K.value--,K.value<=0&&(clearInterval(t),k.value=!1,Y.value=Date.now(),K.value=0)},1e3)}else k.value=!0}function Z(){const t=[];for(let e=0;e<g;e++)for(let l=0;l<g;l++){const p=D.value.some(m=>m.x===e&&m.y===l),w=y.value.some(m=>m.x===e&&m.y===l);!p&&!w&&t.push({x:e,y:l})}for(;y.value.length<x.value&&t.length>0;){const e=Math.floor(Math.random()*t.length),l=t.splice(e,1)[0];y.value.push(l)}}function xe(){y.value.length<x.value?Z():y.value.length>x.value&&(y.value=y.value.slice(0,x.value))}function Se(){if(!b.value||f.value||k.value)return;const t=Date.now();t-Y.value>=pe.value&&(we(),Y.value=t),q()}function we(){if(i.value.x===0&&i.value.y===0)return;const t={...D.value[0]};if(t.x+=i.value.x,t.y+=i.value.y,T.value)t.x=(t.x+g)%g,t.y=(t.y+g)%g;else if(t.x<0||t.x>=g||t.y<0||t.y>=g){console.log("Wall collision at:",t),oe();return}if(D.value.some(l=>l.x===t.x&&l.y===t.y)){console.log("Self collision at:",t),oe();return}D.value.unshift(t);const e=y.value.findIndex(l=>l.x===t.x&&l.y===t.y);e!==-1?(y.value.splice(e,1),E.value+=1,Z(),R.value==="dynamic"&&(U.value=H.value)):D.value.pop(),L.value={...i.value}}function oe(){console.log("Game Over! Final score:",E.value),f.value=!0,b.value=!1,E.value>P.value&&(P.value=E.value,localStorage.setItem("snake-best-score",P.value.toString()),console.log("üèÜ New best score achieved:",P.value)),A.value&&(clearInterval(A.value),console.log("Game loop stopped"))}function q(){if(!n.value){console.warn("Canvas context not available");return}if(!N.value){console.warn("Canvas element not available");return}const e=getComputedStyle(document.documentElement),l=e.getPropertyValue("--theme-canvas-bg").trim()||"#f5f7f5",p=e.getPropertyValue("--theme-snake-body").trim()||"#22c55e",w=e.getPropertyValue("--theme-snake-head").trim()||"#16a34a",m=e.getPropertyValue("--theme-snake-food").trim()||"#ef4444",ie=e.getPropertyValue("--theme-canvas-grid").trim()||"#d4d4d8";n.value.fillStyle=l,n.value.fillRect(0,0,F.value,G.value),n.value.strokeStyle=ie,n.value.lineWidth=1,n.value.beginPath();for(let v=0;v<=g;v++){const h=v*o.value;n.value.moveTo(h,0),n.value.lineTo(h,G.value)}for(let v=0;v<=g;v++){const h=v*o.value;n.value.moveTo(0,h),n.value.lineTo(F.value,h)}n.value.stroke(),n.value.fillStyle=m,y.value.forEach(v=>{n.value.fillRect(v.x*o.value+2,v.y*o.value+2,o.value-4,o.value-4)}),D.value.forEach((v,h)=>{n.value.fillStyle=h===0?w:p;const r=h===0?1:2;n.value.fillRect(v.x*o.value+r,v.y*o.value+r,o.value-r*2,o.value-r*2)}),D.value.forEach((v,h)=>{const r=v.x*o.value,_=v.y*o.value;if(h===0){n.value.fillStyle=w,n.value.fillRect(r+2,_+2,o.value-4,o.value-4),n.value.fillStyle="white";const u=o.value*.15,c=o.value*.3;i.value.x===1?(n.value.fillRect(r+o.value-c,_+c,u,u),n.value.fillRect(r+o.value-c,_+o.value-c-u,u,u)):i.value.x===-1?(n.value.fillRect(r+c-u,_+c,u,u),n.value.fillRect(r+c-u,_+o.value-c-u,u,u)):i.value.y===-1?(n.value.fillRect(r+c,_+c-u,u,u),n.value.fillRect(r+o.value-c-u,_+c-u,u,u)):(n.value.fillRect(r+c,_+o.value-c,u,u),n.value.fillRect(r+o.value-c-u,_+o.value-c,u,u))}else n.value.fillStyle=p,n.value.fillRect(r+3,_+3,o.value-6,o.value-6)}),y.value.forEach(v=>{const h=v.x*o.value,r=v.y*o.value;n.value.fillStyle=m,n.value.beginPath(),n.value.arc(h+o.value/2,r+o.value/2,o.value/2-3,0,Math.PI*2),n.value.fill()})}function S(t){const l={up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}}[t];if(!l){console.warn("‚ö†Ô∏è Invalid direction:",t);return}!b.value&&!f.value&&V(),!(f.value||k.value)&&((L.value.x!==0||L.value.y!==0)&&l.x===-L.value.x&&l.y===-L.value.y||(i.value=l))}function J(){if(!b.value&&!f.value&&V(),f.value||k.value)return;const t=i.value;if(t.x===0&&t.y===0){i.value={x:-1,y:0};return}t.x===1?i.value={x:0,y:-1}:t.x===-1?i.value={x:0,y:1}:t.y===1?i.value={x:1,y:0}:t.y===-1&&(i.value={x:-1,y:0})}function Q(){if(!b.value&&!f.value&&V(),f.value||k.value)return;const t=i.value;if(t.x===0&&t.y===0){i.value={x:1,y:0};return}t.x===1?i.value={x:0,y:1}:t.x===-1?i.value={x:0,y:-1}:t.y===1?i.value={x:-1,y:0}:t.y===-1&&(i.value={x:1,y:0})}function se(t){if(t.code==="Space"||t.code==="Enter"){b.value&&!f.value?ne():f.value&&V(),t.preventDefault();return}if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","KeyW","KeyS","KeyA","KeyD"].includes(t.code)){if(M.value)switch(t.code){case"ArrowLeft":case"KeyA":J();break;case"ArrowRight":case"KeyD":Q();break}else switch(t.code){case"ArrowUp":case"KeyW":S("up");break;case"ArrowDown":case"KeyS":S("down");break;case"ArrowLeft":case"KeyA":S("left");break;case"ArrowRight":case"KeyD":S("right");break}t.preventDefault()}}function _e(t){const e=t.touches[0];W.value=e.clientX,B.value=e.clientY,t.preventDefault()}function Ie(t){if(W.value===null||B.value===null)return;const e=t.changedTouches[0],l=e.clientX-W.value,p=e.clientY-B.value,w=Math.abs(l),m=Math.abs(p);if(Math.max(w,m)<mt){W.value=null,B.value=null;return}M.value?l>0?Q():J():w>m?S(l>0?"right":"left"):S(p>0?"down":"up"),W.value=null,B.value=null,t.preventDefault()}function ue(){ae()&&q()}return De(async()=>{await Re(),ke(),document.addEventListener("keydown",se),window.addEventListener("resize",ue)}),Me(()=>{A.value&&clearInterval(A.value),document.removeEventListener("keydown",se),window.removeEventListener("resize",ue)}),(t,e)=>(C(),I("div",Pe,[e[21]||(e[21]=a("h1",null,"Snake",-1)),a("div",Ae,[a("div",Ve,[e[12]||(e[12]=a("span",{class:"stat-label"},"Po√§ng",-1)),a("span",Ke,z(E.value),1)]),a("div",Le,[e[13]||(e[13]=a("span",{class:"stat-label"},"B√§sta",-1)),a("span",Te,z(P.value),1)]),a("div",ze,[e[14]||(e[14]=a("span",{class:"stat-label"},"Hastighet",-1)),a("span",Ue,z(U.value),1)])]),a("div",Fe,[a("button",{onClick:ne,class:"control-header-btn"},[k.value?(C(),I("span",We,"Forts√§tt")):(C(),I("span",Ge,"Pausa"))]),a("button",{onClick:V,class:"control-header-btn"},"Starta Om"),a("button",{onClick:e[0]||(e[0]=l=>X.value=!0),class:"control-header-btn"},"‚öôÔ∏è")]),X.value?(C(),I("div",Be,[a("div",He,[a("button",{type:"button",class:"close-settings-button",onClick:e[1]||(e[1]=l=>X.value=!1)}," √ó "),e[19]||(e[19]=a("h2",null,"Inst√§llningar",-1)),a("div",$e,[a("div",Oe,[e[16]||(e[16]=a("label",{for:"difficulty-select",class:"form-label"},"Sv√•righetsgrad",-1)),O(a("select",{id:"difficulty-select","onUpdate:modelValue":e[2]||(e[2]=l=>R.value=l),onChange:te,class:"form-input"},[...e[15]||(e[15]=[ve('<option value="custom" data-v-41e667e4>Anpassad</option><option value="dynamic" data-v-41e667e4>Dynamisk</option><option value="easy" data-v-41e667e4>L√§tt</option><option value="medium" data-v-41e667e4>Medel</option><option value="hard" data-v-41e667e4>Sv√•r</option><option value="extreme" data-v-41e667e4>Extrem</option>',6)])],544),[[Ee,R.value]]),R.value==="custom"?(C(),I("div",Xe,[a("button",{type:"button",onClick:ge,class:"speed-btn speed-btn-minus",disabled:d.value<=1}," - ",8,Ye),O(a("input",{class:"speed-input",type:"number",name:"custom-difficulty",id:"custom-difficulty","onUpdate:modelValue":e[3]||(e[3]=l=>d.value=l),min:"1",max:"100",onInput:j},null,544),[[re,d.value,void 0,{number:!0}]]),a("button",{type:"button",onClick:me,class:"speed-btn speed-btn-plus",disabled:d.value>=100}," + ",8,Ne)])):$("",!0)]),a("div",je,[a("label",Ze,"Mat: "+z(x.value),1),O(a("input",{type:"range",id:"food-count","onUpdate:modelValue":e[4]||(e[4]=l=>x.value=l),min:"1",max:"10",onInput:ye,class:"form-input range-input"},null,544),[[re,x.value]])]),a("div",qe,[a("label",Je,[O(a("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=l=>T.value=l),onChange:he},null,544),[[ce,T.value]]),e[17]||(e[17]=a("span",null,"Svep runt v√§ggarna",-1))])]),a("div",Qe,[a("label",et,[O(a("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=l=>M.value=l),onChange:be},null,544),[[ce,M.value]]),e[18]||(e[18]=a("span",null,"Endast h√∂ger/v√§nster kontroller",-1))])])]),a("div",tt,[a("button",{onClick:e[7]||(e[7]=l=>X.value=!1),class:"submit-button primary"},"St√§ng")])])])):$("",!0),a("div",at,[f.value?(C(),I("div",lt,[a("div",nt,[e[20]||(e[20]=a("h2",null,"Game Over!",-1)),a("p",null,"Po√§ng: "+z(E.value),1),E.value===P.value?(C(),I("p",ot,"üéâ Nytt rekord!")):$("",!0),a("button",{onClick:V,class:"restart-btn"},"Spela igen")])])):$("",!0),k.value&&b.value?(C(),I("div",st,[a("div",ut,[K.value===0?(C(),I("h2",it,"Pausad")):(C(),I("h2",vt,z(K.value),1))])])):$("",!0),a("canvas",{ref_key:"gameCanvas",ref:N,onTouchstart:_e,onTouchend:Ie,width:F.value,height:G.value},null,40,rt)]),a("div",ct,[a("div",{class:de(["touch-controls",{hidden:M.value}])},[a("div",dt,[a("button",{onClick:e[8]||(e[8]=l=>S("up")),class:"direction-btn up-btn"},"‚Üë")]),a("div",ft,[a("button",{onClick:e[9]||(e[9]=l=>S("left")),class:"direction-btn left-btn"},"‚Üê"),a("button",{onClick:e[10]||(e[10]=l=>S("right")),class:"direction-btn right-btn"},"‚Üí")]),a("div",pt,[a("button",{onClick:e[11]||(e[11]=l=>S("down")),class:"direction-btn down-btn"},"‚Üì")])],2),a("div",{class:de(["lr-controls",{hidden:!M.value}])},[a("button",{onClick:J,class:"direction-btn left-turn-btn"},"‚Ü∫ V√§nster"),a("button",{onClick:Q,class:"direction-btn right-turn-btn"},"‚Üª H√∂ger")],2)]),e[22]||(e[22]=ve('<div class="game-instructions" data-v-41e667e4><details data-v-41e667e4><summary data-v-41e667e4>Hur man spelar</summary><div class="instructions-content" data-v-41e667e4><p data-v-41e667e4> Styr ormen f√∂r att samla mat och bli l√§ngre. Undvik att krocka med v√§ggarna eller dig sj√§lv! </p><ul data-v-41e667e4><li data-v-41e667e4>Anv√§nd piltangenterna p√• tangentbordet</li><li data-v-41e667e4>Svep p√• sk√§rmen (mobil)</li></ul><p data-v-41e667e4><strong data-v-41e667e4>Sv√•righetsgrad:</strong> Dynamisk √∂kar hastigheten n√§r du v√§xer.</p><p data-v-41e667e4><strong data-v-41e667e4>Inst√§llningar:</strong> Experimentera med olika inst√§llningar f√∂r olika spelupplevelser! </p></div></details></div>',1))]))}},bt=Ce(gt,[["__scopeId","data-v-41e667e4"]]);export{bt as default};
