import{A as Ke,_ as He,B as ba,r as i,w as ce,c as y,h as b,C as Le,d as E,b as e,D as ya,t as h,z as Re,f as Te,s as $e,v as Fe,e as ka,F as We,u as _a,j as se,o as wa,k as Sa,y as Y,p as Ca,E as Ma}from"./index-CIJZ9MWw.js";const Ve=["rgb(70, 140, 70)","rgb(170, 200, 160)","rgb(130, 170, 120)","rgb(70, 140, 70)","rgb(70, 140, 70)","rgb(20, 20, 20)","rgb(130, 130, 130)"];function ue(l){return getComputedStyle(document.documentElement).getPropertyValue(l).trim()}function je(l){return{background:ue("--theme-canvas-bg")||(l?"#111827":"#e8f5e8"),grid:ue("--theme-canvas-grid")||(l?"#374151":"#d4d4d8"),border:ue("--theme-canvas-border")||(l?"#374151":"#4a5568")}}function Da(l){const o=l.getShape().map(v=>v[0]),u=l.getShape().map(v=>v[1]),d=Math.abs(Math.min(...o))+Math.max(...o)+1,r=Math.abs(Math.min(...u))+Math.max(...u)+1;return{blockWidth:d,blockHeight:r}}function Ue(l,o,u,d,r,v){o.getShape().forEach(p=>{const g=(u+p[0])*r,s=(d+p[1])*r;l.fillStyle=o.color,l.fillRect(g,s,r,r),l.fillStyle="rgba(30,30,30,0.8)",l.fillRect(g+v,s+v,r-v*2,r-v*2)})}function de(l,o,u,d,r,v,p,g){if(!l||!o||o.length===0)return;const s=je(v);l.fillStyle=s.background,l.fillRect(0,0,u,d),l.strokeStyle=s.grid,l.beginPath();for(let c=1;c<p;c++)l.moveTo(c*r,0),l.lineTo(c*r,d);for(let c=1;c<g;c++)l.moveTo(0,c*r),l.lineTo(u,c*r);l.stroke();for(let c=0;c<o.length;c++){const M=o[c];for(let m=0;m<M.length;m++){const _=M[m];_!=null&&(l.fillStyle=Ve[_],l.fillRect(m*r+1,c*r+1,r-2,r-2))}}}function qe(l,o,u,d,r=null,v){if(!l||!o)return;const p=r||v,g=p/5.5;Ue(o,l,u,d,p,g)}function xa(l,o,u,d){if(!l||!o)return;const r=l.y;let v=-1;for(;!d();)l.y++,v++;l.y=r;const p=u/5.5,g=l.color.replace("rgb","rgba").replace(")",", 0.3)");o.fillStyle=g,l.getPositions().forEach(s=>{o.fillRect(s[0]*u+p,(v+s[1])*u+p,u-p*2,u-p*2)})}function Ye(l,o,u,d){if(!l||l.length===0||!o)return;const r=o.canvas,v=je(d);o.fillStyle=v.background,o.fillRect(0,0,parseInt(r.style.width),parseInt(r.style.height));const p=parseInt(r.style.height)/3,g=u/5.5;l.slice(0,3).forEach((s,c)=>{if(!s)return;const M=c*p,{blockWidth:m,blockHeight:_}=Da(s);let D=1.25;_===1&&(D-=.5);const N=1+(4-m)/2,A=M/u+D;Ue(o,s,N,A,u,g)})}function Oe(l,o,u,d,r,v,p,g,s,c,M,m=null,_=null){l||!o||(de(o,u,d,r,v,p,g,s),c&&(xa(c,o,v,M),qe(c,o,c.x,c.y,null,v)),m&&_&&Ye(m,_,v,p))}async function Ia(){const{data:l,error:o}=await Ke.functions.invoke("kfkblock/kfkblock-scores",{method:"GET"});if(o)throw console.error("Error fetching top scores:",o),o;return l}async function Ge(l){const{data:o,error:u}=await Ke.functions.invoke("kfkblock/kfkblock-scores",{method:"POST",body:JSON.stringify(l)});if(u)throw console.error("Error submitting score:",u),u;return o}const Pa={class:"modal-content"},Ba={key:0},Na={key:1},Aa={key:2},Ea={key:3},Ra={key:4,class:"score-save-options"},Ta={key:0,class:"auth-user-options"},$a={class:"save-prompt"},Fa={class:"button-group-inline"},Oa=["disabled"],Ga={key:1,class:"unauth-user-options"},Ka={class:"button-group-inline"},Ha={key:5,class:"user-message"},La={key:6,class:"error-message"},Wa={key:1,class:"guest-form-overlay"},Va={class:"score-display"},ja={class:"score-value"},Ua={class:"button-group"},qa=["disabled"],Ya={key:0,class:"error-message"},Ja={__name:"AddPlayerForm",props:{score:{type:Number,required:!0},level:{type:Number,required:!0},linesCleared:{type:Number,required:!0},gameData:{type:Object,required:!0,validator:l=>l&&typeof l.blocksUsed=="number"&&typeof l.level=="number"&&typeof l.levelClearedRows=="number"},gameOver:{type:Boolean,default:!1},gameStarted:{type:Boolean,default:!1}},emits:["close","startGame","updateLeaderboard"],setup(l,{emit:o}){const u=ba(),d=l,r=i(""),v=i(""),p=i(!1),g=i(!1),s=i(!1),c=i(!0),M=i(""),m=i(!1),_=i(""),D=i(""),N=i(""),A=o,V={2e3:["Det var inget vidare","Klassisk kugg","Ge upp"],5e3:["Nästan godkänt","Det är ett U","Kan granskas"],1e4:["Limes","Du hade fått en 3a"],15e3:["Helt ok","Granska till 4a"],2e4:["Respektabel 4a"],3e4:["Nästan en femma"],4e4:["Imponerande","Bättre kan du"],5e4:["Sök webmästeriet","Kämpa","Du är sämst"]};function J(){if(!d.gameOver)return"";if(N.value)return N.value;let k="Game Over";for(let n in V)if(d.score<=n){const x=V[n];k=x[Math.floor(Math.random()*x.length)];break}return N.value=k,k}function q(){A("startGame")}function w(){console.log("User chose not to save score"),c.value=!1}async function S(){console.log("Saving score for authenticated user..."),m.value=!0,D.value="",_.value="";const k={block:d.gameData.blocksUsed-1,level:d.level,levelClearedRows:d.gameData.levelClearedRows},n=u.profile?.username||u.user?.email||"Authenticated User",x=u.profile?.full_name||null,O={playerID:n,RealName:x,Score:d.score,Other:k,Key:$({...k,score:d.score})};try{const C=await Ge(O);C.cheat&&(_.value=C.message||"Poängen kunde inte verifieras"),C?(console.log("Score saved successfully:",C),m.value=!1,A("updateLeaderboard",C),c.value=!1,D.value="Sparad!"):console.error("Failed to save score:",C)}catch(C){console.error("Error saving score:",C)}}function B(){p.value=!1,g.value=!1,A("close")}function R(k){M.value=k,s.value=!0}function j(){g.value=!0,p.value=!0}function P(){s.value=!1,M.value=""}function F(){P()}function $(k){return k.score+k.block**2+k.levelClearedRows*3-7}async function U(k){if(k&&k.preventDefault(),!m.value){console.log("Submitting player details..."),m.value=!0,_.value="";try{const n={block:d.gameData.blocksUsed-1,level:d.gameData.level,levelClearedRows:d.gameData.levelClearedRows};if(!r.value.trim()){_.value="Visningsnamn är obligatoriskt",m.value=!1;return}const x=r.value.trim(),O=v.value.trim()||null,C={playerID:x,RealName:O,Score:d.score,Other:n,Key:$({...n,score:d.score})};console.log("Sending data to API:",C);const G=await Ge(C);G.cheat&&(_.value=G.message||"Poängen kunde inte verifieras"),G?(console.log("Score saved successfully:",G),A("updateLeaderboard",G)):console.error("Failed to save score:",G),p.value=!1,g.value=!1,A("close")}catch(n){console.error("Error submitting player details:",n),_.value="Nätverksfel - försök igen senare"}finally{m.value=!1}}}return ce(()=>d.gameStarted,(k,n)=>{k&&!n&&(N.value="")}),ce(()=>d.gameOver,k=>{k||(N.value="")}),(k,n)=>(b(),y(We,null,[s.value?(b(),Le(ya,{key:0,mode:M.value,onClose:P,onSuccess:F,class:"auth-form"},null,8,["mode"])):E("",!0),e("div",Pa,[l.gameOver?(b(),y("h2",Ba,h(J()),1)):E("",!0),l.gameOver?(b(),y("p",Na,"Poäng: "+h(l.score),1)):E("",!0),l.gameOver?(b(),y("p",Aa,"Nivå: "+h(l.level),1)):E("",!0),l.gameOver?(b(),y("p",Ea,"Rader: "+h(l.linesCleared),1)):E("",!0),l.gameOver&&l.score>0&&c.value?(b(),y("div",Ra,[Re(u).isAuthed?(b(),y("div",Ta,[e("p",$a,"Spara som "+h(Re(u).profile?.username||"Användare")+"?",1),e("div",Fa,[e("button",{onClick:w,class:"btn-decline"},"Nej Tack"),e("button",{onClick:S,class:"btn-save",disabled:m.value},h(m.value?"Sparar...":"Spara Poäng!"),9,Oa)])])):(b(),y("div",Ga,[n[4]||(n[4]=e("p",{class:"save-prompt"},"Spara din poäng?",-1)),e("div",Ka,[e("button",{onClick:n[0]||(n[0]=x=>R("login")),class:"btn-auth"},"Logga In"),e("button",{onClick:n[1]||(n[1]=x=>R("signup")),class:"btn-auth"},"Skapa Konto"),e("button",{onClick:j,class:"btn-guest"},"Som Gäst")]),e("button",{onClick:w,class:"btn-decline-full"},"Nej Tack")]))])):E("",!0),e("button",{onClick:q,class:"btn-modal-action"},h(l.gameOver||!l.gameStarted?l.gameStarted?"Spela Igen":"Starta Spelet":"Fortsätt"),1),D.value?(b(),y("div",Ha,h(D.value),1)):E("",!0),_.value?(b(),y("div",La,h(_.value),1)):E("",!0)]),p.value?(b(),y("div",Wa,[e("form",{onSubmit:ka(U,["prevent"]),class:"guest-form-modal"},[e("button",{type:"button",class:"close-form-button",onClick:B},"×"),n[6]||(n[6]=e("h2",null,"Spara som Gäst",-1)),e("p",Va,[n[5]||(n[5]=$e(" Poäng: ",-1)),e("span",ja,h(l.score),1)]),n[7]||(n[7]=e("label",{for:"playerID-input",class:"form-label"},[e("abbr",{title:"","data-title":"Syns i topplistan för andra."},[$e(" Visningsnamn"),e("span",{style:{color:"red"}},"*")])],-1)),Te(e("input",{type:"text",id:"playerID-input","onUpdate:modelValue":n[2]||(n[2]=x=>r.value=x),placeholder:"Ditt visningsnamn",class:"form-input",required:""},null,512),[[Fe,r.value]]),n[8]||(n[8]=e("label",{for:"realName-input",class:"form-label"},[e("abbr",{title:"","data-title":"Ditt namn om du vill vara med i webmästeriets prisutdelning (ej nödvändigt)"}," Fullständigt Namn (Frivilligt) ")],-1)),Te(e("input",{type:"text",id:"realName-input","onUpdate:modelValue":n[3]||(n[3]=x=>v.value=x),placeholder:"För- och efternamn",class:"form-input"},null,512),[[Fe,v.value]]),e("div",Ua,[e("button",{type:"button",class:"submit-button decline",onClick:B},"Avbryt"),e("button",{type:"submit",class:"submit-button primary",disabled:m.value},h(m.value?"Sparar...":"Spara!"),9,qa)]),_.value?(b(),y("div",Ya,h(_.value),1)):E("",!0)],32)])):E("",!0)],64))}},Qa=He(Ja,[["__scopeId","data-v-191ea472"]]),Xa={id:"app-container"},Za={class:"leaderboard-container"},za={class:"leaderboard-content"},et={class:"leaderboard-table"},at={class:"position"},tt={class:"player-name"},lt={class:"score"},st={class:"mobile-controls-bar"},nt={class:"mobile-top-row"},ot={class:"mobile-score-info"},rt={class:"mobile-score"},it={class:"mobile-level"},ut={class:"mobile-btn-container"},ct=["title"],dt={key:0},vt={key:1},ft={key:2},mt=["title"],ht={key:0},pt={key:1},gt={class:"mobile-stats-mini"},bt={class:"mini-stat"},yt={class:"mini-value"},kt={class:"mini-stat"},_t={class:"mini-value"},wt={class:"mini-stat"},St={class:"mini-value"},Ct={class:"mini-stat"},Mt={class:"mini-value"},Dt={class:"game-layout"},xt={class:"sidebar desktop-only"},It={class:"sidebar-btn-container"},Pt={key:0},Bt={key:1},Nt={key:2},At={key:0},Et={key:1},Rt=["title"],Tt={class:"canvas-outer-wrapper"},$t={class:"canvas-and-next-container"},Ft={class:"canvas-container"},Ot={class:"canvas-overlay-controls"},Gt={class:"sidebar desktop-only"},Kt={class:"game-info"},Ht={class:"info-item"},Lt={class:"info-value"},Wt={class:"info-item"},Vt={class:"info-value"},jt={class:"info-item"},Ut={class:"info-value"},qt={class:"info-item"},Yt={class:"info-value"},Jt={class:"info-item"},Qt={class:"info-value"},Xt={class:"info-item"},Zt={class:"info-value"},zt={key:0,class:"information-container"},T=10,H=20,ne=30,el={__name:"Kfkblock",setup(l){const o=_a(),u=[[[[-1,-1],[0,-1],[-1,0],[0,0]]],[[[-1,-1],[0,-1],[0,0],[1,0]]],[[[-1,0],[0,0],[0,-1],[1,-1]]],[[[-1,0],[0,0],[1,0],[0,-1]]],[[[-1,0],[0,0],[1,0],[2,0]]],[[[-1,0],[0,0],[1,0],[1,-1]]],[[[-1,0],[0,0],[1,0],[-1,-1]]]],d=[48,43,38,33,28,23,18,13,8,6,5,4,4,3,2,2,1],r=i(null),v=i(null),p=i(null),g=i([]),s=i(null),c=i([]),M=i(0),m=i(0),_=i(0),D=i(0),N=i(0),A=i(0),V=i(null),J=i(null),q=i(0),w=i(!1),S=i(!1),B=i(0),R=i(!1),j=i([]),P=i(ne),F=i(T*ne),$=i(H*ne),U=i(!1),k=i(!1),n=i(1),x=i(!0);let O=null;const C=i(!1),G=i([]),ve=se(()=>{const a=Math.floor(A.value/60),t=A.value%60;return`${a.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}),fe=se(()=>!R.value||w.value),Je=se(()=>G.value.sort((a,t)=>t.Score-a.Score).slice(0,100)),Qe=se(()=>({blocksUsed:N.value,level:m.value,levelClearedRows:D.value}));function me(){if(r.value){if(R.value&&!w.value)Oe(w.value,r.value,g.value,F.value,$.value,P.value,o.isDarkMode,T,H,s.value,L,c.value,C.value?p.value:v.value);else if(de(r.value,g.value,F.value,$.value,P.value,o.isDarkMode,T,H),c.value.length>0){const a=C.value?p.value:v.value;a&&Ye(c.value,a,P.value,o.isDarkMode)}}}function oe(){if(S.value){B.value=3;const a=setInterval(()=>{B.value>0?B.value-=.1:(clearInterval(a),B.value=0,S.value=!1)},100)}else B.value=0,S.value=!0}function he(){U.value=!U.value}function Xe(){k.value=!k.value}function pe(){n.value=n.value===1?0:1,n.value===1&&(x.value=!1)}function ge(){g.value=Array.from({length:H},()=>Array(T).fill(null))}function Ze(a,t){let f;return(...I)=>{clearTimeout(f),f=setTimeout(()=>a.apply(this,I),t)}}function be(){const a=Math.ceil(window.devicePixelRatio||1);C.value=window.innerWidth<=768;const t=document.getElementById("app-container"),f=document.querySelector(".hard-drop-btn"),I=document.querySelector(".leaderboard-container"),te=document.querySelector(".mobile-controls-bar"),Ie=document.querySelector(".mobile-stats-mini"),Pe=f?f.offsetHeight+10:50,Be=I?I.offsetHeight:0,ma=te?te.offsetHeight+10:0,ha=Ie?Ie.offsetHeight+10:0,Ne=20,Ae=20,Ee=45;let re,ie;if(C.value)re=window.innerHeight-Pe-Be-ma-ha-Ne-Ee,ie=(t?.offsetWidth||window.innerWidth)-Ae-120;else{const K=document.querySelector(".sidebar"),W=K?K.offsetWidth:180,le=20;re=window.innerHeight-Pe-Be-Ne-Ee,ie=(t?.offsetWidth||window.innerWidth)-Ae-W*2-le*2}let pa=Math.floor(re/H),ga=Math.floor(ie/T);P.value=Math.max(10,Math.min(pa,ga,ne)),F.value=T*P.value,$.value=H*P.value;const X=document.getElementById("tetrisCanvas");X&&(X.width=Math.max(1,Math.floor(F.value*a)),X.height=Math.max(1,Math.floor($.value*a)),X.style.width=`${F.value}px`,X.style.height=`${$.value}px`,r.value&&r.value.setTransform(a,0,0,a,0,0));const Z=document.getElementById("nextPieceCanvas");if(Z){const K=4*P.value,W=8*P.value;Z.width=Math.max(1,Math.floor(K*a)),Z.height=Math.max(1,Math.floor(W*a)),Z.style.width=`${K}px`,Z.style.height=`${W}px`,v.value&&v.value.setTransform(a,0,0,a,0,0)}const z=document.getElementById("nextPieceCanvasMobile");if(z){const K=Math.min(P.value,25),W=4*K,le=8*K;z.width=Math.max(1,Math.floor(W*a)),z.height=Math.max(1,Math.floor(le*a)),z.style.width=`${W}px`,z.style.height=`${le}px`,p.value&&p.value.setTransform(a,0,0,a,0,0)}me()}function ze(){const a=document.getElementById("tetrisCanvas");a&&(r.value=a.getContext("2d"));const t=document.getElementById("nextPieceCanvas");t&&(v.value=t.getContext("2d"));const f=document.getElementById("nextPieceCanvasMobile");f&&(p.value=f.getContext("2d")),be(),O||(O=Ze(be,100)),window.addEventListener("resize",O)}class ea{constructor(t,f,I){this.x=t,this.y=f,this.type=I,this.shape=u[I][0],this.color=Ve[I],this.rotation=0}getShape(){return this.shape}getPositions(){return this.shape.map(t=>[t[0]+this.x,t[1]+this.y])}rotate(){let t=[];this.shape.forEach(f=>{this.type==4?t.push([-f[1]+1,f[0]]):this.type==0?t.push([-f[1]-1,f[0]]):t.push([-f[1],f[0]])}),this.shape=t}}function ye(){j.value=[];let a=2;for(let t=0;t<u.length*a;t++)j.value.push(t%u.length)}function ke(){j.value.length==0&&ye();let a=j.value.splice(Math.floor(j.value.length*Math.random()),1);return new ea(5,0,a[0])}function aa(){c.value=[];for(let a=0;a<3;a++)c.value.push(ke())}function _e(){s.value=c.value.shift(),c.value.push(ke()),L()&&(w.value=!0,s.value=null,ta())}function we(){w.value=!1,R.value=!0,M.value=0,m.value=0,_.value=0,D.value=0,N.value=0,A.value=0,q.value=d[0],ge(),ye(),aa(),_e(),sa(),J.value=setInterval(la,1e3/60)}function ta(){w.value=!0,clearInterval(J.value),Se(),xe(),de(r.value,g.value,F.value,$.value,P.value,o.isDarkMode,T,H),s.value&&qe(s.value,r.value,s.value.x,s.value.y,null,P.value)}function la(){w.value||!R.value||(S.value||(q.value<=0&&(ae(),q.value=d[Math.min(m.value,d.length-1)]),q.value--),Oe(w.value,r.value,g.value,F.value,$.value,P.value,o.isDarkMode,T,H,s.value,L,c.value,C.value?p.value:v.value))}function sa(){V.value&&clearInterval(V.value),V.value=setInterval(()=>{!w.value&&R.value&&!S.value&&A.value++},1e3)}function Se(){clearInterval(V.value)}function ee(a){!s.value||w.value||(a==-1||a==1)&&(s.value.x=s.value.x+a,L()&&(s.value.x=s.value.x-a))}function ae(){return!s.value||w.value?!1:(s.value.y=s.value.y+1,L()?(s.value.y=s.value.y-1,na(),!0):!1)}function Ce(){if(!s.value||w.value)return;let a=!1;for(;!a;)a=ae(),Q(1);Q(-1)}function Me(){if(!s.value||w.value)return;let a=s.value.shape;s.value.rotate(),L()&&(s.value.x++,L()&&(s.value.x--,s.value.x--,L()&&(s.value.shape=a,s.value.x++)))}function L(){if(!s.value)return!1;let a=!1;return s.value.getPositions().forEach(t=>{const f=t[0],I=t[1];I>=0?(I>H-1||f<0||f>T-1||g.value[I]&&g.value[I][f]!=null)&&(a=!0):(f<0||f>T-1)&&(a=!0)}),a}function na(){s.value&&(s.value.getPositions().forEach(a=>{a[1]>=0&&a[0]>=0&&(g.value[a[1]][a[0]]=s.value.type)}),_e(),oa(),N.value++)}function oa(){let a=0;for(let f=g.value.length-1;f>=0;f--)g.value[f].every(te=>te!==null)&&(g.value.splice(f,1),g.value.unshift(Array(T).fill(null)),a++,f++);let t=0;return a==1?t=40*(m.value+1):a==2?t=100*(m.value+1):a==3?t=300*(m.value+1):a==4&&(t=1200*(m.value+1)),Q(t),D.value=D.value+a,_.value+=a,D.value>=10&&(m.value++,D.value=0),a}function ra(){S.value||w.value||ee(-1)}function ia(){S.value||w.value||ee(1)}function ua(){S.value||w.value||(Q(1),ae())}function ca(){S.value||w.value||Me()}function da(){S.value||w.value||Ce()}function Q(a){M.value+=a}function De(a){if(n.value===1&&x.value&&(n.value=0,x.value=!1),fe.value){["Enter","Space"].includes(a.code)&&we(),a.preventDefault();return}if(a.code=="Escape"||a.code=="KeyP"){if(!R.value)return;oe(),a.preventDefault();return}if(w.value||S.value||!R.value)return;switch(["ArrowLeft","ArrowRight","ArrowDown","ArrowUp","Space","KeyA","KeyD","KeyS","KeyW"].includes(a.code)&&a.preventDefault(),a.code){case"ArrowLeft":case"KeyA":ee(-1);break;case"ArrowRight":case"KeyD":ee(1);break;case"ArrowDown":case"KeyS":Q(1),ae();break;case"ArrowUp":case"KeyW":Me();break;case"Space":Ce();break}}function va(){document.addEventListener("keydown",De)}function xe(){document.removeEventListener("keydown",De)}async function fa(){const a=await Ia();!a||!Array.isArray(a)||(G.value=a)}return ce(()=>o.isDarkMode,()=>{me()}),wa(async()=>{ge(),ze(),va(),n.value=C.value?1:0,await fa()}),Sa(()=>{xe(),Se(),clearInterval(J.value),O&&window.removeEventListener("resize",O)}),(a,t)=>(b(),y("div",Xa,[t[16]||(t[16]=e("h1",{class:"game-header"},"KfKblock",-1)),e("div",Za,[e("button",{onClick:Xe,class:"leaderboard-toggle"},[t[0]||(t[0]=e("span",null,"🏆 Topplista",-1)),e("span",{class:Y(["toggle-icon",{expanded:k.value}])},"▼",2)]),e("div",{class:Y(["leaderboard-wrapper",{expanded:k.value}])},[e("div",za,[e("table",et,[t[1]||(t[1]=e("thead",null,[e("tr",null,[e("th",null,"Plats"),e("th",null,"Spelare"),e("th",null,"Poäng")])],-1)),e("tbody",null,[(b(!0),y(We,null,Ca(Je.value,(f,I)=>(b(),y("tr",{key:f.playerID,class:"leaderboard-row"},[e("td",at,h(I+1),1),e("td",tt,h(f.playerID),1),e("td",lt,h(f.Score.toLocaleString()),1)]))),128))])])])],2)]),e("div",st,[e("div",nt,[e("div",ot,[e("span",rt,"Poäng: "+h(M.value),1),e("span",it,"Nivå: "+h(m.value),1)]),e("div",ut,[e("button",{onClick:oe,class:"mobile-btn",title:S.value?"Fortsätt":"Pausa"},[S.value&&B.value==0?(b(),y("span",dt,"▶")):S.value&&B.value>0?(b(),y("span",vt,h(B.value.toFixed(1)),1)):(b(),y("span",ft,"⏸"))],8,ct),e("button",{onClick:pe,class:"mobile-btn",title:n.value===1?"Dölj pilar":"Visa pilar"},[n.value===1?(b(),y("span",ht,"◆")):(b(),y("span",pt,"◇"))],8,mt),e("button",{onClick:he,class:"mobile-btn",title:"Info"},"ℹ︎")])]),e("div",gt,[e("div",bt,[t[2]||(t[2]=e("span",{class:"mini-label"},"Rader",-1)),e("span",yt,h(D.value),1)]),e("div",kt,[t[3]||(t[3]=e("span",{class:"mini-label"},"Totala",-1)),e("span",_t,h(_.value),1)]),e("div",wt,[t[4]||(t[4]=e("span",{class:"mini-label"},"Tid",-1)),e("span",St,h(ve.value),1)]),e("div",Ct,[t[5]||(t[5]=e("span",{class:"mini-label"},"Block",-1)),e("span",Mt,h(N.value),1)])])]),e("div",Dt,[e("div",xt,[e("div",It,[e("button",{onClick:oe,class:"sidebar-btn"},[S.value&&B.value==0?(b(),y("span",Pt," Fortsätt ")):S.value&&B.value>0?(b(),y("span",Bt,h(B.value.toFixed(1)),1)):(b(),y("span",Nt," Pausa "))]),e("button",{onClick:pe,class:"sidebar-btn"},[n.value===1?(b(),y("span",At,"Dölj pilar")):(b(),y("span",Et,"Visa pilar"))]),e("button",{onClick:he,class:"sidebar-btn",title:U.value?"Dölj info":"Visa info"},[e("span",null,h(U.value?"ℹ︎ Dölj":"ℹ︎ Info"),1)],8,Rt)]),t[6]||(t[6]=e("div",{class:"next-piece-container"},[e("span",{class:"info-label"},"Next"),e("canvas",{class:"kfkblock-canvas",id:"nextPieceCanvas"})],-1))]),e("div",Tt,[fe.value?(b(),Le(Qa,{key:0,score:M.value,level:m.value,linesCleared:_.value,gameData:Qe.value,gameOver:w.value,gameStarted:R.value,onStartGame:we},null,8,["score","level","linesCleared","gameData","gameOver","gameStarted"])):E("",!0),e("div",$t,[e("div",Ft,[e("div",Ot,[e("button",{onClick:ca,class:Y(["overlay-btn rotate-btn",{"hidden-mode":n.value===0,"arrow-mode":n.value===1}]),title:"Rotera"}," ↻ ",2),e("button",{onClick:ra,class:Y(["overlay-btn left-btn",{"hidden-mode":n.value===0,"arrow-mode":n.value===1}]),title:"Vänster"}," ← ",2),e("button",{onClick:ia,class:Y(["overlay-btn right-btn",{"hidden-mode":n.value===0,"arrow-mode":n.value===1}]),title:"Höger"}," → ",2),e("button",{onClick:ua,class:Y(["overlay-btn down-btn",{"hidden-mode":n.value===0,"arrow-mode":n.value===1}]),title:"Ner"}," ↓ ",2)]),t[7]||(t[7]=e("canvas",{class:"kfkblock-canvas",id:"tetrisCanvas"},null,-1))]),t[8]||(t[8]=e("div",{class:"mobile-next-piece"},[e("span",{class:"mobile-next-label"},"Next"),e("canvas",{class:"kfkblock-canvas",id:"nextPieceCanvasMobile"})],-1))]),e("button",{onClick:da,class:"hard-drop-btn"},"Släpp")]),e("div",Gt,[e("div",Kt,[e("div",Ht,[t[9]||(t[9]=e("span",{class:"info-label"},"Poäng",-1)),e("span",Lt,h(M.value),1)]),e("div",Wt,[t[10]||(t[10]=e("span",{class:"info-label"},"Nivå",-1)),e("span",Vt,h(m.value),1)]),e("div",jt,[t[11]||(t[11]=e("span",{class:"info-label"},"Rader",-1)),e("span",Ut,h(D.value),1)]),e("div",qt,[t[12]||(t[12]=e("span",{class:"info-label"},"Totala Rader",-1)),e("span",Yt,h(_.value),1)]),e("div",Jt,[t[13]||(t[13]=e("span",{class:"info-label"},"Tid",-1)),e("span",Qt,h(ve.value),1)]),e("div",Xt,[t[14]||(t[14]=e("span",{class:"info-label"},"Använda Block",-1)),e("span",Zt,h(N.value),1)])])])]),U.value?(b(),y("div",zt,[...t[15]||(t[15]=[Ma('<div class="information-text" data-v-c71da9a6><strong data-v-c71da9a6>Grunderna</strong><p data-v-c71da9a6> Använd pilarna och mellanslagstangenten på tangentbordet, eller knapparna ovan för att flytta och rotera blocken. Fyll horisontella rader helt för att få poäng och därmed rensa dem från spelplanen. Om blocken staplas upp till toppen av spelplanen så att nästa block inte kan placeras förlorar du spelet. </p><strong data-v-c71da9a6>Block</strong><p data-v-c71da9a6> Det finns 7 olika block. Blocken väljs slupmässigt ur en säck som innehåller två av varje bit. När alla block är tagna fylls säcken på igen. </p><p data-v-c71da9a6> Genom att trycka på pil ner eller mellanslag faller blocken snabbare. Du får ett poäng för varje ruta blocket faller. När du kommer till högre nivåer faller blocket snabbare, efter nivå 10 ökar inte hastigheten mer. </p></div><div class="information-text" data-v-c71da9a6><strong data-v-c71da9a6>Poäng</strong><p data-v-c71da9a6> Rensa rader för att få poäng, fler rensade rader med samma block ger mer poäng enligt tabellen nedan. Poängen för rensade rader multipliceras med den nivån du spelar på, plus ett. Till exempel, om du rensar två rader på nivå 2 får du 100*(2+1) = 300p. För varje tio rader du rensar går du upp en nivå. </p><table data-v-c71da9a6><thead data-v-c71da9a6><tr data-v-c71da9a6><td data-v-c71da9a6>Rensade rader</td><th data-v-c71da9a6>1</th><th data-v-c71da9a6>2</th><th data-v-c71da9a6>3</th><th data-v-c71da9a6>4</th></tr></thead><tbody data-v-c71da9a6><tr data-v-c71da9a6><td data-v-c71da9a6>Poäng</td><td data-v-c71da9a6>40p</td><td data-v-c71da9a6>100p</td><td data-v-c71da9a6>300p</td><td data-v-c71da9a6>1200p</td></tr></tbody></table></div>',2)])])):E("",!0)]))}},ll=He(el,[["__scopeId","data-v-c71da9a6"]]);export{ll as default};
