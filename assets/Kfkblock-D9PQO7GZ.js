import{A as Le,_ as $e,B as pt,r,w as ce,c as u,h as i,C as Ke,e as O,b as e,D as ht,t as _,z as xe,f as Re,d as Te,v as Fe,s as gt,F as He,u as yt,j as ee,o as kt,k as _t,y as Y,p as wt,E as Ct}from"./index-DcJe6jmK.js";const We=["rgb(70, 140, 70)","rgb(170, 200, 160)","rgb(130, 170, 120)","rgb(70, 140, 70)","rgb(70, 140, 70)","rgb(20, 20, 20)","rgb(130, 130, 130)"];function ue(s){return getComputedStyle(document.documentElement).getPropertyValue(s).trim()}function je(s){return{background:ue("--theme-canvas-bg")||(s?"#111827":"#e8f5e8"),grid:ue("--theme-canvas-grid")||(s?"#374151":"#d4d4d8"),border:ue("--theme-canvas-border")||(s?"#374151":"#4a5568")}}function St(s){const o=s.getShape().map(m=>m[0]),c=s.getShape().map(m=>m[1]),f=Math.abs(Math.min(...o))+Math.max(...o)+1,n=Math.abs(Math.min(...c))+Math.max(...c)+1;return{blockWidth:f,blockHeight:n}}function Ve(s,o,c,f,n,m){o.getShape().forEach(h=>{const b=(c+h[0])*n,l=(f+h[1])*n;s.fillStyle=o.color,s.fillRect(b,l,n,n),s.fillStyle="rgba(30,30,30,0.8)",s.fillRect(b+m,l+m,n-m*2,n-m*2)})}function de(s,o,c,f,n,m,h,b){if(!s||!o||o.length===0)return;const l=je(m);s.fillStyle=l.background,s.fillRect(0,0,c,f),s.strokeStyle=l.grid,s.beginPath();for(let v=1;v<h;v++)s.moveTo(v*n,0),s.lineTo(v*n,f);for(let v=1;v<b;v++)s.moveTo(0,v*n),s.lineTo(c,v*n);s.stroke();for(let v=0;v<o.length;v++){const P=o[v];for(let p=0;p<P.length;p++){const C=P[p];C!=null&&(s.fillStyle=We[C],s.fillRect(p*n+1,v*n+1,n-2,n-2))}}}function Ue(s,o,c,f,n=null,m){if(!s||!o)return;const h=n||m,b=h/5.5;Ve(o,s,c,f,h,b)}function Dt(s,o,c,f){if(!s||!o)return;const n=s.y;let m=-1;for(;!f();)s.y++,m++;s.y=n;const h=c/5.5,b=s.color.replace("rgb","rgba").replace(")",", 0.3)");o.fillStyle=b,s.getPositions().forEach(l=>{o.fillRect(l[0]*c+h,(m+l[1])*c+h,c-h*2,c-h*2)})}function qe(s,o,c,f){if(!s||s.length===0||!o)return;const n=o.canvas,m=je(f);o.fillStyle=m.background,o.fillRect(0,0,n.width,n.height);const h=n.height/3,b=c/5.5;s.slice(0,3).forEach((l,v)=>{if(!l)return;const P=v*h,{blockWidth:p,blockHeight:C}=St(l);let D=1.25;C===1&&(D-=.5);const N=1+(4-p)/2,G=P/c+D;Ve(o,l,N,G,c,b)})}function Oe(s,o,c,f,n,m,h,b,l,v,P,p=null,C=null){s||!o||(de(o,c,f,n,m,h,b,l),v&&(Dt(v,o,m,P),Ue(v,o,v.x,v.y,null,m)),p&&C&&qe(p,C,m,h))}async function It(){const{data:s,error:o}=await Le.functions.invoke("kfkblock/kfkblock-scores",{method:"GET"});if(o)throw console.error("Error fetching top scores:",o),o;return s}async function Ge(s){const{data:o,error:c}=Le.functions.invoke("kfkblock/kfkblock-scores",{method:"POST",body:JSON.stringify(s)});if(c)throw console.error("Error submitting score:",c),c;return o}const Pt={class:"modal-content"},Mt={key:0},At={key:1},Bt={key:2},Nt={key:3},Et={key:4,class:"score-save-options"},xt={key:0,class:"auth-user-options"},Rt={class:"save-prompt"},Tt={key:1,class:"unauth-user-options"},Ft={class:"button-group-inline"},Ot={key:1,class:"guest-form-overlay"},Gt={class:"score-display"},Lt={class:"score-value"},$t={class:"button-group"},Kt=["disabled"],Ht={key:0,class:"error-message"},Wt={__name:"AddPlayerForm",props:{score:{type:Number,required:!0},level:{type:Number,required:!0},linesCleared:{type:Number,required:!0},gameData:{type:Object,required:!0,validator:s=>s&&typeof s.blocksUsed=="number"&&typeof s.level=="number"&&typeof s.levelClearedRows=="number"},gameOver:{type:Boolean,default:!1},gameStarted:{type:Boolean,default:!1}},emits:["close","startGame","updateLeaderboard"],setup(s,{emit:o}){const c=pt(),f=s,n=r(""),m=r(""),h=r(!1),b=r(!1),l=r(!1),v=r(!0),P=r(""),p=r(!1),C=r(""),D=r(""),N=o,G={2e3:["Det var inget vidare","Klassisk kugg","Ge upp"],5e3:["Nästan godkänt","Det är ett U","Kan granskas"],1e4:["Limes","Du hade fått en 3a"],15e3:["Helt ok","Granska till 4a"],2e4:["Respektabel 4a"],3e4:["Nästan en femma"],4e4:["Imponerande","Bättre kan du"],5e4:["Sök webmästeriet","Kämpa","Du är sämst"]};function U(){if(!f.gameOver)return"";if(D.value)return D.value;let g="Game Over";for(let d in G)if(f.score<=d){const B=G[d];g=B[Math.floor(Math.random()*B.length)];break}return D.value=g,g}function J(){N("startGame")}function V(){console.log("User chose not to save score"),v.value=!1}async function w(){console.log("Saving score for authenticated user...");const g={block:f.gameData.blocksUsed-1,level:f.level,levelClearedRows:f.gameData.levelClearedRows,score:f.score},d=c.profile?.username||c.user?.email||"Authenticated User",B=c.profile?.full_name||null,k={playerID:d,RealName:B,Score:f.score,Other:g,Key:g.score+g.block**2+g.levelClearedRows*3-7};try{const I=await Ge(k);I.cheat&&(C.value=I.message||"Poängen kunde inte verifieras"),I?(console.log("Score saved successfully:",I),N("updateLeaderboard",I)):console.error("Failed to save score:",I)}catch(I){console.error("Error saving score:",I)}}function S(){h.value=!1,b.value=!1,N("close")}function M(g){P.value=g,l.value=!0}function T(){b.value=!0,h.value=!0}function $(){l.value=!1,P.value=""}function A(){$()}function K(g){return g.score+g.block**2+g.levelClearedRows*3-7}async function H(g){if(g&&g.preventDefault(),!p.value){console.log("Submitting player details..."),p.value=!0,C.value="";try{const d={block:f.gameData.blocksUsed-1,level:f.gameData.level,levelClearedRows:f.gameData.levelClearedRows,score:f.score};if(!n.value.trim()){C.value="Visningsnamn är obligatoriskt",p.value=!1;return}const B=n.value.trim(),k=m.value.trim()||null,I={playerID:B,RealName:k,Score:f.score,Other:d,Key:K(d)};console.log("Sending data to API:",I);const L=await Ge(I);L.cheat&&(C.value=L.message||"Poängen kunde inte verifieras"),L?(console.log("Score saved successfully:",L),N("updateLeaderboard",L)):console.error("Failed to save score:",L),h.value=!1,b.value=!1,N("close")}catch(d){console.error("Error submitting player details:",d),C.value="Nätverksfel - försök igen senare"}finally{p.value=!1}}}return ce(()=>f.gameStarted,(g,d)=>{g&&!d&&(D.value="")}),ce(()=>f.gameOver,g=>{g||(D.value="")}),(g,d)=>(i(),u(He,null,[l.value?(i(),Ke(ht,{key:0,mode:P.value,onClose:$,onSuccess:A,class:"auth-form"},null,8,["mode"])):O("",!0),e("div",Pt,[s.gameOver?(i(),u("h2",Mt,_(U()),1)):O("",!0),s.gameOver?(i(),u("p",At,"Poäng: "+_(s.score),1)):O("",!0),s.gameOver?(i(),u("p",Bt,"Nivå: "+_(s.level),1)):O("",!0),s.gameOver?(i(),u("p",Nt,"Rader: "+_(s.linesCleared),1)):O("",!0),s.gameOver&&s.score>0&&v.value?(i(),u("div",Et,[xe(c).isAuthed?(i(),u("div",xt,[e("p",Rt,"Spara som "+_(xe(c).profile?.username||"Användare")+"?",1),e("div",{class:"button-group-inline"},[e("button",{onClick:V,class:"btn-decline"},"Nej Tack"),e("button",{onClick:w,class:"btn-save"},"Spara Poäng")])])):(i(),u("div",Tt,[d[4]||(d[4]=e("p",{class:"save-prompt"},"Spara din poäng?",-1)),e("div",Ft,[e("button",{onClick:d[0]||(d[0]=B=>M("login")),class:"btn-auth"},"Logga In"),e("button",{onClick:d[1]||(d[1]=B=>M("signup")),class:"btn-auth"},"Skapa Konto"),e("button",{onClick:T,class:"btn-guest"},"Som Gäst")]),e("button",{onClick:V,class:"btn-decline-full"},"Nej Tack")]))])):O("",!0),e("button",{onClick:J,class:"btn-modal-action"},_(s.gameOver||!s.gameStarted?s.gameStarted?"Spela Igen":"Starta Spelet":"Fortsätt"),1)]),h.value?(i(),u("div",Ot,[e("form",{onSubmit:gt(H,["prevent"]),class:"guest-form-modal"},[e("button",{type:"button",class:"close-form-button",onClick:S},"×"),d[6]||(d[6]=e("h2",null,"Spara som Gäst",-1)),e("p",Gt,[d[5]||(d[5]=Te(" Poäng: ",-1)),e("span",Lt,_(s.score),1)]),d[7]||(d[7]=e("label",{for:"playerID-input",class:"form-label"},[e("abbr",{title:"","data-title":"Syns i topplistan för andra."},[Te(" Visningsnamn"),e("span",{style:{color:"red"}},"*")])],-1)),Re(e("input",{type:"text",id:"playerID-input","onUpdate:modelValue":d[2]||(d[2]=B=>n.value=B),placeholder:"Ditt visningsnamn",class:"form-input",required:""},null,512),[[Fe,n.value]]),d[8]||(d[8]=e("label",{for:"realName-input",class:"form-label"},[e("abbr",{title:"","data-title":"Ditt namn om du vill vara med i webmästeriets prisutdelning (ej nödvändigt)"}," Fullständigt Namn (Frivilligt) ")],-1)),Re(e("input",{type:"text",id:"realName-input","onUpdate:modelValue":d[3]||(d[3]=B=>m.value=B),placeholder:"För- och efternamn",class:"form-input"},null,512),[[Fe,m.value]]),e("div",$t,[e("button",{type:"button",class:"submit-button decline",onClick:S},"Avbryt"),e("button",{type:"submit",class:"submit-button primary",disabled:p.value},_(p.value?"Sparar...":"Spara!"),9,Kt)]),C.value?(i(),u("div",Ht,_(C.value),1)):O("",!0)],32)])):O("",!0)],64))}},jt=$e(Wt,[["__scopeId","data-v-db196b6d"]]),Vt={id:"app-container"},Ut={class:"leaderboard-container"},qt={class:"leaderboard-content"},Yt={class:"leaderboard-table"},Jt={class:"position"},Qt={class:"player-name"},Xt={class:"score"},Zt={class:"mobile-controls-bar"},zt={class:"mobile-top-row"},ea={class:"mobile-score-info"},ta={class:"mobile-score"},aa={class:"mobile-level"},sa={class:"mobile-btn-container"},la={key:0},oa={key:1},na={key:2},ra={key:0},ia={key:1},ua={key:2},ca={class:"game-layout"},da={class:"sidebar desktop-only"},va={class:"sidebar-btn-container"},fa={key:0},ma={key:1},ba={key:2},pa={key:0},ha={key:1},ga={key:2},ya={key:0},ka={key:1},_a={class:"canvas-outer-wrapper"},wa={class:"canvas-and-next-container"},Ca={class:"canvas-container"},Sa={class:"canvas-overlay-controls"},Da={key:0},Ia={key:1},Pa={key:0},Ma={key:1},Aa={key:0},Ba={key:1},Na={key:0},Ea={key:1},xa={class:"sidebar desktop-only"},Ra={class:"game-info"},Ta={class:"info-item"},Fa={class:"info-value"},Oa={class:"info-item"},Ga={class:"info-value"},La={class:"info-item"},$a={class:"info-value"},Ka={class:"info-item"},Ha={class:"info-value"},Wa={class:"info-item"},ja={class:"info-value"},Va={class:"info-item"},Ua={class:"info-value"},qa={class:"mobile-stats"},Ya={class:"mobile-stats-grid"},Ja={class:"mobile-stat-item"},Qa={class:"mobile-stat-value"},Xa={class:"mobile-stat-item"},Za={class:"mobile-stat-value"},za={class:"mobile-stat-item"},es={class:"mobile-stat-value"},ts={class:"mobile-stat-item"},as={class:"mobile-stat-value"},ss={key:0,class:"information-container"},R=10,F=20,te=30,ls={__name:"Kfkblock",setup(s){const o=yt(),c=[[[[-1,-1],[0,-1],[-1,0],[0,0]]],[[[-1,-1],[0,-1],[0,0],[1,0]]],[[[-1,0],[0,0],[0,-1],[1,-1]]],[[[-1,0],[0,0],[1,0],[0,-1]]],[[[-1,0],[0,0],[1,0],[2,0]]],[[[-1,0],[0,0],[1,0],[1,-1]]],[[[-1,0],[0,0],[1,0],[-1,-1]]]],f=[48,43,38,33,28,23,18,13,8,6,5,4,4,3,2,2,1],n=r(null),m=r(null),h=r(null),b=r([]),l=r(null),v=r([]),P=r(0),p=r(0),C=r(0),D=r(0),N=r(0),G=r(0),U=r(null),J=r(null),V=r(0),w=r(!1),S=r(!1),M=r(0),T=r(!1),$=r([]),A=r(te),K=r(R*te),H=r(F*te),g=r(!1),d=r(!1),B=r(!1),k=r(1),I=r(!1),L=r([]),ve=ee(()=>{const a=Math.floor(G.value/60),t=G.value%60;return`${a.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}),fe=ee(()=>!T.value||w.value),Ye=ee(()=>L.value.sort((a,t)=>t.Score-a.Score).slice(0,10)),Je=ee(()=>({blocksUsed:N.value,level:p.value,levelClearedRows:D.value}));function me(){if(n.value){if(T.value&&!w.value)Oe(w.value,n.value,b.value,K.value,H.value,A.value,o.isDarkMode,R,F,l.value,W,v.value,I.value?h.value:m.value);else if(de(n.value,b.value,K.value,H.value,A.value,o.isDarkMode,R,F),v.value.length>0){const a=I.value?h.value:m.value;a&&qe(v.value,a,A.value,o.isDarkMode)}}}function ae(){if(S.value){M.value=3;const a=setInterval(()=>{M.value>0?M.value-=.1:(clearInterval(a),M.value=0,S.value=!1)},100)}else M.value=0,S.value=!0}function be(){g.value=!g.value}function Qe(){d.value=!d.value}function pe(){k.value=(k.value+1)%3}function he(){b.value=Array.from({length:F},()=>Array(R).fill(null))}function ge(a,t){let y;return(...E)=>{clearTimeout(y),y=setTimeout(()=>a.apply(this,E),t)}}function se(){console.log("Adjusting canvas size..."),I.value=window.innerWidth<=768;const a=document.getElementById("app-container"),t=document.querySelector(".hard-drop-btn"),y=document.querySelector(".leaderboard-container"),E=document.querySelector(".mobile-controls-bar"),X=document.querySelector(".mobile-stats"),x=t?t.offsetHeight+10:50,j=y?y.offsetHeight:0,dt=E?E.offsetHeight+10:0,vt=X?X.offsetHeight+10:0,Ae=20,Be=20,Ne=45;let le,oe;if(I.value)le=window.innerHeight-x-j-dt-vt-Ae-Ne,oe=a.offsetWidth-Be-120;else{const q=document.querySelector(".sidebar"),Ee=q?q.offsetWidth:180,bt=20;le=window.innerHeight-x-j-Ae-Ne,oe=a.offsetWidth-Be-Ee*2-bt*2}let ft=Math.floor(le/F),mt=Math.floor(oe/R);A.value=Math.max(10,Math.min(ft,mt,te)),K.value=R*A.value,H.value=F*A.value;const ne=document.getElementById("tetrisCanvas");ne&&(ne.width=K.value,ne.height=H.value);const re=document.getElementById("nextPieceCanvas");re&&(re.width=4*A.value,re.height=8*A.value);const ie=document.getElementById("nextPieceCanvasMobile");if(ie){const q=Math.min(A.value,25);ie.width=4*q,ie.height=8*q}me()}function Xe(){const a=document.getElementById("tetrisCanvas");a&&(n.value=a.getContext("2d"));const t=document.getElementById("nextPieceCanvas");t&&(m.value=t.getContext("2d"));const y=document.getElementById("nextPieceCanvasMobile");y&&(h.value=y.getContext("2d")),se(),window.addEventListener("resize",ge(se,100))}class Ze{constructor(t,y,E){this.x=t,this.y=y,this.type=E,this.shape=c[E][0],this.color=We[E],this.rotation=0}getShape(){return this.shape}getPositions(){return this.shape.map(t=>[t[0]+this.x,t[1]+this.y])}rotate(){let t=[];this.shape.forEach(y=>{this.type==4?t.push([-y[1]+1,y[0]]):this.type==0?t.push([-y[1]-1,y[0]]):t.push([-y[1],y[0]])}),this.shape=t}}function ye(){$.value=[];let a=2;for(let t=0;t<c.length*a;t++)$.value.push(t%c.length)}function ke(){$.value.length==0&&ye();let a=$.value.splice(Math.floor($.value.length*Math.random()),1);return new Ze(5,0,a[0])}function ze(){v.value=[];for(let a=0;a<3;a++)v.value.push(ke())}function _e(){l.value=v.value.shift(),v.value.push(ke()),W()&&(w.value=!0,l.value=null,et())}function we(){w.value=!1,T.value=!0,P.value=0,p.value=0,C.value=0,D.value=0,N.value=0,G.value=0,V.value=f[0],he(),ye(),ze(),_e(),at(),Pe(),J.value=setInterval(tt,1e3/60)}function et(){w.value=!0,clearInterval(J.value),Ce(),Me(),de(n.value,b.value,K.value,H.value,A.value,o.isDarkMode,R,F),l.value&&Ue(l.value,n.value,l.value.x,l.value.y,null,A.value)}function tt(){w.value||!T.value||(S.value||(V.value<=0&&(z(),V.value=f[Math.min(p.value,f.length-1)]),V.value--),Oe(w.value,n.value,b.value,K.value,H.value,A.value,o.isDarkMode,R,F,l.value,W,v.value,I.value?h.value:m.value))}function at(){U.value&&clearInterval(U.value),U.value=setInterval(()=>{!w.value&&T.value&&!S.value&&G.value++},1e3)}function Ce(){clearInterval(U.value)}function Z(a){!l.value||w.value||(a==-1||a==1)&&(l.value.x=l.value.x+a,W()&&(l.value.x=l.value.x-a))}function z(){return!l.value||w.value?!1:(l.value.y=l.value.y+1,W()?(l.value.y=l.value.y-1,st(),!0):!1)}function Se(){if(!l.value||w.value)return;let a=!1;for(;!a;)a=z(),Q(1);Q(-1)}function De(){if(!l.value||w.value)return;let a=l.value.shape;l.value.rotate(),W()&&(l.value.x++,W()&&(l.value.x--,l.value.x--,W()&&(l.value.shape=a,l.value.x++)))}function W(){if(!l.value)return!1;let a=!1;return l.value.getPositions().forEach(t=>{t[1]>=0?(t[1]>F-1||t[0]<0||t[0]>R-1||b.value[t[1]]&&b.value[t[1]][t[0]]!=null)&&(a=!0):t[1]<0&&(t[1]>F-1||t[0]<0||t[0]>R-1)&&(a=!0)}),a}function st(){l.value&&(l.value.getPositions().forEach(a=>{a[1]>=0&&a[0]>=0&&(b.value[a[1]][a[0]]=l.value.type)}),_e(),lt(),N.value++)}function lt(){let a=0;for(let y=0;y<b.value.length;y++){const E=b.value[y];let X=0;for(let x=0;x<E.length;x++)E[x]===null&&X++;if(X===0){a++;for(let x=y;x>1;x--)for(let j=0;j<R;j++)b.value[x][j]=b.value[x-1][j]}}let t=0;return a==1?t=40*(p.value+1):a==2?t=100*(p.value+1):a==3?t=300*(p.value+1):a==4&&(t=1200*(p.value+1)),Q(t),D.value=D.value+a,C.value+=a,D.value>=10&&(p.value++,D.value=0),a}function ot(){S.value||w.value||Z(-1)}function nt(){S.value||w.value||Z(1)}function rt(){S.value||w.value||(Q(1),z())}function it(){S.value||w.value||De()}function ut(){S.value||w.value||Se()}function Q(a){P.value+=a}function Ie(a){if(fe.value){["Enter","Space"].includes(a.code)&&we(),a.preventDefault();return}if(a.code=="Escape"||a.code=="KeyP"){if(!T.value)return;ae(),a.preventDefault();return}if(!(w.value||S.value||!T.value))switch(["ArrowLeft","ArrowRight","ArrowDown","ArrowUp","Space"].includes(a.code)&&a.preventDefault(),a.code){case"ArrowLeft":case"KeyA":Z(-1);break;case"ArrowRight":case"KeyD":Z(1);break;case"ArrowDown":case"KeyS":Q(1),z();break;case"ArrowUp":case"KeyW":De();break;case"Space":Se();break}}function Pe(){document.addEventListener("keydown",Ie)}function Me(){document.removeEventListener("keydown",Ie)}async function ct(){const a=await It();!a||!Array.isArray(a)||(L.value=a)}return ce(()=>o.isDarkMode,()=>{me()}),kt(async()=>{he(),Xe(),Pe(),await ct()}),_t(()=>{Me(),Ce(),clearInterval(J.value),window.removeEventListener("resize",ge(se,100))}),(a,t)=>(i(),u("div",Vt,[t[17]||(t[17]=e("h1",{class:"game-header"},"KfKblock",-1)),e("div",Ut,[e("button",{onClick:Qe,class:"leaderboard-toggle"},[t[1]||(t[1]=e("span",null,"🏆 Topplista",-1)),e("span",{class:Y(["toggle-icon",{expanded:d.value}])},"▼",2)]),e("div",{class:Y(["leaderboard-wrapper",{expanded:d.value}])},[e("div",qt,[e("table",Yt,[t[2]||(t[2]=e("thead",null,[e("tr",null,[e("th",null,"Plats"),e("th",null,"Spelare"),e("th",null,"Poäng")])],-1)),e("tbody",null,[(i(!0),u(He,null,wt(Ye.value,(y,E)=>(i(),u("tr",{key:y.playerID,class:"leaderboard-row"},[e("td",Jt,_(E+1),1),e("td",Qt,_(y.playerID),1),e("td",Xt,_(y.Score.toLocaleString()),1)]))),128))])])])],2)]),e("div",Zt,[e("div",zt,[e("div",ea,[e("span",ta,_(P.value)+"p",1),e("span",aa,"Nivå "+_(p.value),1)]),e("div",sa,[e("button",{onClick:ae,class:"mobile-btn"},[S.value&&M.value==0?(i(),u("span",la,"▶️")):S.value&&M.value>0?(i(),u("span",oa,_(M.value.toFixed(1)),1)):(i(),u("span",na,"⏸️"))]),e("button",{onClick:pe,class:"mobile-btn"},[k.value===0?(i(),u("span",ra,"🎮")):k.value===1?(i(),u("span",ia,"🔤")):(i(),u("span",ua,"🔘"))]),e("button",{onClick:be,class:"mobile-btn"},"ℹ️")])])]),e("div",ca,[e("div",da,[e("div",va,[e("button",{onClick:ae,class:"sidebar-btn"},[S.value&&M.value==0?(i(),u("span",fa," Fortsätt ")):S.value&&M.value>0?(i(),u("span",ma,_(M.value.toFixed(1)),1)):(i(),u("span",ba," Pausa "))]),e("button",{onClick:pe,class:"sidebar-btn"},[k.value===0?(i(),u("span",pa,"Dölj")):k.value===1?(i(),u("span",ha,"Pilar")):(i(),u("span",ga,"Knappar"))]),e("button",{onClick:be,class:"sidebar-btn"},[g.value?(i(),u("span",ya," Dölj Info ")):(i(),u("span",ka," Visa Info "))])]),t[3]||(t[3]=e("div",{class:"next-piece-container"},[e("span",{class:"info-label"},"Next"),e("canvas",{class:"kfkblock-canvas",id:"nextPieceCanvas"})],-1))]),e("div",_a,[e("div",wa,[e("div",Ca,[fe.value?(i(),Ke(jt,{key:0,score:P.value,level:p.value,linesCleared:C.value,gameData:Je.value,gameOver:w.value,gameStarted:T.value,onClose:t[0]||(t[0]=y=>B.value=!1),onStartGame:we},null,8,["score","level","linesCleared","gameData","gameOver","gameStarted"])):O("",!0),e("div",Sa,[e("button",{onClick:it,class:Y(["overlay-btn rotate-btn",{"hidden-mode":k.value===0,"arrow-mode":k.value===1,"full-mode":k.value===2}])},[k.value===1?(i(),u("span",Da,"↻")):(i(),u("span",Ia,"Rotera"))],2),e("button",{onClick:ot,class:Y(["overlay-btn left-btn",{"hidden-mode":k.value===0,"arrow-mode":k.value===1,"full-mode":k.value===2}])},[k.value===1?(i(),u("span",Pa,"←")):(i(),u("span",Ma,"Vänster"))],2),e("button",{onClick:nt,class:Y(["overlay-btn right-btn",{"hidden-mode":k.value===0,"arrow-mode":k.value===1,"full-mode":k.value===2}])},[k.value===1?(i(),u("span",Aa,"→")):(i(),u("span",Ba,"Höger"))],2),e("button",{onClick:rt,class:Y(["overlay-btn down-btn",{"hidden-mode":k.value===0,"arrow-mode":k.value===1,"full-mode":k.value===2}])},[k.value===1?(i(),u("span",Na,"↓")):(i(),u("span",Ea,"Ner"))],2)]),t[4]||(t[4]=e("canvas",{class:"kfkblock-canvas",id:"tetrisCanvas"},null,-1))]),t[5]||(t[5]=e("div",{class:"mobile-next-piece"},[e("span",{class:"mobile-next-label"},"Next"),e("canvas",{class:"kfkblock-canvas",id:"nextPieceCanvasMobile"})],-1))]),e("button",{onClick:ut,class:"hard-drop-btn"},"Släpp")]),e("div",xa,[e("div",Ra,[e("div",Ta,[t[6]||(t[6]=e("span",{class:"info-label"},"Poäng",-1)),e("span",Fa,_(P.value),1)]),e("div",Oa,[t[7]||(t[7]=e("span",{class:"info-label"},"Nivå",-1)),e("span",Ga,_(p.value),1)]),e("div",La,[t[8]||(t[8]=e("span",{class:"info-label"},"Rader",-1)),e("span",$a,_(D.value),1)]),e("div",Ka,[t[9]||(t[9]=e("span",{class:"info-label"},"Totala Rader",-1)),e("span",Ha,_(C.value),1)]),e("div",Wa,[t[10]||(t[10]=e("span",{class:"info-label"},"Tid",-1)),e("span",ja,_(ve.value),1)]),e("div",Va,[t[11]||(t[11]=e("span",{class:"info-label"},"Använda Block",-1)),e("span",Ua,_(N.value),1)])])])]),e("div",qa,[e("div",Ya,[e("div",Ja,[t[12]||(t[12]=e("span",{class:"mobile-stat-label"},"Rader",-1)),e("span",Qa,_(D.value),1)]),e("div",Xa,[t[13]||(t[13]=e("span",{class:"mobile-stat-label"},"Totala",-1)),e("span",Za,_(C.value),1)]),e("div",za,[t[14]||(t[14]=e("span",{class:"mobile-stat-label"},"Tid",-1)),e("span",es,_(ve.value),1)]),e("div",ts,[t[15]||(t[15]=e("span",{class:"mobile-stat-label"},"Block",-1)),e("span",as,_(N.value),1)])])]),g.value?(i(),u("div",ss,[...t[16]||(t[16]=[Ct('<div class="information-text" data-v-b7b4873a><strong data-v-b7b4873a>Grunderna</strong><p data-v-b7b4873a> Använd pilarna och mellanslagstangenten på tangentbordet, eller knapparna ovan för att flytta och rotera blocken. Fyll horisontella rader helt för att få poäng och därmed rensa dem från spelplanen. Om blocken staplas upp till toppen av spelplanen så att nästa block inte kan placeras förlorar du spelet. </p><strong data-v-b7b4873a>Block</strong><p data-v-b7b4873a> Det finns 7 olika block. Blocken väljs slupmässigt ur en säck som innehåller två av varje bit. När alla block är tagna fylls säcken på igen. </p><p data-v-b7b4873a> Genom att trycka på pil ner eller mellanslag faller blocken snabbare. Du får ett poäng för varje ruta blocket faller. När du kommer till högre nivåer faller blocket snabbare, efter nivå 10 ökar inte hastigheten mer. </p></div><div class="information-text" data-v-b7b4873a><strong data-v-b7b4873a>Poäng</strong><p data-v-b7b4873a> Rensa rader för att få poäng, fler rensade rader med samma block ger mer poäng enligt tabellen nedan. Poängen för rensade rader multipliceras med den nivån du spelar på, plus ett. Till exempel, om du rensar två rader på nivå 2 får du 100*(2+1) = 300p. För varje tio rader du rensar går du upp en nivå. </p><table data-v-b7b4873a><thead data-v-b7b4873a><tr data-v-b7b4873a><td data-v-b7b4873a>Rensade rader</td><th data-v-b7b4873a>1</th><th data-v-b7b4873a>2</th><th data-v-b7b4873a>3</th><th data-v-b7b4873a>4</th></tr></thead><tbody data-v-b7b4873a><tr data-v-b7b4873a><td data-v-b7b4873a>Poäng</td><td data-v-b7b4873a>40p</td><td data-v-b7b4873a>100p</td><td data-v-b7b4873a>300p</td><td data-v-b7b4873a>1200p</td></tr></tbody></table></div>',2)])])):O("",!0)]))}},rs=$e(ls,[["__scopeId","data-v-b7b4873a"]]);export{rs as default};
