const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/2048-D51ZAE1G.js","assets/2048-_FGuShXQ.css","assets/Minesweeper-r71dXdZb.js","assets/Minesweeper-D6uZliF6.css","assets/Kfkblock-C6FZDbqY.js","assets/Kfkblock-D7aOESqW.css","assets/Kfkbandvagn-C7gXI3vF.js","assets/Kfkbandvagn-DP_SNWA7.css","assets/Snake-DDnVyuW-.js","assets/Snake-zQ7c_1f-.css","assets/LightsOut-BlExRPDW.js","assets/LightsOut-C5pFotLq.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function fi(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const _e={},Rs=[],bt=()=>{},ya=()=>!1,nr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),pi=t=>t.startsWith("onUpdate:"),Re=Object.assign,gi=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},mc=Object.prototype.hasOwnProperty,ge=(t,e)=>mc.call(t,e),Z=Array.isArray,$s=t=>wn(t)==="[object Map]",Us=t=>wn(t)==="[object Set]",qi=t=>wn(t)==="[object Date]",ie=t=>typeof t=="function",xe=t=>typeof t=="string",wt=t=>typeof t=="symbol",ye=t=>t!==null&&typeof t=="object",ba=t=>(ye(t)||ie(t))&&ie(t.then)&&ie(t.catch),wa=Object.prototype.toString,wn=t=>wa.call(t),vc=t=>wn(t).slice(8,-1),Sa=t=>wn(t)==="[object Object]",mi=t=>xe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ys=fi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),rr=t=>{const e=Object.create(null);return(s=>e[s]||(e[s]=t(s)))},_c=/-(\w)/g,nt=rr(t=>t.replace(_c,(e,s)=>s?s.toUpperCase():"")),yc=/\B([A-Z])/g,us=rr(t=>t.replace(yc,"-$1").toLowerCase()),ir=rr(t=>t.charAt(0).toUpperCase()+t.slice(1)),yr=rr(t=>t?`on${ir(t)}`:""),Kt=(t,e)=>!Object.is(t,e),Dn=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},ka=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},Hn=t=>{const e=parseFloat(t);return isNaN(e)?t:e},bc=t=>{const e=xe(t)?Number(t):NaN;return isNaN(e)?t:e};let Vi;const or=()=>Vi||(Vi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Sn(t){if(Z(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],r=xe(n)?Ec(n):Sn(n);if(r)for(const i in r)e[i]=r[i]}return e}else if(xe(t)||ye(t))return t}const wc=/;(?![^(]*\))/g,Sc=/:([^]+)/,kc=/\/\*[^]*?\*\//g;function Ec(t){const e={};return t.replace(kc,"").split(wc).forEach(s=>{if(s){const n=s.split(Sc);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Fe(t){let e="";if(xe(t))e=t;else if(Z(t))for(let s=0;s<t.length;s++){const n=Fe(t[s]);n&&(e+=n+" ")}else if(ye(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Tc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Pc=fi(Tc);function Ea(t){return!!t||t===""}function xc(t,e){if(t.length!==e.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=kn(t[n],e[n]);return s}function kn(t,e){if(t===e)return!0;let s=qi(t),n=qi(e);if(s||n)return s&&n?t.getTime()===e.getTime():!1;if(s=wt(t),n=wt(e),s||n)return t===e;if(s=Z(t),n=Z(e),s||n)return s&&n?xc(t,e):!1;if(s=ye(t),n=ye(e),s||n){if(!s||!n)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!kn(t[o],e[o]))return!1}}return String(t)===String(e)}function vi(t,e){return t.findIndex(s=>kn(s,e))}const Ta=t=>!!(t&&t.__v_isRef===!0),Q=t=>xe(t)?t:t==null?"":Z(t)||ye(t)&&(t.toString===wa||!ie(t.toString))?Ta(t)?Q(t.value):JSON.stringify(t,Pa,2):String(t),Pa=(t,e)=>Ta(e)?Pa(t,e.value):$s(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,r],i)=>(s[br(n,i)+" =>"]=r,s),{})}:Us(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>br(s))}:wt(e)?br(e):ye(e)&&!Z(e)&&!Sa(e)?String(e):e,br=(t,e="")=>{var s;return wt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Le;class xa{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Le,!e&&Le&&(this.index=(Le.scopes||(Le.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Le;try{return Le=this,e()}finally{Le=s}}}on(){++this._on===1&&(this.prevScope=Le,Le=this)}off(){this._on>0&&--this._on===0&&(Le=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Ca(t){return new xa(t)}function Aa(){return Le}function Cc(t,e=!1){Le&&Le.cleanups.push(t)}let Se;const wr=new WeakSet;class Oa{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Le&&Le.active&&Le.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wr.has(this)&&(wr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||$a(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Wi(this),Ia(this);const e=Se,s=lt;Se=this,lt=!0;try{return this.fn()}finally{ja(this),Se=e,lt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bi(e);this.deps=this.depsTail=void 0,Wi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Br(this)&&this.run()}get dirty(){return Br(this)}}let Ra=0,Xs,Qs;function $a(t,e=!1){if(t.flags|=8,e){t.next=Qs,Qs=t;return}t.next=Xs,Xs=t}function _i(){Ra++}function yi(){if(--Ra>0)return;if(Qs){let e=Qs;for(Qs=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Xs;){let e=Xs;for(Xs=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function Ia(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ja(t){let e,s=t.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),bi(n),Ac(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=e,t.depsTail=s}function Br(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Ma(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Ma(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===un)||(t.globalVersion=un,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Br(t))))return;t.flags|=2;const e=t.dep,s=Se,n=lt;Se=t,lt=!0;try{Ia(t);const r=t.fn(t._value);(e.version===0||Kt(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Se=s,lt=n,ja(t),t.flags&=-3}}function bi(t,e=!1){const{dep:s,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)bi(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Ac(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let lt=!0;const La=[];function It(){La.push(lt),lt=!1}function jt(){const t=La.pop();lt=t===void 0?!0:t}function Wi(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Se;Se=void 0;try{e()}finally{Se=s}}}let un=0;class Oc{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class wi{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Se||!lt||Se===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Se)s=this.activeLink=new Oc(Se,this),Se.deps?(s.prevDep=Se.depsTail,Se.depsTail.nextDep=s,Se.depsTail=s):Se.deps=Se.depsTail=s,Da(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Se.depsTail,s.nextDep=void 0,Se.depsTail.nextDep=s,Se.depsTail=s,Se.deps===s&&(Se.deps=n)}return s}trigger(e){this.version++,un++,this.notify(e)}notify(e){_i();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{yi()}}}function Da(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Da(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const qn=new WeakMap,ls=Symbol(""),zr=Symbol(""),dn=Symbol("");function De(t,e,s){if(lt&&Se){let n=qn.get(t);n||qn.set(t,n=new Map);let r=n.get(s);r||(n.set(s,r=new wi),r.map=n,r.key=s),r.track()}}function Ot(t,e,s,n,r,i){const o=qn.get(t);if(!o){un++;return}const a=l=>{l&&l.trigger()};if(_i(),e==="clear")o.forEach(a);else{const l=Z(t),c=l&&mi(s);if(l&&s==="length"){const u=Number(n);o.forEach((d,h)=>{(h==="length"||h===dn||!wt(h)&&h>=u)&&a(d)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),c&&a(o.get(dn)),e){case"add":l?c&&a(o.get("length")):(a(o.get(ls)),$s(t)&&a(o.get(zr)));break;case"delete":l||(a(o.get(ls)),$s(t)&&a(o.get(zr)));break;case"set":$s(t)&&a(o.get(ls));break}}yi()}function Rc(t,e){const s=qn.get(t);return s&&s.get(e)}function fs(t){const e=de(t);return e===t?e:(De(e,"iterate",dn),st(t)?e:e.map(je))}function ar(t){return De(t=de(t),"iterate",dn),t}const $c={__proto__:null,[Symbol.iterator](){return Sr(this,Symbol.iterator,je)},concat(...t){return fs(this).concat(...t.map(e=>Z(e)?fs(e):e))},entries(){return Sr(this,"entries",t=>(t[1]=je(t[1]),t))},every(t,e){return St(this,"every",t,e,void 0,arguments)},filter(t,e){return St(this,"filter",t,e,s=>s.map(je),arguments)},find(t,e){return St(this,"find",t,e,je,arguments)},findIndex(t,e){return St(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return St(this,"findLast",t,e,je,arguments)},findLastIndex(t,e){return St(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return St(this,"forEach",t,e,void 0,arguments)},includes(...t){return kr(this,"includes",t)},indexOf(...t){return kr(this,"indexOf",t)},join(t){return fs(this).join(t)},lastIndexOf(...t){return kr(this,"lastIndexOf",t)},map(t,e){return St(this,"map",t,e,void 0,arguments)},pop(){return qs(this,"pop")},push(...t){return qs(this,"push",t)},reduce(t,...e){return Ki(this,"reduce",t,e)},reduceRight(t,...e){return Ki(this,"reduceRight",t,e)},shift(){return qs(this,"shift")},some(t,e){return St(this,"some",t,e,void 0,arguments)},splice(...t){return qs(this,"splice",t)},toReversed(){return fs(this).toReversed()},toSorted(t){return fs(this).toSorted(t)},toSpliced(...t){return fs(this).toSpliced(...t)},unshift(...t){return qs(this,"unshift",t)},values(){return Sr(this,"values",je)}};function Sr(t,e,s){const n=ar(t),r=n[e]();return n!==t&&!st(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=s(i.value)),i}),r}const Ic=Array.prototype;function St(t,e,s,n,r,i){const o=ar(t),a=o!==t&&!st(t),l=o[e];if(l!==Ic[e]){const d=l.apply(t,i);return a?je(d):d}let c=s;o!==t&&(a?c=function(d,h){return s.call(this,je(d),h,t)}:s.length>2&&(c=function(d,h){return s.call(this,d,h,t)}));const u=l.call(o,c,n);return a&&r?r(u):u}function Ki(t,e,s,n){const r=ar(t);let i=s;return r!==t&&(st(t)?s.length>3&&(i=function(o,a,l){return s.call(this,o,a,l,t)}):i=function(o,a,l){return s.call(this,o,je(a),l,t)}),r[e](i,...n)}function kr(t,e,s){const n=de(t);De(n,"iterate",dn);const r=n[e](...s);return(r===-1||r===!1)&&Ei(s[0])?(s[0]=de(s[0]),n[e](...s)):r}function qs(t,e,s=[]){It(),_i();const n=de(t)[e].apply(t,s);return yi(),jt(),n}const jc=fi("__proto__,__v_isRef,__isVue"),Ua=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(wt));function Mc(t){wt(t)||(t=String(t));const e=de(this);return De(e,"has",t),e.hasOwnProperty(t)}class Na{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return i;if(s==="__v_raw")return n===(r?i?Vc:Ha:i?za:Ba).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=Z(e);if(!r){let l;if(o&&(l=$c[s]))return l;if(s==="hasOwnProperty")return Mc}const a=Reflect.get(e,s,Pe(e)?e:n);return(wt(s)?Ua.has(s):jc(s))||(r||De(e,"get",s),i)?a:Pe(a)?o&&mi(s)?a:a.value:ye(a)?r?Vn(a):ds(a):a}}class Fa extends Na{constructor(e=!1){super(!1,e)}set(e,s,n,r){let i=e[s];if(!this._isShallow){const l=Jt(i);if(!st(n)&&!Jt(n)&&(i=de(i),n=de(n)),!Z(e)&&Pe(i)&&!Pe(n))return l||(i.value=n),!0}const o=Z(e)&&mi(s)?Number(s)<e.length:ge(e,s),a=Reflect.set(e,s,n,Pe(e)?e:r);return e===de(r)&&(o?Kt(n,i)&&Ot(e,"set",s,n):Ot(e,"add",s,n)),a}deleteProperty(e,s){const n=ge(e,s);e[s];const r=Reflect.deleteProperty(e,s);return r&&n&&Ot(e,"delete",s,void 0),r}has(e,s){const n=Reflect.has(e,s);return(!wt(s)||!Ua.has(s))&&De(e,"has",s),n}ownKeys(e){return De(e,"iterate",Z(e)?"length":ls),Reflect.ownKeys(e)}}class Lc extends Na{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const Dc=new Fa,Uc=new Lc,Nc=new Fa(!0);const Hr=t=>t,Cn=t=>Reflect.getPrototypeOf(t);function Fc(t,e,s){return function(...n){const r=this.__v_raw,i=de(r),o=$s(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=r[t](...n),u=s?Hr:e?Wn:je;return!e&&De(i,"iterate",l?zr:ls),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function An(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Bc(t,e){const s={get(r){const i=this.__v_raw,o=de(i),a=de(r);t||(Kt(r,a)&&De(o,"get",r),De(o,"get",a));const{has:l}=Cn(o),c=e?Hr:t?Wn:je;if(l.call(o,r))return c(i.get(r));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&De(de(r),"iterate",ls),r.size},has(r){const i=this.__v_raw,o=de(i),a=de(r);return t||(Kt(r,a)&&De(o,"has",r),De(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=de(a),c=e?Hr:t?Wn:je;return!t&&De(l,"iterate",ls),a.forEach((u,d)=>r.call(i,c(u),c(d),o))}};return Re(s,t?{add:An("add"),set:An("set"),delete:An("delete"),clear:An("clear")}:{add(r){!e&&!st(r)&&!Jt(r)&&(r=de(r));const i=de(this);return Cn(i).has.call(i,r)||(i.add(r),Ot(i,"add",r,r)),this},set(r,i){!e&&!st(i)&&!Jt(i)&&(i=de(i));const o=de(this),{has:a,get:l}=Cn(o);let c=a.call(o,r);c||(r=de(r),c=a.call(o,r));const u=l.call(o,r);return o.set(r,i),c?Kt(i,u)&&Ot(o,"set",r,i):Ot(o,"add",r,i),this},delete(r){const i=de(this),{has:o,get:a}=Cn(i);let l=o.call(i,r);l||(r=de(r),l=o.call(i,r)),a&&a.call(i,r);const c=i.delete(r);return l&&Ot(i,"delete",r,void 0),c},clear(){const r=de(this),i=r.size!==0,o=r.clear();return i&&Ot(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=Fc(r,t,e)}),s}function Si(t,e){const s=Bc(t,e);return(n,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(ge(s,r)&&r in n?s:n,r,i)}const zc={get:Si(!1,!1)},Hc={get:Si(!1,!0)},qc={get:Si(!0,!1)};const Ba=new WeakMap,za=new WeakMap,Ha=new WeakMap,Vc=new WeakMap;function Wc(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kc(t){return t.__v_skip||!Object.isExtensible(t)?0:Wc(vc(t))}function ds(t){return Jt(t)?t:ki(t,!1,Dc,zc,Ba)}function qa(t){return ki(t,!1,Nc,Hc,za)}function Vn(t){return ki(t,!0,Uc,qc,Ha)}function ki(t,e,s,n,r){if(!ye(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Kc(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?n:s);return r.set(t,a),a}function Gt(t){return Jt(t)?Gt(t.__v_raw):!!(t&&t.__v_isReactive)}function Jt(t){return!!(t&&t.__v_isReadonly)}function st(t){return!!(t&&t.__v_isShallow)}function Ei(t){return t?!!t.__v_raw:!1}function de(t){const e=t&&t.__v_raw;return e?de(e):t}function Ti(t){return!ge(t,"__v_skip")&&Object.isExtensible(t)&&ka(t,"__v_skip",!0),t}const je=t=>ye(t)?ds(t):t,Wn=t=>ye(t)?Vn(t):t;function Pe(t){return t?t.__v_isRef===!0:!1}function le(t){return Va(t,!1)}function Gc(t){return Va(t,!0)}function Va(t,e){return Pe(t)?t:new Jc(t,e)}class Jc{constructor(e,s){this.dep=new wi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:de(e),this._value=s?e:je(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||st(e)||Jt(e);e=n?e:de(e),Kt(e,s)&&(this._rawValue=e,this._value=n?e:je(e),this.dep.trigger())}}function qe(t){return Pe(t)?t.value:t}const Yc={get:(t,e,s)=>e==="__v_raw"?t:qe(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const r=t[e];return Pe(r)&&!Pe(s)?(r.value=s,!0):Reflect.set(t,e,s,n)}};function Wa(t){return Gt(t)?t:new Proxy(t,Yc)}function Xc(t){const e=Z(t)?new Array(t.length):{};for(const s in t)e[s]=Zc(t,s);return e}class Qc{constructor(e,s,n){this._object=e,this._key=s,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Rc(de(this._object),this._key)}}function Zc(t,e,s){const n=t[e];return Pe(n)?n:new Qc(t,e,s)}class eu{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new wi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=un-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Se!==this)return $a(this,!0),!0}get value(){const e=this.dep.track();return Ma(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function tu(t,e,s=!1){let n,r;return ie(t)?n=t:(n=t.get,r=t.set),new eu(n,r,s)}const On={},Kn=new WeakMap;let rs;function su(t,e=!1,s=rs){if(s){let n=Kn.get(s);n||Kn.set(s,n=[]),n.push(t)}}function nu(t,e,s=_e){const{immediate:n,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=s,c=g=>r?g:st(g)||r===!1||r===0?Rt(g,1):Rt(g);let u,d,h,f,m=!1,S=!1;if(Pe(t)?(d=()=>t.value,m=st(t)):Gt(t)?(d=()=>c(t),m=!0):Z(t)?(S=!0,m=t.some(g=>Gt(g)||st(g)),d=()=>t.map(g=>{if(Pe(g))return g.value;if(Gt(g))return c(g);if(ie(g))return l?l(g,2):g()})):ie(t)?e?d=l?()=>l(t,2):t:d=()=>{if(h){It();try{h()}finally{jt()}}const g=rs;rs=u;try{return l?l(t,3,[f]):t(f)}finally{rs=g}}:d=bt,e&&r){const g=d,D=r===!0?1/0:r;d=()=>Rt(g(),D)}const E=Aa(),$=()=>{u.stop(),E&&E.active&&gi(E.effects,u)};if(i&&e){const g=e;e=(...D)=>{g(...D),$()}}let I=S?new Array(t.length).fill(On):On;const b=g=>{if(!(!(u.flags&1)||!u.dirty&&!g))if(e){const D=u.run();if(r||m||(S?D.some((V,J)=>Kt(V,I[J])):Kt(D,I))){h&&h();const V=rs;rs=u;try{const J=[D,I===On?void 0:S&&I[0]===On?[]:I,f];I=D,l?l(e,3,J):e(...J)}finally{rs=V}}}else u.run()};return a&&a(b),u=new Oa(d),u.scheduler=o?()=>o(b,!1):b,f=g=>su(g,!1,u),h=u.onStop=()=>{const g=Kn.get(u);if(g){if(l)l(g,4);else for(const D of g)D();Kn.delete(u)}},e?n?b(!0):I=u.run():o?o(b.bind(null,!0),!0):u.run(),$.pause=u.pause.bind(u),$.resume=u.resume.bind(u),$.stop=$,$}function Rt(t,e=1/0,s){if(e<=0||!ye(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,Pe(t))Rt(t.value,e,s);else if(Z(t))for(let n=0;n<t.length;n++)Rt(t[n],e,s);else if(Us(t)||$s(t))t.forEach(n=>{Rt(n,e,s)});else if(Sa(t)){for(const n in t)Rt(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Rt(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function En(t,e,s,n){try{return n?t(...n):t()}catch(r){lr(r,e,s)}}function ut(t,e,s,n){if(ie(t)){const r=En(t,e,s,n);return r&&ba(r)&&r.catch(i=>{lr(i,e,s)}),r}if(Z(t)){const r=[];for(let i=0;i<t.length;i++)r.push(ut(t[i],e,s,n));return r}}function lr(t,e,s,n=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||_e;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}a=a.parent}if(i){It(),En(i,null,10,[t,l,c]),jt();return}}ru(t,s,r,n,o)}function ru(t,e,s,n=!0,r=!1){if(r)throw t;console.error(t)}const Ve=[];let mt=-1;const Is=[];let Bt=null,Ts=0;const Ka=Promise.resolve();let Gn=null;function cr(t){const e=Gn||Ka;return t?e.then(this?t.bind(this):t):e}function iu(t){let e=mt+1,s=Ve.length;for(;e<s;){const n=e+s>>>1,r=Ve[n],i=hn(r);i<t||i===t&&r.flags&2?e=n+1:s=n}return e}function Pi(t){if(!(t.flags&1)){const e=hn(t),s=Ve[Ve.length-1];!s||!(t.flags&2)&&e>=hn(s)?Ve.push(t):Ve.splice(iu(e),0,t),t.flags|=1,Ga()}}function Ga(){Gn||(Gn=Ka.then(Ya))}function ou(t){Z(t)?Is.push(...t):Bt&&t.id===-1?Bt.splice(Ts+1,0,t):t.flags&1||(Is.push(t),t.flags|=1),Ga()}function Gi(t,e,s=mt+1){for(;s<Ve.length;s++){const n=Ve[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Ve.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Ja(t){if(Is.length){const e=[...new Set(Is)].sort((s,n)=>hn(s)-hn(n));if(Is.length=0,Bt){Bt.push(...e);return}for(Bt=e,Ts=0;Ts<Bt.length;Ts++){const s=Bt[Ts];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Bt=null,Ts=0}}const hn=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Ya(t){try{for(mt=0;mt<Ve.length;mt++){const e=Ve[mt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),En(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;mt<Ve.length;mt++){const e=Ve[mt];e&&(e.flags&=-2)}mt=-1,Ve.length=0,Ja(),Gn=null,(Ve.length||Is.length)&&Ya()}}let Qe=null,Xa=null;function Jn(t){const e=Qe;return Qe=t,Xa=t&&t.type.__scopeId||null,e}function Ct(t,e=Qe,s){if(!e||t._n)return t;const n=(...r)=>{n._d&&io(-1);const i=Jn(e);let o;try{o=t(...r)}finally{Jn(i),n._d&&io(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function We(t,e){if(Qe===null)return t;const s=pr(Qe),n=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=_e]=e[r];i&&(ie(i)&&(i={mounted:i,updated:i}),i.deep&&Rt(o),n.push({dir:i,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Qt(t,e,s,n){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[n];l&&(It(),ut(l,s,8,[t.el,a,t,e]),jt())}}const au=Symbol("_vte"),Qa=t=>t.__isTeleport,At=Symbol("_leaveCb"),Rn=Symbol("_enterCb");function lu(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Fs(()=>{t.isMounted=!0}),ol(()=>{t.isUnmounting=!0}),t}const tt=[Function,Array],Za={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:tt,onEnter:tt,onAfterEnter:tt,onEnterCancelled:tt,onBeforeLeave:tt,onLeave:tt,onAfterLeave:tt,onLeaveCancelled:tt,onBeforeAppear:tt,onAppear:tt,onAfterAppear:tt,onAppearCancelled:tt},el=t=>{const e=t.subTree;return e.component?el(e.component):e},cu={name:"BaseTransition",props:Za,setup(t,{slots:e}){const s=Ri(),n=lu();return()=>{const r=e.default&&nl(e.default(),!0);if(!r||!r.length)return;const i=tl(r),o=de(t),{mode:a}=o;if(n.isLeaving)return Er(i);const l=Ji(i);if(!l)return Er(i);let c=qr(l,o,n,s,d=>c=d);l.type!==Ke&&fn(l,c);let u=s.subTree&&Ji(s.subTree);if(u&&u.type!==Ke&&!os(l,u)&&el(s).type!==Ke){let d=qr(u,o,n,s);if(fn(u,d),a==="out-in"&&l.type!==Ke)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,s.job.flags&8||s.update(),delete d.afterLeave,u=void 0},Er(i);a==="in-out"&&l.type!==Ke?d.delayLeave=(h,f,m)=>{const S=sl(n,u);S[String(u.key)]=u,h[At]=()=>{f(),h[At]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function tl(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==Ke){e=s;break}}return e}const uu=cu;function sl(t,e){const{leavingVNodes:s}=t;let n=s.get(e.type);return n||(n=Object.create(null),s.set(e.type,n)),n}function qr(t,e,s,n,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:m,onLeaveCancelled:S,onBeforeAppear:E,onAppear:$,onAfterAppear:I,onAppearCancelled:b}=e,g=String(t.key),D=sl(s,t),V=(z,j)=>{z&&ut(z,n,9,j)},J=(z,j)=>{const M=j[1];V(z,j),Z(z)?z.every(C=>C.length<=1)&&M():z.length<=1&&M()},ee={mode:o,persisted:a,beforeEnter(z){let j=l;if(!s.isMounted)if(i)j=E||l;else return;z[At]&&z[At](!0);const M=D[g];M&&os(t,M)&&M.el[At]&&M.el[At](),V(j,[z])},enter(z){let j=c,M=u,C=d;if(!s.isMounted)if(i)j=$||c,M=I||u,C=b||d;else return;let te=!1;const he=z[Rn]=Te=>{te||(te=!0,Te?V(C,[z]):V(M,[z]),ee.delayedLeave&&ee.delayedLeave(),z[Rn]=void 0)};j?J(j,[z,he]):he()},leave(z,j){const M=String(t.key);if(z[Rn]&&z[Rn](!0),s.isUnmounting)return j();V(h,[z]);let C=!1;const te=z[At]=he=>{C||(C=!0,j(),he?V(S,[z]):V(m,[z]),z[At]=void 0,D[M]===t&&delete D[M])};D[M]=t,f?J(f,[z,te]):te()},clone(z){const j=qr(z,e,s,n,r);return r&&r(j),j}};return ee}function Er(t){if(ur(t))return t=Yt(t),t.children=null,t}function Ji(t){if(!ur(t))return Qa(t.type)&&t.children?tl(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&ie(s.default))return s.default()}}function fn(t,e){t.shapeFlag&6&&t.component?(t.transition=e,fn(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function nl(t,e=!1,s){let n=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=s==null?o.key:String(s)+String(o.key!=null?o.key:i);o.type===Ue?(o.patchFlag&128&&r++,n=n.concat(nl(o.children,e,a))):(e||o.type!==Ke)&&n.push(a!=null?Yt(o,{key:a}):o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Ns(t,e){return ie(t)?Re({name:t.name},e,{setup:t}):t}function rl(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Zs(t,e,s,n,r=!1){if(Z(t)){t.forEach((m,S)=>Zs(m,e&&(Z(e)?e[S]:e),s,n,r));return}if(en(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Zs(t,e,s,n.component.subTree);return}const i=n.shapeFlag&4?pr(n.component):n.el,o=r?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===_e?a.refs={}:a.refs,d=a.setupState,h=de(d),f=d===_e?ya:m=>ge(h,m);if(c!=null&&c!==l){if(xe(c))u[c]=null,f(c)&&(d[c]=null);else if(Pe(c)){c.value=null;const m=e;m.k&&(u[m.k]=null)}}if(ie(l))En(l,a,12,[o,u]);else{const m=xe(l),S=Pe(l);if(m||S){const E=()=>{if(t.f){const $=m?f(l)?d[l]:u[l]:l.value;if(r)Z($)&&gi($,i);else if(Z($))$.includes(i)||$.push(i);else if(m)u[l]=[i],f(l)&&(d[l]=u[l]);else{const I=[i];l.value=I,t.k&&(u[t.k]=I)}}else m?(u[l]=o,f(l)&&(d[l]=o)):S&&(l.value=o,t.k&&(u[t.k]=o))};o?(E.id=-1,Xe(E,s)):E()}}}or().requestIdleCallback;or().cancelIdleCallback;const en=t=>!!t.type.__asyncLoader,ur=t=>t.type.__isKeepAlive;function du(t,e){il(t,"a",e)}function hu(t,e){il(t,"da",e)}function il(t,e,s=Ne){const n=t.__wdc||(t.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(dr(e,n,s),s){let r=s.parent;for(;r&&r.parent;)ur(r.parent.vnode)&&fu(n,e,s,r),r=r.parent}}function fu(t,e,s,n){const r=dr(e,t,n,!0);Yn(()=>{gi(n[e],r)},s)}function dr(t,e,s=Ne,n=!1){if(s){const r=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{It();const a=Tn(s),l=ut(e,s,t,o);return a(),jt(),l});return n?r.unshift(i):r.push(i),i}}const Mt=t=>(e,s=Ne)=>{(!gn||t==="sp")&&dr(t,(...n)=>e(...n),s)},pu=Mt("bm"),Fs=Mt("m"),gu=Mt("bu"),mu=Mt("u"),ol=Mt("bum"),Yn=Mt("um"),vu=Mt("sp"),_u=Mt("rtg"),yu=Mt("rtc");function bu(t,e=Ne){dr("ec",t,e)}const wu="components";function xi(t,e){return ku(wu,t,!0,e)||t}const Su=Symbol.for("v-ndc");function ku(t,e,s=!0,n=!1){const r=Qe||Ne;if(r){const i=r.type;{const a=dd(i,!1);if(a&&(a===e||a===nt(e)||a===ir(nt(e))))return i}const o=Yi(r[t]||i[t],e)||Yi(r.appContext[t],e);return!o&&n?i:o}}function Yi(t,e){return t&&(t[e]||t[nt(e)]||t[ir(nt(e))])}function Un(t,e,s,n){let r;const i=s,o=Z(t);if(o||xe(t)){const a=o&&Gt(t);let l=!1,c=!1;a&&(l=!st(t),c=Jt(t),t=ar(t)),r=new Array(t.length);for(let u=0,d=t.length;u<d;u++)r[u]=e(l?c?Wn(je(t[u])):je(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(ye(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];r[l]=e(t[u],u,l,i)}}else r=[];return r}const Vr=t=>t?xl(t)?pr(t):Vr(t.parent):null,tn=Re(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Vr(t.parent),$root:t=>Vr(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ll(t),$forceUpdate:t=>t.f||(t.f=()=>{Pi(t.update)}),$nextTick:t=>t.n||(t.n=cr.bind(t.proxy)),$watch:t=>Vu.bind(t)}),Tr=(t,e)=>t!==_e&&!t.__isScriptSetup&&ge(t,e),Eu={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return n[e];case 2:return r[e];case 4:return s[e];case 3:return i[e]}else{if(Tr(n,e))return o[e]=1,n[e];if(r!==_e&&ge(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&ge(c,e))return o[e]=3,i[e];if(s!==_e&&ge(s,e))return o[e]=4,s[e];Wr&&(o[e]=0)}}const u=tn[e];let d,h;if(u)return e==="$attrs"&&De(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(s!==_e&&ge(s,e))return o[e]=4,s[e];if(h=l.config.globalProperties,ge(h,e))return h[e]},set({_:t},e,s){const{data:n,setupState:r,ctx:i}=t;return Tr(r,e)?(r[e]=s,!0):n!==_e&&ge(n,e)?(n[e]=s,!0):ge(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:r,propsOptions:i,type:o}},a){let l,c;return!!(s[a]||t!==_e&&a[0]!=="$"&&ge(t,a)||Tr(e,a)||(l=i[0])&&ge(l,a)||ge(n,a)||ge(tn,a)||ge(r.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:ge(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Xi(t){return Z(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let Wr=!0;function Tu(t){const e=ll(t),s=t.proxy,n=t.ctx;Wr=!1,e.beforeCreate&&Qi(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:m,activated:S,deactivated:E,beforeDestroy:$,beforeUnmount:I,destroyed:b,unmounted:g,render:D,renderTracked:V,renderTriggered:J,errorCaptured:ee,serverPrefetch:z,expose:j,inheritAttrs:M,components:C,directives:te,filters:he}=e;if(c&&Pu(c,n,null),o)for(const ne in o){const fe=o[ne];ie(fe)&&(n[ne]=fe.bind(s))}if(r){const ne=r.call(s,s);ye(ne)&&(t.data=ds(ne))}if(Wr=!0,i)for(const ne in i){const fe=i[ne],rt=ie(fe)?fe.bind(s,s):ie(fe.get)?fe.get.bind(s,s):bt,et=!ie(fe)&&ie(fe.set)?fe.set.bind(s):bt,$e=Me({get:rt,set:et});Object.defineProperty(n,ne,{enumerable:!0,configurable:!0,get:()=>$e.value,set:K=>$e.value=K})}if(a)for(const ne in a)al(a[ne],n,s,ne);if(l){const ne=ie(l)?l.call(s):l;Reflect.ownKeys(ne).forEach(fe=>{Nn(fe,ne[fe])})}u&&Qi(u,t,"c");function me(ne,fe){Z(fe)?fe.forEach(rt=>ne(rt.bind(s))):fe&&ne(fe.bind(s))}if(me(pu,d),me(Fs,h),me(gu,f),me(mu,m),me(du,S),me(hu,E),me(bu,ee),me(yu,V),me(_u,J),me(ol,I),me(Yn,g),me(vu,z),Z(j))if(j.length){const ne=t.exposed||(t.exposed={});j.forEach(fe=>{Object.defineProperty(ne,fe,{get:()=>s[fe],set:rt=>s[fe]=rt,enumerable:!0})})}else t.exposed||(t.exposed={});D&&t.render===bt&&(t.render=D),M!=null&&(t.inheritAttrs=M),C&&(t.components=C),te&&(t.directives=te),z&&rl(t)}function Pu(t,e,s=bt){Z(t)&&(t=Kr(t));for(const n in t){const r=t[n];let i;ye(r)?"default"in r?i=ct(r.from||n,r.default,!0):i=ct(r.from||n):i=ct(r),Pe(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function Qi(t,e,s){ut(Z(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function al(t,e,s,n){let r=n.includes(".")?wl(s,n):()=>s[n];if(xe(t)){const i=e[t];ie(i)&&yt(r,i)}else if(ie(t))yt(r,t.bind(s));else if(ye(t))if(Z(t))t.forEach(i=>al(i,e,s,n));else{const i=ie(t.handler)?t.handler.bind(s):e[t.handler];ie(i)&&yt(r,i,t)}}function ll(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!s&&!n?l=e:(l={},r.length&&r.forEach(c=>Xn(l,c,o,!0)),Xn(l,e,o)),ye(e)&&i.set(e,l),l}function Xn(t,e,s,n=!1){const{mixins:r,extends:i}=e;i&&Xn(t,i,s,!0),r&&r.forEach(o=>Xn(t,o,s,!0));for(const o in e)if(!(n&&o==="expose")){const a=xu[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const xu={data:Zi,props:eo,emits:eo,methods:Gs,computed:Gs,beforeCreate:ze,created:ze,beforeMount:ze,mounted:ze,beforeUpdate:ze,updated:ze,beforeDestroy:ze,beforeUnmount:ze,destroyed:ze,unmounted:ze,activated:ze,deactivated:ze,errorCaptured:ze,serverPrefetch:ze,components:Gs,directives:Gs,watch:Au,provide:Zi,inject:Cu};function Zi(t,e){return e?t?function(){return Re(ie(t)?t.call(this,this):t,ie(e)?e.call(this,this):e)}:e:t}function Cu(t,e){return Gs(Kr(t),Kr(e))}function Kr(t){if(Z(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function ze(t,e){return t?[...new Set([].concat(t,e))]:e}function Gs(t,e){return t?Re(Object.create(null),t,e):e}function eo(t,e){return t?Z(t)&&Z(e)?[...new Set([...t,...e])]:Re(Object.create(null),Xi(t),Xi(e??{})):e}function Au(t,e){if(!t)return e;if(!e)return t;const s=Re(Object.create(null),t);for(const n in e)s[n]=ze(t[n],e[n]);return s}function cl(){return{app:null,config:{isNativeTag:ya,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ou=0;function Ru(t,e){return function(n,r=null){ie(n)||(n=Re({},n)),r!=null&&!ye(r)&&(r=null);const i=cl(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:Ou++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:fd,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&ie(u.install)?(o.add(u),u.install(c,...d)):ie(u)&&(o.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,h){if(!l){const f=c._ceVNode||ke(n,r);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),t(f,u,h),l=!0,c._container=u,u.__vue_app__=c,pr(f.component)}},onUnmount(u){a.push(u)},unmount(){l&&(ut(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=cs;cs=c;try{return u()}finally{cs=d}}};return c}}let cs=null;function Nn(t,e){if(Ne){let s=Ne.provides;const n=Ne.parent&&Ne.parent.provides;n===s&&(s=Ne.provides=Object.create(n)),s[t]=e}}function ct(t,e,s=!1){const n=Ri();if(n||cs){let r=cs?cs._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return s&&ie(e)?e.call(n&&n.proxy):e}}function $u(){return!!(Ri()||cs)}const ul={},dl=()=>Object.create(ul),hl=t=>Object.getPrototypeOf(t)===ul;function Iu(t,e,s,n=!1){const r={},i=dl();t.propsDefaults=Object.create(null),fl(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);s?t.props=n?r:qa(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function ju(t,e,s,n){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=de(r),[l]=t.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(hr(t.emitsOptions,h))continue;const f=e[h];if(l)if(ge(i,h))f!==i[h]&&(i[h]=f,c=!0);else{const m=nt(h);r[m]=Gr(l,a,m,f,t,!1)}else f!==i[h]&&(i[h]=f,c=!0)}}}else{fl(t,e,r,i)&&(c=!0);let u;for(const d in a)(!e||!ge(e,d)&&((u=us(d))===d||!ge(e,u)))&&(l?s&&(s[d]!==void 0||s[u]!==void 0)&&(r[d]=Gr(l,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!ge(e,d))&&(delete i[d],c=!0)}c&&Ot(t.attrs,"set","")}function fl(t,e,s,n){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ys(l))continue;const c=e[l];let u;r&&ge(r,u=nt(l))?!i||!i.includes(u)?s[u]=c:(a||(a={}))[u]=c:hr(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(i){const l=de(s),c=a||_e;for(let u=0;u<i.length;u++){const d=i[u];s[d]=Gr(r,l,d,c[d],t,!ge(c,d))}}return o}function Gr(t,e,s,n,r,i){const o=t[s];if(o!=null){const a=ge(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ie(l)){const{propsDefaults:c}=r;if(s in c)n=c[s];else{const u=Tn(r);n=c[s]=l.call(null,e),u()}}else n=l;r.ce&&r.ce._setProp(s,n)}o[0]&&(i&&!a?n=!1:o[1]&&(n===""||n===us(s))&&(n=!0))}return n}const Mu=new WeakMap;function pl(t,e,s=!1){const n=s?Mu:e.propsCache,r=n.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!ie(t)){const u=d=>{l=!0;const[h,f]=pl(d,e,!0);Re(o,h),f&&a.push(...f)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return ye(t)&&n.set(t,Rs),Rs;if(Z(i))for(let u=0;u<i.length;u++){const d=nt(i[u]);to(d)&&(o[d]=_e)}else if(i)for(const u in i){const d=nt(u);if(to(d)){const h=i[u],f=o[d]=Z(h)||ie(h)?{type:h}:Re({},h),m=f.type;let S=!1,E=!0;if(Z(m))for(let $=0;$<m.length;++$){const I=m[$],b=ie(I)&&I.name;if(b==="Boolean"){S=!0;break}else b==="String"&&(E=!1)}else S=ie(m)&&m.name==="Boolean";f[0]=S,f[1]=E,(S||ge(f,"default"))&&a.push(d)}}const c=[o,a];return ye(t)&&n.set(t,c),c}function to(t){return t[0]!=="$"&&!Ys(t)}const Ci=t=>t==="_"||t==="_ctx"||t==="$stable",Ai=t=>Z(t)?t.map(_t):[_t(t)],Lu=(t,e,s)=>{if(e._n)return e;const n=Ct((...r)=>Ai(e(...r)),s);return n._c=!1,n},gl=(t,e,s)=>{const n=t._ctx;for(const r in t){if(Ci(r))continue;const i=t[r];if(ie(i))e[r]=Lu(r,i,n);else if(i!=null){const o=Ai(i);e[r]=()=>o}}},ml=(t,e)=>{const s=Ai(e);t.slots.default=()=>s},vl=(t,e,s)=>{for(const n in e)(s||!Ci(n))&&(t[n]=e[n])},Du=(t,e,s)=>{const n=t.slots=dl();if(t.vnode.shapeFlag&32){const r=e._;r?(vl(n,e,s),s&&ka(n,"_",r,!0)):gl(e,n)}else e&&ml(t,e)},Uu=(t,e,s)=>{const{vnode:n,slots:r}=t;let i=!0,o=_e;if(n.shapeFlag&32){const a=e._;a?s&&a===1?i=!1:vl(r,e,s):(i=!e.$stable,gl(e,r)),o=e}else e&&(ml(t,e),o={default:1});if(i)for(const a in r)!Ci(a)&&o[a]==null&&delete r[a]},Xe=Qu;function Nu(t){return Fu(t)}function Fu(t,e){const s=or();s.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=bt,insertStaticContent:m}=t,S=(p,v,w,P=null,A=null,x=null,W=void 0,H=null,B=!!v.dynamicChildren)=>{if(p===v)return;p&&!os(p,v)&&(P=y(p),K(p,A,x,!0),p=null),v.patchFlag===-2&&(B=!1,v.dynamicChildren=null);const{type:N,ref:Y,shapeFlag:G}=v;switch(N){case fr:E(p,v,w,P);break;case Ke:$(p,v,w,P);break;case Fn:p==null&&I(v,w,P,W);break;case Ue:C(p,v,w,P,A,x,W,H,B);break;default:G&1?D(p,v,w,P,A,x,W,H,B):G&6?te(p,v,w,P,A,x,W,H,B):(G&64||G&128)&&N.process(p,v,w,P,A,x,W,H,B,L)}Y!=null&&A?Zs(Y,p&&p.ref,x,v||p,!v):Y==null&&p&&p.ref!=null&&Zs(p.ref,null,x,p,!0)},E=(p,v,w,P)=>{if(p==null)n(v.el=a(v.children),w,P);else{const A=v.el=p.el;v.children!==p.children&&c(A,v.children)}},$=(p,v,w,P)=>{p==null?n(v.el=l(v.children||""),w,P):v.el=p.el},I=(p,v,w,P)=>{[p.el,p.anchor]=m(p.children,v,w,P,p.el,p.anchor)},b=({el:p,anchor:v},w,P)=>{let A;for(;p&&p!==v;)A=h(p),n(p,w,P),p=A;n(v,w,P)},g=({el:p,anchor:v})=>{let w;for(;p&&p!==v;)w=h(p),r(p),p=w;r(v)},D=(p,v,w,P,A,x,W,H,B)=>{v.type==="svg"?W="svg":v.type==="math"&&(W="mathml"),p==null?V(v,w,P,A,x,W,H,B):z(p,v,A,x,W,H,B)},V=(p,v,w,P,A,x,W,H)=>{let B,N;const{props:Y,shapeFlag:G,transition:X,dirs:se}=p;if(B=p.el=o(p.type,x,Y&&Y.is,Y),G&8?u(B,p.children):G&16&&ee(p.children,B,null,P,A,Pr(p,x),W,H),se&&Qt(p,null,P,"created"),J(B,p,p.scopeId,W,P),Y){for(const be in Y)be!=="value"&&!Ys(be)&&i(B,be,null,Y[be],x,P);"value"in Y&&i(B,"value",null,Y.value,x),(N=Y.onVnodeBeforeMount)&&gt(N,P,p)}se&&Qt(p,null,P,"beforeMount");const ue=Bu(A,X);ue&&X.beforeEnter(B),n(B,v,w),((N=Y&&Y.onVnodeMounted)||ue||se)&&Xe(()=>{N&&gt(N,P,p),ue&&X.enter(B),se&&Qt(p,null,P,"mounted")},A)},J=(p,v,w,P,A)=>{if(w&&f(p,w),P)for(let x=0;x<P.length;x++)f(p,P[x]);if(A){let x=A.subTree;if(v===x||kl(x.type)&&(x.ssContent===v||x.ssFallback===v)){const W=A.vnode;J(p,W,W.scopeId,W.slotScopeIds,A.parent)}}},ee=(p,v,w,P,A,x,W,H,B=0)=>{for(let N=B;N<p.length;N++){const Y=p[N]=H?zt(p[N]):_t(p[N]);S(null,Y,v,w,P,A,x,W,H)}},z=(p,v,w,P,A,x,W)=>{const H=v.el=p.el;let{patchFlag:B,dynamicChildren:N,dirs:Y}=v;B|=p.patchFlag&16;const G=p.props||_e,X=v.props||_e;let se;if(w&&Zt(w,!1),(se=X.onVnodeBeforeUpdate)&&gt(se,w,v,p),Y&&Qt(v,p,w,"beforeUpdate"),w&&Zt(w,!0),(G.innerHTML&&X.innerHTML==null||G.textContent&&X.textContent==null)&&u(H,""),N?j(p.dynamicChildren,N,H,w,P,Pr(v,A),x):W||fe(p,v,H,null,w,P,Pr(v,A),x,!1),B>0){if(B&16)M(H,G,X,w,A);else if(B&2&&G.class!==X.class&&i(H,"class",null,X.class,A),B&4&&i(H,"style",G.style,X.style,A),B&8){const ue=v.dynamicProps;for(let be=0;be<ue.length;be++){const ve=ue[be],Ge=G[ve],Je=X[ve];(Je!==Ge||ve==="value")&&i(H,ve,Ge,Je,A,w)}}B&1&&p.children!==v.children&&u(H,v.children)}else!W&&N==null&&M(H,G,X,w,A);((se=X.onVnodeUpdated)||Y)&&Xe(()=>{se&&gt(se,w,v,p),Y&&Qt(v,p,w,"updated")},P)},j=(p,v,w,P,A,x,W)=>{for(let H=0;H<v.length;H++){const B=p[H],N=v[H],Y=B.el&&(B.type===Ue||!os(B,N)||B.shapeFlag&198)?d(B.el):w;S(B,N,Y,null,P,A,x,W,!0)}},M=(p,v,w,P,A)=>{if(v!==w){if(v!==_e)for(const x in v)!Ys(x)&&!(x in w)&&i(p,x,v[x],null,A,P);for(const x in w){if(Ys(x))continue;const W=w[x],H=v[x];W!==H&&x!=="value"&&i(p,x,H,W,A,P)}"value"in w&&i(p,"value",v.value,w.value,A)}},C=(p,v,w,P,A,x,W,H,B)=>{const N=v.el=p?p.el:a(""),Y=v.anchor=p?p.anchor:a("");let{patchFlag:G,dynamicChildren:X,slotScopeIds:se}=v;se&&(H=H?H.concat(se):se),p==null?(n(N,w,P),n(Y,w,P),ee(v.children||[],w,Y,A,x,W,H,B)):G>0&&G&64&&X&&p.dynamicChildren?(j(p.dynamicChildren,X,w,A,x,W,H),(v.key!=null||A&&v===A.subTree)&&_l(p,v,!0)):fe(p,v,w,Y,A,x,W,H,B)},te=(p,v,w,P,A,x,W,H,B)=>{v.slotScopeIds=H,p==null?v.shapeFlag&512?A.ctx.activate(v,w,P,W,B):he(v,w,P,A,x,W,B):Te(p,v,B)},he=(p,v,w,P,A,x,W)=>{const H=p.component=od(p,P,A);if(ur(p)&&(H.ctx.renderer=L),ad(H,!1,W),H.asyncDep){if(A&&A.registerDep(H,me,W),!p.el){const B=H.subTree=ke(Ke);$(null,B,v,w),p.placeholder=B.el}}else me(H,p,v,w,A,x,W)},Te=(p,v,w)=>{const P=v.component=p.component;if(Yu(p,v,w))if(P.asyncDep&&!P.asyncResolved){ne(P,v,w);return}else P.next=v,P.update();else v.el=p.el,P.vnode=v},me=(p,v,w,P,A,x,W)=>{const H=()=>{if(p.isMounted){let{next:G,bu:X,u:se,parent:ue,vnode:be}=p;{const ft=yl(p);if(ft){G&&(G.el=be.el,ne(p,G,W)),ft.asyncDep.then(()=>{p.isUnmounted||H()});return}}let ve=G,Ge;Zt(p,!1),G?(G.el=be.el,ne(p,G,W)):G=be,X&&Dn(X),(Ge=G.props&&G.props.onVnodeBeforeUpdate)&&gt(Ge,ue,G,be),Zt(p,!0);const Je=no(p),ht=p.subTree;p.subTree=Je,S(ht,Je,d(ht.el),y(ht),p,A,x),G.el=Je.el,ve===null&&Xu(p,Je.el),se&&Xe(se,A),(Ge=G.props&&G.props.onVnodeUpdated)&&Xe(()=>gt(Ge,ue,G,be),A)}else{let G;const{el:X,props:se}=v,{bm:ue,m:be,parent:ve,root:Ge,type:Je}=p,ht=en(v);Zt(p,!1),ue&&Dn(ue),!ht&&(G=se&&se.onVnodeBeforeMount)&&gt(G,ve,v),Zt(p,!0);{Ge.ce&&Ge.ce._def.shadowRoot!==!1&&Ge.ce._injectChildStyle(Je);const ft=p.subTree=no(p);S(null,ft,w,P,p,A,x),v.el=ft.el}if(be&&Xe(be,A),!ht&&(G=se&&se.onVnodeMounted)){const ft=v;Xe(()=>gt(G,ve,ft),A)}(v.shapeFlag&256||ve&&en(ve.vnode)&&ve.vnode.shapeFlag&256)&&p.a&&Xe(p.a,A),p.isMounted=!0,v=w=P=null}};p.scope.on();const B=p.effect=new Oa(H);p.scope.off();const N=p.update=B.run.bind(B),Y=p.job=B.runIfDirty.bind(B);Y.i=p,Y.id=p.uid,B.scheduler=()=>Pi(Y),Zt(p,!0),N()},ne=(p,v,w)=>{v.component=p;const P=p.vnode.props;p.vnode=v,p.next=null,ju(p,v.props,P,w),Uu(p,v.children,w),It(),Gi(p),jt()},fe=(p,v,w,P,A,x,W,H,B=!1)=>{const N=p&&p.children,Y=p?p.shapeFlag:0,G=v.children,{patchFlag:X,shapeFlag:se}=v;if(X>0){if(X&128){et(N,G,w,P,A,x,W,H,B);return}else if(X&256){rt(N,G,w,P,A,x,W,H,B);return}}se&8?(Y&16&&F(N,A,x),G!==N&&u(w,G)):Y&16?se&16?et(N,G,w,P,A,x,W,H,B):F(N,A,x,!0):(Y&8&&u(w,""),se&16&&ee(G,w,P,A,x,W,H,B))},rt=(p,v,w,P,A,x,W,H,B)=>{p=p||Rs,v=v||Rs;const N=p.length,Y=v.length,G=Math.min(N,Y);let X;for(X=0;X<G;X++){const se=v[X]=B?zt(v[X]):_t(v[X]);S(p[X],se,w,null,A,x,W,H,B)}N>Y?F(p,A,x,!0,!1,G):ee(v,w,P,A,x,W,H,B,G)},et=(p,v,w,P,A,x,W,H,B)=>{let N=0;const Y=v.length;let G=p.length-1,X=Y-1;for(;N<=G&&N<=X;){const se=p[N],ue=v[N]=B?zt(v[N]):_t(v[N]);if(os(se,ue))S(se,ue,w,null,A,x,W,H,B);else break;N++}for(;N<=G&&N<=X;){const se=p[G],ue=v[X]=B?zt(v[X]):_t(v[X]);if(os(se,ue))S(se,ue,w,null,A,x,W,H,B);else break;G--,X--}if(N>G){if(N<=X){const se=X+1,ue=se<Y?v[se].el:P;for(;N<=X;)S(null,v[N]=B?zt(v[N]):_t(v[N]),w,ue,A,x,W,H,B),N++}}else if(N>X)for(;N<=G;)K(p[N],A,x,!0),N++;else{const se=N,ue=N,be=new Map;for(N=ue;N<=X;N++){const Ye=v[N]=B?zt(v[N]):_t(v[N]);Ye.key!=null&&be.set(Ye.key,N)}let ve,Ge=0;const Je=X-ue+1;let ht=!1,ft=0;const Hs=new Array(Je);for(N=0;N<Je;N++)Hs[N]=0;for(N=se;N<=G;N++){const Ye=p[N];if(Ge>=Je){K(Ye,A,x,!0);continue}let pt;if(Ye.key!=null)pt=be.get(Ye.key);else for(ve=ue;ve<=X;ve++)if(Hs[ve-ue]===0&&os(Ye,v[ve])){pt=ve;break}pt===void 0?K(Ye,A,x,!0):(Hs[pt-ue]=N+1,pt>=ft?ft=pt:ht=!0,S(Ye,v[pt],w,null,A,x,W,H,B),Ge++)}const Bi=ht?zu(Hs):Rs;for(ve=Bi.length-1,N=Je-1;N>=0;N--){const Ye=ue+N,pt=v[Ye],zi=v[Ye+1],Hi=Ye+1<Y?zi.el||zi.placeholder:P;Hs[N]===0?S(null,pt,w,Hi,A,x,W,H,B):ht&&(ve<0||N!==Bi[ve]?$e(pt,w,Hi,2):ve--)}}},$e=(p,v,w,P,A=null)=>{const{el:x,type:W,transition:H,children:B,shapeFlag:N}=p;if(N&6){$e(p.component.subTree,v,w,P);return}if(N&128){p.suspense.move(v,w,P);return}if(N&64){W.move(p,v,w,L);return}if(W===Ue){n(x,v,w);for(let G=0;G<B.length;G++)$e(B[G],v,w,P);n(p.anchor,v,w);return}if(W===Fn){b(p,v,w);return}if(P!==2&&N&1&&H)if(P===0)H.beforeEnter(x),n(x,v,w),Xe(()=>H.enter(x),A);else{const{leave:G,delayLeave:X,afterLeave:se}=H,ue=()=>{p.ctx.isUnmounted?r(x):n(x,v,w)},be=()=>{x._isLeaving&&x[At](!0),G(x,()=>{ue(),se&&se()})};X?X(x,ue,be):be()}else n(x,v,w)},K=(p,v,w,P=!1,A=!1)=>{const{type:x,props:W,ref:H,children:B,dynamicChildren:N,shapeFlag:Y,patchFlag:G,dirs:X,cacheIndex:se}=p;if(G===-2&&(A=!1),H!=null&&(It(),Zs(H,null,w,p,!0),jt()),se!=null&&(v.renderCache[se]=void 0),Y&256){v.ctx.deactivate(p);return}const ue=Y&1&&X,be=!en(p);let ve;if(be&&(ve=W&&W.onVnodeBeforeUnmount)&&gt(ve,v,p),Y&6)R(p.component,w,P);else{if(Y&128){p.suspense.unmount(w,P);return}ue&&Qt(p,null,v,"beforeUnmount"),Y&64?p.type.remove(p,v,w,L,P):N&&!N.hasOnce&&(x!==Ue||G>0&&G&64)?F(N,v,w,!1,!0):(x===Ue&&G&384||!A&&Y&16)&&F(B,v,w),P&&k(p)}(be&&(ve=W&&W.onVnodeUnmounted)||ue)&&Xe(()=>{ve&&gt(ve,v,p),ue&&Qt(p,null,v,"unmounted")},w)},k=p=>{const{type:v,el:w,anchor:P,transition:A}=p;if(v===Ue){U(w,P);return}if(v===Fn){g(p);return}const x=()=>{r(w),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(p.shapeFlag&1&&A&&!A.persisted){const{leave:W,delayLeave:H}=A,B=()=>W(w,x);H?H(p.el,x,B):B()}else x()},U=(p,v)=>{let w;for(;p!==v;)w=h(p),r(p),p=w;r(v)},R=(p,v,w)=>{const{bum:P,scope:A,job:x,subTree:W,um:H,m:B,a:N}=p;so(B),so(N),P&&Dn(P),A.stop(),x&&(x.flags|=8,K(W,p,v,w)),H&&Xe(H,v),Xe(()=>{p.isUnmounted=!0},v)},F=(p,v,w,P=!1,A=!1,x=0)=>{for(let W=x;W<p.length;W++)K(p[W],v,w,P,A)},y=p=>{if(p.shapeFlag&6)return y(p.component.subTree);if(p.shapeFlag&128)return p.suspense.next();const v=h(p.anchor||p.el),w=v&&v[au];return w?h(w):v};let T=!1;const O=(p,v,w)=>{p==null?v._vnode&&K(v._vnode,null,null,!0):S(v._vnode||null,p,v,null,null,null,w),v._vnode=p,T||(T=!0,Gi(),Ja(),T=!1)},L={p:S,um:K,m:$e,r:k,mt:he,mc:ee,pc:fe,pbc:j,n:y,o:t};return{render:O,hydrate:void 0,createApp:Ru(O)}}function Pr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Zt({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Bu(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function _l(t,e,s=!1){const n=t.children,r=e.children;if(Z(n)&&Z(r))for(let i=0;i<n.length;i++){const o=n[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=zt(r[i]),a.el=o.el),!s&&a.patchFlag!==-2&&_l(o,a)),a.type===fr&&a.patchFlag!==-1&&(a.el=o.el),a.type===Ke&&!a.el&&(a.el=o.el)}}function zu(t){const e=t.slice(),s=[0];let n,r,i,o,a;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(r=s[s.length-1],t[r]<c){e[n]=r,s.push(n);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,t[s[a]]<c?i=a+1:o=a;c<t[s[i]]&&(i>0&&(e[n]=s[i-1]),s[i]=n)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function yl(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:yl(e)}function so(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Hu=Symbol.for("v-scx"),qu=()=>ct(Hu);function yt(t,e,s){return bl(t,e,s)}function bl(t,e,s=_e){const{immediate:n,deep:r,flush:i,once:o}=s,a=Re({},s),l=e&&n||!e&&i!=="post";let c;if(gn){if(i==="sync"){const f=qu();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=bt,f.resume=bt,f.pause=bt,f}}const u=Ne;a.call=(f,m,S)=>ut(f,u,m,S);let d=!1;i==="post"?a.scheduler=f=>{Xe(f,u&&u.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(f,m)=>{m?f():Pi(f)}),a.augmentJob=f=>{e&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const h=nu(t,e,a);return gn&&(c?c.push(h):l&&h()),h}function Vu(t,e,s){const n=this.proxy,r=xe(t)?t.includes(".")?wl(n,t):()=>n[t]:t.bind(n,n);let i;ie(e)?i=e:(i=e.handler,s=e);const o=Tn(this),a=bl(r,i.bind(n),s);return o(),a}function wl(t,e){const s=e.split(".");return()=>{let n=t;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const Wu=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${nt(e)}Modifiers`]||t[`${us(e)}Modifiers`];function Ku(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||_e;let r=s;const i=e.startsWith("update:"),o=i&&Wu(n,e.slice(7));o&&(o.trim&&(r=s.map(u=>xe(u)?u.trim():u)),o.number&&(r=s.map(Hn)));let a,l=n[a=yr(e)]||n[a=yr(nt(e))];!l&&i&&(l=n[a=yr(us(e))]),l&&ut(l,t,6,r);const c=n[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ut(c,t,6,r)}}function Sl(t,e,s=!1){const n=e.emitsCache,r=n.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!ie(t)){const l=c=>{const u=Sl(c,e,!0);u&&(a=!0,Re(o,u))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(ye(t)&&n.set(t,null),null):(Z(i)?i.forEach(l=>o[l]=null):Re(o,i),ye(t)&&n.set(t,o),o)}function hr(t,e){return!t||!nr(e)?!1:(e=e.slice(2).replace(/Once$/,""),ge(t,e[0].toLowerCase()+e.slice(1))||ge(t,us(e))||ge(t,e))}function no(t){const{type:e,vnode:s,proxy:n,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:h,setupState:f,ctx:m,inheritAttrs:S}=t,E=Jn(t);let $,I;try{if(s.shapeFlag&4){const g=r||n,D=g;$=_t(c.call(D,g,u,d,f,h,m)),I=a}else{const g=e;$=_t(g.length>1?g(d,{attrs:a,slots:o,emit:l}):g(d,null)),I=e.props?a:Gu(a)}}catch(g){sn.length=0,lr(g,t,1),$=ke(Ke)}let b=$;if(I&&S!==!1){const g=Object.keys(I),{shapeFlag:D}=b;g.length&&D&7&&(i&&g.some(pi)&&(I=Ju(I,i)),b=Yt(b,I,!1,!0))}return s.dirs&&(b=Yt(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(s.dirs):s.dirs),s.transition&&fn(b,s.transition),$=b,Jn(E),$}const Gu=t=>{let e;for(const s in t)(s==="class"||s==="style"||nr(s))&&((e||(e={}))[s]=t[s]);return e},Ju=(t,e)=>{const s={};for(const n in t)(!pi(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function Yu(t,e,s){const{props:n,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?ro(n,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==n[h]&&!hr(c,h))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?ro(n,o,c):!0:!!o;return!1}function ro(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==t[i]&&!hr(s,i))return!0}return!1}function Xu({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const kl=t=>t.__isSuspense;function Qu(t,e){e&&e.pendingBranch?Z(t)?e.effects.push(...t):e.effects.push(t):ou(t)}const Ue=Symbol.for("v-fgt"),fr=Symbol.for("v-txt"),Ke=Symbol.for("v-cmt"),Fn=Symbol.for("v-stc"),sn=[];let Ze=null;function re(t=!1){sn.push(Ze=t?null:[])}function Zu(){sn.pop(),Ze=sn[sn.length-1]||null}let pn=1;function io(t,e=!1){pn+=t,t<0&&Ze&&e&&(Ze.hasOnce=!0)}function El(t){return t.dynamicChildren=pn>0?Ze||Rs:null,Zu(),pn>0&&Ze&&Ze.push(t),t}function oe(t,e,s,n,r,i){return El(_(t,e,s,n,r,i,!0))}function ed(t,e,s,n,r){return El(ke(t,e,s,n,r,!0))}function Qn(t){return t?t.__v_isVNode===!0:!1}function os(t,e){return t.type===e.type&&t.key===e.key}const Tl=({key:t})=>t??null,Bn=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?xe(t)||Pe(t)||ie(t)?{i:Qe,r:t,k:e,f:!!s}:t:null);function _(t,e=null,s=null,n=0,r=null,i=t===Ue?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Tl(e),ref:e&&Bn(e),scopeId:Xa,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Qe};return a?(Oi(l,s),i&128&&t.normalize(l)):s&&(l.shapeFlag|=xe(s)?8:16),pn>0&&!o&&Ze&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ze.push(l),l}const ke=td;function td(t,e=null,s=null,n=0,r=null,i=!1){if((!t||t===Su)&&(t=Ke),Qn(t)){const a=Yt(t,e,!0);return s&&Oi(a,s),pn>0&&!i&&Ze&&(a.shapeFlag&6?Ze[Ze.indexOf(t)]=a:Ze.push(a)),a.patchFlag=-2,a}if(hd(t)&&(t=t.__vccOpts),e){e=sd(e);let{class:a,style:l}=e;a&&!xe(a)&&(e.class=Fe(a)),ye(l)&&(Ei(l)&&!Z(l)&&(l=Re({},l)),e.style=Sn(l))}const o=xe(t)?1:kl(t)?128:Qa(t)?64:ye(t)?4:ie(t)?2:0;return _(t,e,s,n,r,o,i,!0)}function sd(t){return t?Ei(t)||hl(t)?Re({},t):t:null}function Yt(t,e,s=!1,n=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?nd(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Tl(c),ref:e&&e.ref?s&&i?Z(i)?i.concat(Bn(e)):[i,Bn(e)]:Bn(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ue?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Yt(t.ssContent),ssFallback:t.ssFallback&&Yt(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&fn(u,l.clone(u)),u}function Ie(t=" ",e=0){return ke(fr,null,t,e)}function Pl(t,e){const s=ke(Fn,null,t);return s.staticCount=e,s}function Ee(t="",e=!1){return e?(re(),ed(Ke,null,t)):ke(Ke,null,t)}function _t(t){return t==null||typeof t=="boolean"?ke(Ke):Z(t)?ke(Ue,null,t.slice()):Qn(t)?zt(t):ke(fr,null,String(t))}function zt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Yt(t)}function Oi(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(Z(e))s=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Oi(t,r()),r._c&&(r._d=!0));return}else{s=32;const r=e._;!r&&!hl(e)?e._ctx=Qe:r===3&&Qe&&(Qe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ie(e)?(e={default:e,_ctx:Qe},s=32):(e=String(e),n&64?(s=16,e=[Ie(e)]):s=8);t.children=e,t.shapeFlag|=s}function nd(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=Fe([e.class,n.class]));else if(r==="style")e.style=Sn([e.style,n.style]);else if(nr(r)){const i=e[r],o=n[r];o&&i!==o&&!(Z(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=n[r])}return e}function gt(t,e,s,n=null){ut(t,e,7,[s,n])}const rd=cl();let id=0;function od(t,e,s){const n=t.type,r=(e?e.appContext:t.appContext)||rd,i={uid:id++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new xa(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pl(n,r),emitsOptions:Sl(n,r),emit:null,emitted:null,propsDefaults:_e,inheritAttrs:n.inheritAttrs,ctx:_e,data:_e,props:_e,attrs:_e,slots:_e,refs:_e,setupState:_e,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Ku.bind(null,i),t.ce&&t.ce(i),i}let Ne=null;const Ri=()=>Ne||Qe;let Zn,Jr;{const t=or(),e=(s,n)=>{let r;return(r=t[s])||(r=t[s]=[]),r.push(n),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Zn=e("__VUE_INSTANCE_SETTERS__",s=>Ne=s),Jr=e("__VUE_SSR_SETTERS__",s=>gn=s)}const Tn=t=>{const e=Ne;return Zn(t),t.scope.on(),()=>{t.scope.off(),Zn(e)}},oo=()=>{Ne&&Ne.scope.off(),Zn(null)};function xl(t){return t.vnode.shapeFlag&4}let gn=!1;function ad(t,e=!1,s=!1){e&&Jr(e);const{props:n,children:r}=t.vnode,i=xl(t);Iu(t,n,i,e),Du(t,r,s||e);const o=i?ld(t,e):void 0;return e&&Jr(!1),o}function ld(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Eu);const{setup:n}=s;if(n){It();const r=t.setupContext=n.length>1?ud(t):null,i=Tn(t),o=En(n,t,0,[t.props,r]),a=ba(o);if(jt(),i(),(a||t.sp)&&!en(t)&&rl(t),a){if(o.then(oo,oo),e)return o.then(l=>{ao(t,l)}).catch(l=>{lr(l,t,0)});t.asyncDep=o}else ao(t,o)}else Cl(t)}function ao(t,e,s){ie(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ye(e)&&(t.setupState=Wa(e)),Cl(t)}function Cl(t,e,s){const n=t.type;t.render||(t.render=n.render||bt);{const r=Tn(t);It();try{Tu(t)}finally{jt(),r()}}}const cd={get(t,e){return De(t,"get",""),t[e]}};function ud(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,cd),slots:t.slots,emit:t.emit,expose:e}}function pr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Wa(Ti(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in tn)return tn[s](t)},has(e,s){return s in e||s in tn}})):t.proxy}function dd(t,e=!0){return ie(t)?t.displayName||t.name:t.name||e&&t.__name}function hd(t){return ie(t)&&"__vccOpts"in t}const Me=(t,e)=>tu(t,e,gn);function $i(t,e,s){const n=arguments.length;return n===2?ye(e)&&!Z(e)?Qn(e)?ke(t,null,[e]):ke(t,e):ke(t,null,e):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Qn(s)&&(s=[s]),ke(t,e,s))}const fd="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Yr;const lo=typeof window<"u"&&window.trustedTypes;if(lo)try{Yr=lo.createPolicy("vue",{createHTML:t=>t})}catch{}const Al=Yr?t=>Yr.createHTML(t):t=>t,pd="http://www.w3.org/2000/svg",gd="http://www.w3.org/1998/Math/MathML",Pt=typeof document<"u"?document:null,co=Pt&&Pt.createElement("template"),md={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const r=e==="svg"?Pt.createElementNS(pd,t):e==="mathml"?Pt.createElementNS(gd,t):s?Pt.createElement(t,{is:s}):Pt.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>Pt.createTextNode(t),createComment:t=>Pt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Pt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,r,i){const o=s?s.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),s),!(r===i||!(r=r.nextSibling)););else{co.innerHTML=Al(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=co.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Lt="transition",Vs="animation",mn=Symbol("_vtc"),Ol={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},vd=Re({},Za,Ol),_d=t=>(t.displayName="Transition",t.props=vd,t),Mv=_d((t,{slots:e})=>$i(uu,yd(t),e)),es=(t,e=[])=>{Z(t)?t.forEach(s=>s(...e)):t&&t(...e)},uo=t=>t?Z(t)?t.some(e=>e.length>1):t.length>1:!1;function yd(t){const e={};for(const C in t)C in Ol||(e[C]=t[C]);if(t.css===!1)return e;const{name:s="v",type:n,duration:r,enterFromClass:i=`${s}-enter-from`,enterActiveClass:o=`${s}-enter-active`,enterToClass:a=`${s}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${s}-leave-from`,leaveActiveClass:h=`${s}-leave-active`,leaveToClass:f=`${s}-leave-to`}=t,m=bd(r),S=m&&m[0],E=m&&m[1],{onBeforeEnter:$,onEnter:I,onEnterCancelled:b,onLeave:g,onLeaveCancelled:D,onBeforeAppear:V=$,onAppear:J=I,onAppearCancelled:ee=b}=e,z=(C,te,he,Te)=>{C._enterCancelled=Te,ts(C,te?u:a),ts(C,te?c:o),he&&he()},j=(C,te)=>{C._isLeaving=!1,ts(C,d),ts(C,f),ts(C,h),te&&te()},M=C=>(te,he)=>{const Te=C?J:I,me=()=>z(te,C,he);es(Te,[te,me]),ho(()=>{ts(te,C?l:i),kt(te,C?u:a),uo(Te)||fo(te,n,S,me)})};return Re(e,{onBeforeEnter(C){es($,[C]),kt(C,i),kt(C,o)},onBeforeAppear(C){es(V,[C]),kt(C,l),kt(C,c)},onEnter:M(!1),onAppear:M(!0),onLeave(C,te){C._isLeaving=!0;const he=()=>j(C,te);kt(C,d),C._enterCancelled?(kt(C,h),mo()):(mo(),kt(C,h)),ho(()=>{C._isLeaving&&(ts(C,d),kt(C,f),uo(g)||fo(C,n,E,he))}),es(g,[C,he])},onEnterCancelled(C){z(C,!1,void 0,!0),es(b,[C])},onAppearCancelled(C){z(C,!0,void 0,!0),es(ee,[C])},onLeaveCancelled(C){j(C),es(D,[C])}})}function bd(t){if(t==null)return null;if(ye(t))return[xr(t.enter),xr(t.leave)];{const e=xr(t);return[e,e]}}function xr(t){return bc(t)}function kt(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[mn]||(t[mn]=new Set)).add(e)}function ts(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const s=t[mn];s&&(s.delete(e),s.size||(t[mn]=void 0))}function ho(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let wd=0;function fo(t,e,s,n){const r=t._endId=++wd,i=()=>{r===t._endId&&n()};if(s!=null)return setTimeout(i,s);const{type:o,timeout:a,propCount:l}=Sd(t,e);if(!o)return n();const c=o+"end";let u=0;const d=()=>{t.removeEventListener(c,h),i()},h=f=>{f.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,h)}function Sd(t,e){const s=window.getComputedStyle(t),n=m=>(s[m]||"").split(", "),r=n(`${Lt}Delay`),i=n(`${Lt}Duration`),o=po(r,i),a=n(`${Vs}Delay`),l=n(`${Vs}Duration`),c=po(a,l);let u=null,d=0,h=0;e===Lt?o>0&&(u=Lt,d=o,h=i.length):e===Vs?c>0&&(u=Vs,d=c,h=l.length):(d=Math.max(o,c),u=d>0?o>c?Lt:Vs:null,h=u?u===Lt?i.length:l.length:0);const f=u===Lt&&/\b(transform|all)(,|$)/.test(n(`${Lt}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function po(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,n)=>go(s)+go(t[n])))}function go(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function mo(){return document.body.offsetHeight}function kd(t,e,s){const n=t[mn];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const er=Symbol("_vod"),Rl=Symbol("_vsh"),Ed={name:"show",beforeMount(t,{value:e},{transition:s}){t[er]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):Ws(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:n}){!e!=!s&&(n?e?(n.beforeEnter(t),Ws(t,!0),n.enter(t)):n.leave(t,()=>{Ws(t,!1)}):Ws(t,e))},beforeUnmount(t,{value:e}){Ws(t,e)}};function Ws(t,e){t.style.display=e?t[er]:"none",t[Rl]=!e}const Td=Symbol(""),Pd=/(^|;)\s*display\s*:/;function xd(t,e,s){const n=t.style,r=xe(s);let i=!1;if(s&&!r){if(e)if(xe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&zn(n,a,"")}else for(const o in e)s[o]==null&&zn(n,o,"");for(const o in s)o==="display"&&(i=!0),zn(n,o,s[o])}else if(r){if(e!==s){const o=n[Td];o&&(s+=";"+o),n.cssText=s,i=Pd.test(s)}}else e&&t.removeAttribute("style");er in t&&(t[er]=i?n.display:"",t[Rl]&&(n.display="none"))}const vo=/\s*!important$/;function zn(t,e,s){if(Z(s))s.forEach(n=>zn(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=Cd(t,e);vo.test(s)?t.setProperty(us(n),s.replace(vo,""),"important"):t[n]=s}}const _o=["Webkit","Moz","ms"],Cr={};function Cd(t,e){const s=Cr[e];if(s)return s;let n=nt(e);if(n!=="filter"&&n in t)return Cr[e]=n;n=ir(n);for(let r=0;r<_o.length;r++){const i=_o[r]+n;if(i in t)return Cr[e]=i}return e}const yo="http://www.w3.org/1999/xlink";function bo(t,e,s,n,r,i=Pc(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(yo,e.slice(6,e.length)):t.setAttributeNS(yo,e,s):s==null||i&&!Ea(s)?t.removeAttribute(e):t.setAttribute(e,i?"":wt(s)?String(s):s)}function wo(t,e,s,n,r){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Al(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=Ea(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(r||e)}function qt(t,e,s,n){t.addEventListener(e,s,n)}function Ad(t,e,s,n){t.removeEventListener(e,s,n)}const So=Symbol("_vei");function Od(t,e,s,n,r=null){const i=t[So]||(t[So]={}),o=i[e];if(n&&o)o.value=n;else{const[a,l]=Rd(e);if(n){const c=i[e]=jd(n,r);qt(t,a,c,l)}else o&&(Ad(t,a,o,l),i[e]=void 0)}}const ko=/(?:Once|Passive|Capture)$/;function Rd(t){let e;if(ko.test(t)){e={};let n;for(;n=t.match(ko);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):us(t.slice(2)),e]}let Ar=0;const $d=Promise.resolve(),Id=()=>Ar||($d.then(()=>Ar=0),Ar=Date.now());function jd(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;ut(Md(n,s.value),e,5,[n])};return s.value=t,s.attached=Id(),s}function Md(t,e){if(Z(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const Eo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Ld=(t,e,s,n,r,i)=>{const o=r==="svg";e==="class"?kd(t,n,o):e==="style"?xd(t,s,n):nr(e)?pi(e)||Od(t,e,s,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Dd(t,e,n,o))?(wo(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&bo(t,e,n,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!xe(n))?wo(t,nt(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),bo(t,e,n,o))};function Dd(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Eo(e)&&ie(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Eo(e)&&xe(s)?!1:e in t}const js=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Z(e)?s=>Dn(e,s):e};function Ud(t){t.target.composing=!0}function To(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const $t=Symbol("_assign"),Wt={created(t,{modifiers:{lazy:e,trim:s,number:n}},r){t[$t]=js(r);const i=n||r.props&&r.props.type==="number";qt(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;s&&(a=a.trim()),i&&(a=Hn(a)),t[$t](a)}),s&&qt(t,"change",()=>{t.value=t.value.trim()}),e||(qt(t,"compositionstart",Ud),qt(t,"compositionend",To),qt(t,"change",To))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:r,number:i}},o){if(t[$t]=js(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Hn(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||r&&t.value.trim()===l)||(t.value=l))}},Lv={deep:!0,created(t,e,s){t[$t]=js(s),qt(t,"change",()=>{const n=t._modelValue,r=vn(t),i=t.checked,o=t[$t];if(Z(n)){const a=vi(n,r),l=a!==-1;if(i&&!l)o(n.concat(r));else if(!i&&l){const c=[...n];c.splice(a,1),o(c)}}else if(Us(n)){const a=new Set(n);i?a.add(r):a.delete(r),o(a)}else o($l(t,i))})},mounted:Po,beforeUpdate(t,e,s){t[$t]=js(s),Po(t,e,s)}};function Po(t,{value:e,oldValue:s},n){t._modelValue=e;let r;if(Z(e))r=vi(e,n.props.value)>-1;else if(Us(e))r=e.has(n.props.value);else{if(e===s)return;r=kn(e,$l(t,!0))}t.checked!==r&&(t.checked=r)}const As={deep:!0,created(t,{value:e,modifiers:{number:s}},n){const r=Us(e);qt(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>s?Hn(vn(o)):vn(o));t[$t](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,cr(()=>{t._assigning=!1})}),t[$t]=js(n)},mounted(t,{value:e}){xo(t,e)},beforeUpdate(t,e,s){t[$t]=js(s)},updated(t,{value:e}){t._assigning||xo(t,e)}};function xo(t,e){const s=t.multiple,n=Z(e);if(!(s&&!n&&!Us(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],a=vn(o);if(s)if(n){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=vi(e,a)>-1}else o.selected=e.has(a);else if(kn(vn(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function vn(t){return"_value"in t?t._value:t.value}function $l(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const Nd=["ctrl","shift","alt","meta"],Fd={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Nd.some(s=>t[`${s}Key`]&&!e.includes(s))},Os=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=((r,...i)=>{for(let o=0;o<e.length;o++){const a=Fd[e[o]];if(a&&a(r,e))return}return t(r,...i)}))},Bd=Re({patchProp:Ld},md);let Co;function zd(){return Co||(Co=Nu(Bd))}const Hd=((...t)=>{const e=zd().createApp(...t),{mount:s}=e;return e.mount=n=>{const r=Vd(n);if(!r)return;const i=e._component;!ie(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=s(r,!1,qd(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function qd(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Vd(t){return xe(t)?document.querySelector(t):t}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Il;const gr=t=>Il=t,jl=Symbol();function Xr(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var nn;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(nn||(nn={}));function Wd(){const t=Ca(!0),e=t.run(()=>le({}));let s=[],n=[];const r=Ti({install(i){gr(r),r._a=i,i.provide(jl,r),i.config.globalProperties.$pinia=r,n.forEach(o=>s.push(o)),n=[]},use(i){return this._a?s.push(i):n.push(i),this},_p:s,_a:null,_e:t,_s:new Map,state:e});return r}const Ml=()=>{};function Ao(t,e,s,n=Ml){t.push(e);const r=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!s&&Aa()&&Cc(r),r}function ps(t,...e){t.slice().forEach(s=>{s(...e)})}const Kd=t=>t(),Oo=Symbol(),Or=Symbol();function Qr(t,e){t instanceof Map&&e instanceof Map?e.forEach((s,n)=>t.set(n,s)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const s in e){if(!e.hasOwnProperty(s))continue;const n=e[s],r=t[s];Xr(r)&&Xr(n)&&t.hasOwnProperty(s)&&!Pe(n)&&!Gt(n)?t[s]=Qr(r,n):t[s]=n}return t}const Gd=Symbol();function Jd(t){return!Xr(t)||!Object.prototype.hasOwnProperty.call(t,Gd)}const{assign:Nt}=Object;function Yd(t){return!!(Pe(t)&&t.effect)}function Xd(t,e,s,n){const{state:r,actions:i,getters:o}=e,a=s.state.value[t];let l;function c(){a||(s.state.value[t]=r?r():{});const u=Xc(s.state.value[t]);return Nt(u,i,Object.keys(o||{}).reduce((d,h)=>(d[h]=Ti(Me(()=>{gr(s);const f=s._s.get(t);return o[h].call(f,f)})),d),{}))}return l=Ll(t,c,e,s,n,!0),l}function Ll(t,e,s={},n,r,i){let o;const a=Nt({actions:{}},s),l={deep:!0};let c,u,d=[],h=[],f;const m=n.state.value[t];!i&&!m&&(n.state.value[t]={}),le({});let S;function E(ee){let z;c=u=!1,typeof ee=="function"?(ee(n.state.value[t]),z={type:nn.patchFunction,storeId:t,events:f}):(Qr(n.state.value[t],ee),z={type:nn.patchObject,payload:ee,storeId:t,events:f});const j=S=Symbol();cr().then(()=>{S===j&&(c=!0)}),u=!0,ps(d,z,n.state.value[t])}const $=i?function(){const{state:z}=s,j=z?z():{};this.$patch(M=>{Nt(M,j)})}:Ml;function I(){o.stop(),d=[],h=[],n._s.delete(t)}const b=(ee,z="")=>{if(Oo in ee)return ee[Or]=z,ee;const j=function(){gr(n);const M=Array.from(arguments),C=[],te=[];function he(ne){C.push(ne)}function Te(ne){te.push(ne)}ps(h,{args:M,name:j[Or],store:D,after:he,onError:Te});let me;try{me=ee.apply(this&&this.$id===t?this:D,M)}catch(ne){throw ps(te,ne),ne}return me instanceof Promise?me.then(ne=>(ps(C,ne),ne)).catch(ne=>(ps(te,ne),Promise.reject(ne))):(ps(C,me),me)};return j[Oo]=!0,j[Or]=z,j},g={_p:n,$id:t,$onAction:Ao.bind(null,h),$patch:E,$reset:$,$subscribe(ee,z={}){const j=Ao(d,ee,z.detached,()=>M()),M=o.run(()=>yt(()=>n.state.value[t],C=>{(z.flush==="sync"?u:c)&&ee({storeId:t,type:nn.direct,events:f},C)},Nt({},l,z)));return j},$dispose:I},D=ds(g);n._s.set(t,D);const J=(n._a&&n._a.runWithContext||Kd)(()=>n._e.run(()=>(o=Ca()).run(()=>e({action:b}))));for(const ee in J){const z=J[ee];if(Pe(z)&&!Yd(z)||Gt(z))i||(m&&Jd(z)&&(Pe(z)?z.value=m[ee]:Qr(z,m[ee])),n.state.value[t][ee]=z);else if(typeof z=="function"){const j=b(z,ee);J[ee]=j,a.actions[ee]=z}}return Nt(D,J),Nt(de(D),J),Object.defineProperty(D,"$state",{get:()=>n.state.value[t],set:ee=>{E(z=>{Nt(z,ee)})}}),n._p.forEach(ee=>{Nt(D,o.run(()=>ee({store:D,app:n._a,pinia:n,options:a})))}),m&&i&&s.hydrate&&s.hydrate(D.$state,m),c=!0,u=!0,D}/*! #__NO_SIDE_EFFECTS__ */function Dl(t,e,s){let n;const r=typeof e=="function";n=r?s:e;function i(o,a){const l=$u();return o=o||(l?ct(jl,null):null),o&&gr(o),o=Il,o._s.has(t)||(r?Ll(t,e,n,o):Xd(t,n,o)),o._s.get(t)}return i.$id=t,i}const Qd="modulepreload",Zd=function(t){return"/"+t},Ro={},at=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");r=l(s.map(c=>{if(c=Zd(c),c in Ro)return;Ro[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Qd,u||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},eh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>at(async()=>{const{default:n}=await Promise.resolve().then(()=>Bs);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class Ii extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class th extends Ii{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class $o extends Ii{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Io extends Ii{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zr;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Zr||(Zr={}));var sh=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class nh{constructor(e,{headers:s={},customFetch:n,region:r=Zr.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=eh(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return sh(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=s;let a={},{region:l}=s;l||(l=this.region);const c=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:u}).catch(S=>{throw new th(S)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new $o(d);if(!d.ok)throw new Io(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield d.json():f==="application/octet-stream"?m=yield d.blob():f==="text/event-stream"?m=d:f==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null,response:d}}catch(r){return{data:null,error:r,response:r instanceof Io||r instanceof $o?r.context:void 0}}})}}function rh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ih(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function n(){var r=!1;try{r=this instanceof n}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),s}var Oe={},gs={},ms={},vs={},_s={},ys={},oh=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ms=oh();const ah=Ms.fetch,Ul=Ms.fetch.bind(Ms),Nl=Ms.Headers,lh=Ms.Request,ch=Ms.Response,Bs=Object.freeze(Object.defineProperty({__proto__:null,Headers:Nl,Request:lh,Response:ch,default:Ul,fetch:ah},Symbol.toStringTag,{value:"Module"})),uh=ih(Bs);var $n={},jo;function Fl(){if(jo)return $n;jo=1,Object.defineProperty($n,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return $n.default=t,$n}var Mo;function Bl(){if(Mo)return ys;Mo=1;var t=ys&&ys.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ys,"__esModule",{value:!0});const e=t(uh),s=t(Fl());class n{constructor(i){var o,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h,f;let m=null,S=null,E=null,$=c.status,I=c.statusText;if(c.ok){if(this.method!=="HEAD"){const V=await c.text();V===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?S=V:S=JSON.parse(V))}const g=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),D=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");g&&D&&D.length>1&&(E=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(m={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,E=null,$=406,I="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const g=await c.text();try{m=JSON.parse(g),Array.isArray(m)&&c.status===404&&(S=[],m=null,$=200,I="OK")}catch{c.status===404&&g===""?($=204,I="No Content"):m={message:g}}if(m&&this.isMaybeSingle&&(!((f=m?.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,$=200,I="OK"),m&&this.shouldThrowOnError)throw new s.default(m)}return{error:m,data:S,count:E,status:$,statusText:I}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h;return{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:`${(d=c?.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=c?.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,o)}returns(){return this}overrideTypes(){return this}}return ys.default=n,ys}var Lo;function zl(){if(Lo)return _s;Lo=1;var t=_s&&_s.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(_s,"__esModule",{value:!0});const e=t(Bl());class s extends e.default{select(r){let i=!1;const o=(r??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${r}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${r}`),this}range(r,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${r}`),this.url.searchParams.set(c,`${i-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[r?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${h}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}}return _s.default=s,_s}var Do;function ji(){if(Do)return vs;Do=1;var t=vs&&vs.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vs,"__esModule",{value:!0});const e=t(zl());class s extends e.default{eq(r,i){return this.url.searchParams.append(r,`eq.${i}`),this}neq(r,i){return this.url.searchParams.append(r,`neq.${i}`),this}gt(r,i){return this.url.searchParams.append(r,`gt.${i}`),this}gte(r,i){return this.url.searchParams.append(r,`gte.${i}`),this}lt(r,i){return this.url.searchParams.append(r,`lt.${i}`),this}lte(r,i){return this.url.searchParams.append(r,`lte.${i}`),this}like(r,i){return this.url.searchParams.append(r,`like.${i}`),this}likeAllOf(r,i){return this.url.searchParams.append(r,`like(all).{${i.join(",")}}`),this}likeAnyOf(r,i){return this.url.searchParams.append(r,`like(any).{${i.join(",")}}`),this}ilike(r,i){return this.url.searchParams.append(r,`ilike.${i}`),this}ilikeAllOf(r,i){return this.url.searchParams.append(r,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(r,i){return this.url.searchParams.append(r,`ilike(any).{${i.join(",")}}`),this}is(r,i){return this.url.searchParams.append(r,`is.${i}`),this}in(r,i){const o=Array.from(new Set(i)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(r,`in.(${o})`),this}contains(r,i){return typeof i=="string"?this.url.searchParams.append(r,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(r,`cs.{${i.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(i)}`),this}containedBy(r,i){return typeof i=="string"?this.url.searchParams.append(r,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(r,`cd.{${i.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(i)}`),this}rangeGt(r,i){return this.url.searchParams.append(r,`sr.${i}`),this}rangeGte(r,i){return this.url.searchParams.append(r,`nxl.${i}`),this}rangeLt(r,i){return this.url.searchParams.append(r,`sl.${i}`),this}rangeLte(r,i){return this.url.searchParams.append(r,`nxr.${i}`),this}rangeAdjacent(r,i){return this.url.searchParams.append(r,`adj.${i}`),this}overlaps(r,i){return typeof i=="string"?this.url.searchParams.append(r,`ov.${i}`):this.url.searchParams.append(r,`ov.{${i.join(",")}}`),this}textSearch(r,i,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=o===void 0?"":`(${o})`;return this.url.searchParams.append(r,`${l}fts${c}.${i}`),this}match(r){return Object.entries(r).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(r,i,o){return this.url.searchParams.append(r,`not.${i}.${o}`),this}or(r,{foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${r})`),this}filter(r,i,o){return this.url.searchParams.append(r,`${i}.${o}`),this}}return vs.default=s,vs}var Uo;function Hl(){if(Uo)return ms;Uo=1;var t=ms&&ms.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ms,"__esModule",{value:!0});const e=t(ji());class s{constructor(r,{headers:i={},schema:o,fetch:a}){this.url=r,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(r,{head:i=!1,count:o}={}){const a=i?"HEAD":"GET";let l=!1;const c=(r??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",c),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const c=r.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(r,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const d=r.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(r,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:r}={}){var i;const o="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return ms.default=s,ms}var No;function dh(){if(No)return gs;No=1;var t=gs&&gs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gs,"__esModule",{value:!0});const e=t(Hl()),s=t(ji());class n{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:c}={}){var u;let d;const h=new URL(`${this.url}/rpc/${i}`);let f;a||l?(d=a?"HEAD":"GET",Object.entries(o).filter(([S,E])=>E!==void 0).map(([S,E])=>[S,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([S,E])=>{h.searchParams.append(S,E)})):(d="POST",f=o);const m=new Headers(this.headers);return c&&m.set("Prefer",`count=${c}`),new s.default({method:d,url:h,headers:m,schema:this.schemaName,body:f,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return gs.default=n,gs}var Fo;function hh(){if(Fo)return Oe;Fo=1;var t=Oe&&Oe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.PostgrestError=Oe.PostgrestBuilder=Oe.PostgrestTransformBuilder=Oe.PostgrestFilterBuilder=Oe.PostgrestQueryBuilder=Oe.PostgrestClient=void 0;const e=t(dh());Oe.PostgrestClient=e.default;const s=t(Hl());Oe.PostgrestQueryBuilder=s.default;const n=t(ji());Oe.PostgrestFilterBuilder=n.default;const r=t(zl());Oe.PostgrestTransformBuilder=r.default;const i=t(Bl());Oe.PostgrestBuilder=i.default;const o=t(Fl());return Oe.PostgrestError=o.default,Oe.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:i.default,PostgrestError:o.default},Oe}var fh=hh();const ph=rh(fh),{PostgrestClient:gh,PostgrestQueryBuilder:Dv,PostgrestFilterBuilder:Uv,PostgrestTransformBuilder:Nv,PostgrestBuilder:Fv,PostgrestError:Bv}=ph;class mh{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const s=parseInt(process.versions.node.split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const n=this.getWebSocketConstructor();return new n(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const vh="2.15.1",_h=`realtime-js/${vh}`,yh="1.0.0",ei=1e4,bh=1e3,wh=100;var rn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(rn||(rn={}));var Ce;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ce||(Ce={}));var ot;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ot||(ot={}));var ti;(function(t){t.websocket="websocket"})(ti||(ti={}));var as;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(as||(as={}));class Sh{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+r));o=o+r;const l=n.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class ql{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var we;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(we||(we={}));const Bo=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=kh(o,t,e,r),i),{})},kh=(t,e,s,n)=>{const r=e.find(a=>a.name===t),i=r?.type,o=s[t];return i&&!n.includes(i)?Vl(i,o):si(o)},Vl=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return xh(e,s)}switch(t){case we.bool:return Eh(e);case we.float4:case we.float8:case we.int2:case we.int4:case we.int8:case we.numeric:case we.oid:return Th(e);case we.json:case we.jsonb:return Ph(e);case we.timestamp:return Ch(e);case we.abstime:case we.date:case we.daterange:case we.int4range:case we.int8range:case we.money:case we.reltime:case we.text:case we.time:case we.timestamptz:case we.timetz:case we.tsrange:case we.tstzrange:return si(e);default:return si(e)}},si=t=>t,Eh=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Th=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ph=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},xh=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Vl(e,a))}return t},Ch=t=>typeof t=="string"?t.replace(" ","T"):t,Wl=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Rr{constructor(e,s,n={},r=ei){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var zo;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(zo||(zo={}));class on{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=on.syncState(this.state,r,i,o),this.pendingDiffs.forEach(l=>{this.state=on.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=on.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const i=this.cloneDeep(e),o=this.transformState(s),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const h=u.map(E=>E.presence_ref),f=d.map(E=>E.presence_ref),m=u.filter(E=>f.indexOf(E.presence_ref)<0),S=d.filter(E=>h.indexOf(E.presence_ref)<0);m.length>0&&(a[c]=m),S.length>0&&(l[c]=S)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},n,r)}static syncDiff(e,s,n,r){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}n(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,r(a,c,l),c.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ho;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ho||(Ho={}));var an;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(an||(an={}));var xt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(xt||(xt={}));class Mi{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=Ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Rr(this,ot.join,this.params,this.timeout),this.rejoinTimer=new ql(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ce.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ot.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new on(this),this.broadcastEndpointURL=Wl(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Ce.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,l=(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&r!==void 0?r:[],c=!!this.bindings[an.PRESENCE]&&this.bindings[an.PRESENCE].length>0,u={},d={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(h=>e?.(xt.CHANNEL_ERROR,h)),this._onClose(()=>e?.(xt.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:h})=>{var f;if(this.socket.setAuth(),h===void 0){e?.(xt.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,S=(f=m?.length)!==null&&f!==void 0?f:0,E=[];for(let $=0;$<S;$++){const I=m[$],{filter:{event:b,schema:g,table:D,filter:V}}=I,J=h&&h[$];if(J&&J.event===b&&J.schema===g&&J.table===D&&J.filter===V)E.push(Object.assign(Object.assign({},I),{id:J.id}));else{this.unsubscribe(),this.state=Ce.errored,e?.(xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(xt.SUBSCRIBED);return}}).receive("error",h=>{this.state=Ce.errored,e?.(xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e?.(xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this.state===Ce.joined&&e===an.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ce.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ot.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Rr(this,ot.leave,{},e),n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ce.closed,this.bindings={}}async _fetchWithTimeout(e,s,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(i),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Rr(this,e,s,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>wh){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ot;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,s,n);if(s&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(f=>{var m,S,E;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((E=(S=f.filter)===null||S===void 0?void 0:S.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(f=>f.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var m,S,E,$,I,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const g=f.id,D=(m=f.filter)===null||m===void 0?void 0:m.event;return g&&((S=s.ids)===null||S===void 0?void 0:S.includes(g))&&(D==="*"||D?.toLocaleLowerCase()===((E=s.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const g=(I=($=f?.filter)===null||$===void 0?void 0:$.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return g==="*"||g===((b=s?.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:S,table:E,commit_timestamp:$,type:I,errors:b}=m;h=Object.assign(Object.assign({},{schema:S,table:E,commit_timestamp:$,eventType:I,new:{},old:{},errors:b}),this._getPayloadRecords(m))}f.callback(h,n)})}_isClosed(){return this.state===Ce.closed}_isJoined(){return this.state===Ce.joined}_isJoining(){return this.state===Ce.joining}_isLeaving(){return this.state===Ce.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),i={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Mi.isEqual(r.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ot.close,{},e)}_onError(e){this._on(ot.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ce.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Bo(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Bo(e.columns,e.old_record)),s}}const qo=()=>{},In={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ah=[1e3,2e3,5e3,1e4],Oh=1e4,Rh=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $h{constructor(e,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ei,this.transport=null,this.heartbeatIntervalMs=In.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qo,this.ref=0,this.reconnectTimer=null,this.logger=qo,this.conn=null,this.sendBuffer=[],this.serializer=new Sh,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let i;return r?i=r:typeof fetch>"u"?i=(...o)=>at(async()=>{const{default:a}=await Promise.resolve().then(()=>Bs);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=s?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${ti.websocket}`,this.httpEndpoint=Wl(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=mh.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yh}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case rn.connecting:return as.Connecting;case rn.open:return as.Open;case rn.closing:return as.Closing;default:return as.Closed}}isConnected(){return this.connectionState()===as.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new Mi(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(bh,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},In.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{s.topic==="phoenix"&&s.event==="phx_reply"&&this.heartbeatCallback(s.payload.status==="ok"?"ok":"error"),s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:r,payload:i,ref:o}=s,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${r} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(r,i,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ot.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([Rh],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const r={access_token:s,version:_h};s&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(ot.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(s)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new ql(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},In.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,n,r,i,o,a,l,c;if(this.transport=(s=e?.transport)!==null&&s!==void 0?s:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:ei,this.heartbeatIntervalMs=(r=e?.heartbeatIntervalMs)!==null&&r!==void 0?r:In.HEARTBEAT_INTERVAL,this.worker=(i=e?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=e?.reconnectAfterMs)!==null&&a!==void 0?a:(u=>Ah[u-1]||Oh),this.encode=(l=e?.encode)!==null&&l!==void 0?l:((u,d)=>d(JSON.stringify(u))),this.decode=(c=e?.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Li extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ae(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Ih extends Li{constructor(e,s,n){super(e),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ni extends Li{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var jh=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const Kl=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>at(async()=>{const{default:n}=await Promise.resolve().then(()=>Bs);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Mh=()=>jh(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield at(()=>Promise.resolve().then(()=>Bs),void 0)).Response:Response}),ri=t=>{if(Array.isArray(t))return t.map(s=>ri(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=ri(n)}),e},Lh=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var hs=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const $r=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Dh=(t,e,s)=>hs(void 0,void 0,void 0,function*(){const n=yield Mh();t instanceof n&&!s?.noResolveJson?t.json().then(r=>{const i=t.status||500,o=r?.statusCode||i+"";e(new Ih($r(r),i,o))}).catch(r=>{e(new ni($r(r),r))}):e(new ni($r(t),t))}),Uh=(t,e,s,n)=>{const r={method:t,headers:e?.headers||{}};return t==="GET"||!n?r:(Lh(n)?(r.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r.body=JSON.stringify(n)):r.body=n,e?.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),s))};function Pn(t,e,s,n,r,i){return hs(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,Uh(e,n,r,i)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Dh(l,a,n))})})}function tr(t,e,s,n){return hs(this,void 0,void 0,function*(){return Pn(t,"GET",e,s,n)})}function vt(t,e,s,n,r){return hs(this,void 0,void 0,function*(){return Pn(t,"POST",e,n,r,s)})}function ii(t,e,s,n,r){return hs(this,void 0,void 0,function*(){return Pn(t,"PUT",e,n,r,s)})}function Nh(t,e,s,n){return hs(this,void 0,void 0,function*(){return Pn(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Gl(t,e,s,n,r){return hs(this,void 0,void 0,function*(){return Pn(t,"DELETE",e,n,r,s)})}var Be=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const Fh={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vo={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Bh{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=Kl(r)}uploadOrUpdate(e,s,n,r){return Be(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Vo),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r?.headers&&(a=Object.assign(Object.assign({},a),r.headers));const c=this._removeEmptyFolders(s),u=this._getFinalPath(c),d=yield(e=="PUT"?ii:vt)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(Ae(i))return{data:null,error:i};throw i}})}upload(e,s,n){return Be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return Be(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:Vo.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield ii(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:d.Key},error:null}}catch(l){if(Ae(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return Be(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s?.upsert&&(r["x-upsert"]="true");const i=yield vt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Li("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}})}update(e,s,n){return Be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return Be(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}copy(e,s,n){return Be(this,void 0,void 0,function*(){try{return{data:{path:(yield vt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return Be(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield vt(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return Be(this,void 0,void 0,function*(){try{const r=yield vt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}download(e,s){return Be(this,void 0,void 0,function*(){const r=typeof s?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(s?.transform||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield tr(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ae(a))return{data:null,error:a};throw a}})}info(e){return Be(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield tr(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:ri(n),error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}})}exists(e){return Be(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Nh(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ae(n)&&n instanceof ni){const r=n.originalError;if([400,404].includes(r?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],i=s?.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&r.push(i);const a=typeof s?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(s?.transform||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(e){return Be(this,void 0,void 0,function*(){try{return{data:yield Gl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}})}list(e,s,n){return Be(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Fh),s),{prefix:e||""});return{data:yield vt(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}listV2(e,s){return Be(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield vt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const zh="2.11.0",Hh={"X-Client-Info":`storage-js/${zh}`};var bs=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class qh{constructor(e,s={},n,r){const i=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Hh),s),this.fetch=Kl(n)}listBuckets(){return bs(this,void 0,void 0,function*(){try{return{data:yield tr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ae(e))return{data:null,error:e};throw e}})}getBucket(e){return bs(this,void 0,void 0,function*(){try{return{data:yield tr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return bs(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return bs(this,void 0,void 0,function*(){try{return{data:yield ii(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}})}emptyBucket(e){return bs(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}})}deleteBucket(e){return bs(this,void 0,void 0,function*(){try{return{data:yield Gl(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}})}}class Vh extends qh{constructor(e,s={},n,r){super(e,s,n,r)}from(e){return new Bh(this.url,this.headers,e,this.fetch)}}const Wh="2.56.0";let Js="";typeof Deno<"u"?Js="deno":typeof document<"u"?Js="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Js="react-native":Js="node";const Kh={"X-Client-Info":`supabase-js-${Js}/${Wh}`},Gh={headers:Kh},Jh={schema:"public"},Yh={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Xh={};var Qh=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const Zh=t=>{let e;return t?e=t:typeof fetch>"u"?e=Ul:e=fetch,(...s)=>e(...s)},ef=()=>typeof Headers>"u"?Nl:Headers,tf=(t,e,s)=>{const n=Zh(s),r=ef();return(i,o)=>Qh(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new r(o?.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var sf=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};function nf(t){return t.endsWith("/")?t:t+"/"}function rf(t,e){var s,n;const{db:r,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(s=d?.headers)!==null&&s!==void 0?s:{}),(n=a?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>sf(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const Jl="2.71.1",Ps=30*1e3,oi=3,Ir=oi*Ps,of="http://localhost:9999",af="supabase.auth.token",lf={"X-Client-Info":`gotrue-js/${Jl}`},ai="X-Supabase-Api-Version",Yl={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cf=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uf=600*1e3;class Di extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function ae(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class df extends Di{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function hf(t){return ae(t)&&t.name==="AuthApiError"}class Xl extends Di{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Xt extends Di{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class Ft extends Xt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ff(t){return ae(t)&&t.name==="AuthSessionMissingError"}class jn extends Xt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mn extends Xt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ln extends Xt{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function pf(t){return ae(t)&&t.name==="AuthImplicitGrantRedirectError"}class Wo extends Xt{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class li extends Xt{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function jr(t){return ae(t)&&t.name==="AuthRetryableFetchError"}class Ko extends Xt{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class ci extends Xt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const sr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Go=` 	
\r=`.split(""),gf=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Go.length;e+=1)t[Go[e].charCodeAt(0)]=-2;for(let e=0;e<sr.length;e+=1)t[sr[e].charCodeAt(0)]=e;return t})();function Jo(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(sr[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(sr[n]),e.queuedBits-=6}}function Ql(t,e,s){const n=gf[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Yo(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{_f(o,n,s)};for(let o=0;o<t.length;o+=1)Ql(t.charCodeAt(o),r,i);return e.join("")}function mf(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function vf(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}mf(n,e)}}function _f(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function yf(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)Ql(t.charCodeAt(r),s,n);return new Uint8Array(e)}function bf(t){const e=[];return vf(t,s=>e.push(s)),new Uint8Array(e)}function wf(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};return t.forEach(r=>Jo(r,s,n)),Jo(null,s,n),e.join("")}function Sf(t){return Math.round(Date.now()/1e3)+t}function kf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const it=()=>typeof window<"u"&&typeof document<"u",ss={tested:!1,writable:!1},Zl=()=>{if(!it())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ss.tested)return ss.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ss.tested=!0,ss.writable=!0}catch{ss.tested=!0,ss.writable=!1}return ss.writable};function Ef(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const ec=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>at(async()=>{const{default:n}=await Promise.resolve().then(()=>Bs);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Tf=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",xs=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},ns=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Dt=async(t,e)=>{await t.removeItem(e)};class mr{constructor(){this.promise=new mr.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}mr.promiseConstructor=Promise;function Mr(t){const e=t.split(".");if(e.length!==3)throw new ci("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!cf.test(e[n]))throw new ci("JWT not in base64url format");return{header:JSON.parse(Yo(e[0])),payload:JSON.parse(Yo(e[1])),signature:yf(e[2]),raw:{header:e[0],payload:e[1]}}}async function Pf(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function xf(t,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function Cf(t){return("0"+t.toString(16)).substr(-2)}function Af(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let i=0;i<56;i++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,Cf).join("")}async function Of(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function Rf(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Of(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ws(t,e,s=!1){const n=Af();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await xs(t,`${e}-code-verifier`,r);const i=await Rf(n);return[i,n===i?"plain":"s256"]}const $f=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function If(t){const e=t.headers.get(ai);if(!e||!e.match($f))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function jf(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Mf(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Lf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ss(t){if(!Lf.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lr(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Xo(t){return JSON.parse(JSON.stringify(t))}var Df=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const is=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Uf=[502,503,504];async function Qo(t){var e;if(!Tf(t))throw new li(is(t),0);if(Uf.includes(t.status))throw new li(is(t),t.status);let s;try{s=await t.json()}catch(i){throw new Xl(is(i),i)}let n;const r=If(t);if(r&&r.getTime()>=Yl["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Ko(is(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ft}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Ko(is(s),t.status,s.weak_password.reasons);throw new df(is(s),t.status||500,n)}const Nf=(t,e,s,n)=>{const r={method:t,headers:e?.headers||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function ce(t,e,s,n){var r;const i=Object.assign({},n?.headers);i[ai]||(i[ai]=Yl["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n?.query)!==null&&r!==void 0?r:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Ff(t,e,s+a,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function Ff(t,e,s,n,r,i){const o=Nf(e,n,r,i);let a;try{a=await t(s,Object.assign({},o))}catch(l){throw console.error(l),new li(is(l),0)}if(a.ok||await Qo(a),n?.noResolveJson)return a;try{return await a.json()}catch(l){await Qo(l)}}function Tt(t){var e;let s=null;qf(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Sf(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function Zo(t){const e=Tt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Vt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Bf(t){return{data:t,error:null}}function zf(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=t,o=Df(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Hf(t){return t}function qf(t){return t.access_token&&t.refresh_token&&t.expires_in}const Dr=["global","local","others"];var Vf=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class Wf{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=ec(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=Dr[0]){if(Dr.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Dr.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Vt})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=Vf(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n?.newEmail,delete r.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:zf,redirectTo:s?.redirectTo})}catch(s){if(ae(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Vt})}catch(s){if(ae(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e?.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Hf});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const S=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(m.split(";")[1].split("=")[1]);c[`${E}Page`]=S}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(ae(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ss(e);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Vt})}catch(s){if(ae(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Ss(e);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Vt})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){Ss(e);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Vt})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ss(e.userId);try{const{data:s,error:n}=await ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Ss(e.userId),Ss(e.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}}}function ea(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Kf(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ks={debug:!!(globalThis&&Zl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Gf extends tc{}async function Jf(t,e,s){ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),ks.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Gf(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ks.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Kf();const Yf={url:of,storageKey:af,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lf,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ta(t,e,s){return await s()}const Es={};class _n{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_n.nextInstanceID,_n.nextInstanceID+=1,this.instanceID>0&&it()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Yf),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Wf({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=ec(r.fetch),this.lock=r.lock||ta,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:it()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=Jf:this.lock=ta,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Zl()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ea(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=ea(this.memoryStorage)),it()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Es[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Es[this.storageKey]=Object.assign(Object.assign({},Es[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Es[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Es[this.storageKey]=Object.assign(Object.assign({},Es[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Jl}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=Ef(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),it()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),pf(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ae(s)?{error:s}:{error:new Xl("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e?.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e?.options)===null||r===void 0?void 0:r.captchaToken}},xform:Tt}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ae(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,r;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await ws(this.storage,this.storageKey)),i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:u,password:d,data:(s=h?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:f,code_challenge_method:m},xform:Tt})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(n=h?.data)!==null&&n!==void 0?n:{},channel:(r=h?.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Tt})}else throw new Mn("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ae(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:a}=e;s=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Zo})}else if("phone"in e){const{phone:i,password:o,options:a}=e;s=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Zo})}else throw new Mn("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new jn}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,r,i,o,a,l,c,u,d,h,f;let m,S;if("message"in e)m=e.message,S=e.signature;else{const{chain:E,wallet:$,statement:I,options:b}=e;let g;if(it())if(typeof $=="object")g=$;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))g=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=$}const D=new URL((s=b?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in g&&g.signIn){const V=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),I?{statement:I}:null));let J;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")J=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)J=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)m=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),S=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in g)||typeof g.signMessage!="function"||!("publicKey"in g)||typeof g!="object"||!g.publicKey||!("toBase58"in g.publicKey)||typeof g.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${D.host} wants you to sign in with your Solana account:`,g.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(r=(n=b?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=b?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(u=b?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);const V=await g.signMessage(new TextEncoder().encode(m),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=V}}try{const{data:E,error:$}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:wf(S)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Tt});if($)throw $;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new jn}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:$})}catch(E){if(ae(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(e){const s=await ns(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:i,error:o}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Tt});if(await Dt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new jn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(ae(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:i,nonce:o}=e,a=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Tt}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new jn}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await ws(this.storage,this.storageKey));const{error:d}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c?.message_id},error:u}}throw new Mn("You must provide either an email or phone number.")}catch(a){if(ae(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var s,n;try{let r,i;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Tt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(ae(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ws(this.storage,this.storageKey)),await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e?.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Bf})}catch(i){if(ae(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Ft;const{error:r}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(ae(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await ce(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:a}=await ce(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:a}}throw new Mn("You must provide either an email or phone number and a type")}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await ns(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Ir:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await ns(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=Lr()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Vt}):await this._useSession(async s=>{var n,r,i;const{data:o,error:a}=s;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ft}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Vt})})}catch(s){if(ae(s))return ff(s)&&(await this._removeSession(),await Dt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Ft;const o=r.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await ws(this.storage,this.storageKey));const{data:c,error:u}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Vt});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ft;const s=Date.now()/1e3;let n=s,r=!0,i=null;const{payload:o}=Mr(e.access_token);if(o.exp&&(n=o.exp,r=n<=s),r){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(ae(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new Ft;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!it())throw new Ln("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ln(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Wo("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ln("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Wo("No code detected.");const{data:I,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const g=new URL(window.location.href);return g.searchParams.delete("code"),window.history.replaceState(window.history.state,"",g.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new Ln("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=Ps&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const m=h-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,u);const{data:S,error:E}=await this._getUser(i);if(E)throw E;const $={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:e.type},error:null}}catch(n){if(ae(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await ns(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{error:i};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(hf(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Dt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=kf(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:i},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await ws(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(ae(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return it()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:e.provider,url:n?.url},error:null}}catch(n){if(ae(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)throw o;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await xf(async r=>(r>0&&await Pf(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Tt})),(r,i)=>{const o=200*Math.pow(2,r);return i&&jr(i)&&Date.now()+o-n<Ps})}catch(n){if(this._debug(s,"error",n),ae(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),it()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await ns(this.storage,this.storageKey);if(r&&this.userStorage){let o=await ns(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await xs(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o?.user)!==null&&e!==void 0?e:Lr()}else if(r&&!r.user&&!r.user){const o=await ns(this.storage,this.storageKey+"-user");o&&o?.user?(r.user=o.user,await Dt(this.storage,this.storageKey+"-user"),await xs(this.storage,this.storageKey,r)):r.user=Lr()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((s=r.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Ir;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ir}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),jr(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(r.access_token);!a&&o?.user?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Ft;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new mr;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ft;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),ae(i)){const o={session:null,error:i};return jr(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await xs(this.userStorage,this.storageKey+"-user",{user:s.user});const r=Object.assign({},s);delete r.user;const i=Xo(r);await xs(this.storage,this.storageKey,i)}else{const r=Xo(s);await xs(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Dt(this.storage,this.storageKey),await Dt(this.storage,this.storageKey+"-code-verifier"),await Dt(this.storage,this.storageKey+"-user"),this.userStorage&&await Dt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&it()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ps);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Ps);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Ps}ms, refresh threshold is ${oi} ticks`),r<=oi&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof tc)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!it()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await ws(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n?.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r?.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((r=l?.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:a}=await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r?.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(s){if(ae(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r?.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ae(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=e?.factors||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Mr(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(a=>a.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+uf>r)return n;const{data:i,error:o}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:f,error:m}=await this.getSession();if(m||!f.session)return{data:null,error:m};n=f.session.access_token}const{header:r,payload:i,signature:o,raw:{header:a,payload:l}}=Mr(n);s?.allowExpired||jf(i.exp);const c=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!c){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:i,header:r,signature:o},error:null}}const u=Mf(r.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,bf(`${a}.${l}`)))throw new ci("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}}_n.nextInstanceID=0;const Xf=_n;class Qf extends Xf{constructor(e){super(e)}}var Zf=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class ep{constructor(e,s,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=nf(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Jh,realtime:Xh,auth:Object.assign(Object.assign({},Yh),{storageKey:c}),global:Gh},d=rf(n??{},u);this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=tf(s,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new gh(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Vh(this.storageUrl.href,this.headers,this.fetch,n?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new nh(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Zf(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Qf({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new $h(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n?.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const tp=(t,e,s)=>new ep(t,e,s);function sp(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}sp()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const He=tp("https://kxlglqpkkrsomrslbhgi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt4bGdscXBra3Jzb21yc2xiaGdpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzMDQ4NzAsImV4cCI6MjA3MTg4MDg3MH0.huf7ZZLjor7KXwpqXcikvrLccDJoEO6uZLHchwWHSO4",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),xn=Dl("auth",{state:()=>({session:null,user:null,profile:null,loadingProfile:!1,authStateVersion:0,initialized:!1}),getters:{isAuthed:t=>!!t.user},actions:{async init(){if(this.initialized)return;const{data:{session:t}}=await He.auth.getSession();this.session=t,this.user=t?.user??null,this.user&&await this.fetchProfile(),He.auth.onAuthStateChange((e,s)=>{console.log("Auth event:",e,s),this.session=s,this.user=s?.user??null,this.user?this.fetchProfile():this.profile=null,this.authStateVersion++}),this.initialized=!0},async signIn(t,e){const{data:s,error:n}=await He.auth.signInWithPassword({email:t,password:e});return{data:s,error:n}},async signUp(t,e,s){const{data:n,error:r}=await He.auth.signUp({email:t,password:e,options:s?{data:s}:{}});return{data:n,error:r}},async signOut(){console.log("Signing out user:",this.user);try{const{error:t}=await He.auth.signOut();if(t)throw t;console.log("Signed out successfully")}catch(t){console.error("Sign out failed:",t)}},async refreshSession(){const{data:t,error:e}=await He.auth.refreshSession();if(e){console.error("Failed to refresh session:",e);return}this.session=t.session,this.user=t.session?.user??null},async fetchProfile(){if(!this.user)return;this.loadingProfile=!0,console.log("Fetching profile for user:",this.user.id);const{data:t,error:e}=await He.from("user_profiles").select("*").eq("user_id",this.user.id).single();console.log("Profile fetch result:",{data:t,error:e}),e&&e.code!=="PGRST116"&&console.error("Profile fetch error:",e),this.profile=t,this.loadingProfile=!1},async updateProfile(t){if(!this.user)return;const{data:e,error:s}=await He.from("user_profiles").update({...t,updated_at:new Date().toISOString()}).eq("user_id",this.user.id).select().single();if(s)throw s;this.profile=e},async createProfile(t){if(console.log("Creating profile:",t),!this.user)return null;const{data:e,error:s}=await He.from("user_profiles").insert({...t,user_id:this.user.id,email:this.user.email,updated_at:new Date().toISOString(),created_at:new Date().toISOString()}).select().single();return s||(this.profile=e,console.log("Created profile:",this.profile),e)}}}),np="/icons/user-icon.svg",Ui=Dl("theme",()=>{const t=le(!1),e=le(!1),s=()=>t.value?"dark":"light",n=()=>{if(e.value)return;const c=localStorage.getItem("kfkspel-theme"),u=window.matchMedia("(prefers-color-scheme: dark)");c&&["light","dark"].includes(c)?t.value=c==="dark":t.value=u.matches,o(),u.addEventListener("change",d=>{localStorage.getItem("kfkspel-theme")||(t.value=d.matches)}),yt(t,()=>{o(),a()}),e.value=!0},r=()=>{t.value=!t.value},i=c=>{(c==="light"||c==="dark")&&(t.value=c==="dark")},o=()=>{if(typeof document>"u")return;const c=document.documentElement;t.value?(c.classList.add("dark-theme"),c.classList.remove("light-theme")):(c.classList.add("light-theme"),c.classList.remove("dark-theme"))},a=()=>{localStorage.setItem("kfkspel-theme",s())},l=()=>{localStorage.removeItem("kfkspel-theme");const c=window.matchMedia("(prefers-color-scheme: dark)");t.value=c.matches};return{isDarkMode:Vn(t),initialized:Vn(e),currentTheme:s,init:n,toggleTheme:r,setTheme:i,clearSavedTheme:l}}),zs=(t,e)=>{const s=t.__vccOpts||t;for(const[n,r]of e)s[n]=r;return s},rp={class:"theme-toggle-section"},ip={class:"theme-icon"},op={class:"theme-text"},ap={key:0,class:"user-greeting"},lp={key:1,class:"user-options"},cp={key:2,class:"user-options"},up={__name:"Navbar",emits:["updateAuthMode"],setup(t,{emit:e}){const s=xn(),n=Ui(),r=le(""),i=le(!1),o=e;function a(l){r.value=l,o("updateAuthMode",l)}return(l,c)=>{const u=xi("router-link");return re(),oe("nav",null,[ke(u,{to:"/"},{default:Ct(()=>[...c[6]||(c[6]=[Ie("Hem",-1)])]),_:1}),ke(u,{to:"/feedback"},{default:Ct(()=>[...c[7]||(c[7]=[Ie("💭 Feedback",-1)])]),_:1}),_("div",{class:"user-menu",onMouseenter:c[4]||(c[4]=d=>i.value=!0),onMouseleave:c[5]||(c[5]=d=>i.value=!1)},[c[8]||(c[8]=_("button",{class:"user-icon-button"},[_("img",{src:np,alt:"User Menu",class:"user-icon"})],-1)),_("div",{class:Fe(["user-dropdown",{show:i.value}])},[_("div",rp,[_("button",{onClick:c[0]||(c[0]=d=>qe(n).toggleTheme()),class:"theme-toggle-btn"},[_("span",ip,Q(qe(n).isDarkMode?"☀️":"🌙"),1),_("span",op,Q(qe(n).isDarkMode?"Ljust läge":"Mörkt läge"),1)])]),qe(s).isAuthed?(re(),oe("div",ap,[_("p",null,"Välkommen, "+Q(qe(s).profile?.username||"Användare")+"!",1)])):(re(),oe("div",lp,[_("button",{onClick:c[1]||(c[1]=d=>(r.value=a("login"),i.value=!1))}," Logga In "),_("button",{onClick:c[2]||(c[2]=d=>(r.value=a("signup"),i.value=!1))}," Skapa Konto ")])),qe(s).isAuthed?(re(),oe("div",cp,[_("button",{onClick:c[3]||(c[3]=d=>(qe(s).signOut(),i.value=!1))},"Logga Ut")])):Ee("",!0)],2)],32)])}}},dp=zs(up,[["__scopeId","data-v-96378f2e"]]),hp={class:"input-box"},fp={class:"input-box"},pp={key:0,class:"input-box"},gp={class:"character-counter"},mp={key:1,class:"input-box"},vp={type:"submit",class:"submit-button"},_p={key:2,class:"error-message"},yp={__name:"AuthForms",props:{mode:{type:String,default:"login",validator:t=>["login","signup",""].includes(t)}},emits:["close","success"],setup(t,{emit:e}){const s=xn(),n=t,r=e,i=le(""),o=le(""),a=le(""),l=le(""),c=le(""),u=le(null);async function d(){if(console.log("Form submitted:",{email:i.value,password:o.value,username:a.value,fullName:l.value}),n.mode==="signup"){if(!a.value||a.value.trim()===""){c.value="Du måste ha ett användarnamn";return}if(a.value.length>20){c.value="Användarnamnet måste vara 20 tecken eller färre";return}const f={username:a.value,fullName:l.value},{data:m,error:S}=await s.signUp(i.value,o.value,f);if(S){console.error("Signup error:",S),c.value=h(S.code)||S.message||"Kunde inte registrera användare";return}if(u.value=m.user,console.log("User signed up:",u.value),!u.value){c.value="Användarregistrering misslyckades";return}const E={full_name:l.value,username:a.value},$=await s.createProfile(E);if($){console.error("Profile creation error:",$),c.value=$.message||"Kunde inte skapa profil";return}await s.completeSignup(),console.log("Signup completed successfully"),r("success"),r("close")}else if(n.mode==="login"){const{data:f,error:m}=await s.signIn(i.value,o.value);if(m){c.value=m.message;return}console.log("Login successful:",f),u.value=f.user,console.log("User logged in:",u.value),r("success"),r("close")}else{c.value="Invalid authentication mode";return}}function h(f){return{user_already_exists:"Användaren används redan",email_address_invalid:"Ogiltig e-postadress",weak_password:"Lösenordet är för svagt",email_exists:"E-postadressen används redan",same_password:"Det nya lösenordet måste vara annorlunda än det gamla"}[f]||null}return(f,m)=>(re(),oe("form",{onSubmit:Os(d,["prevent"])},[_("button",{type:"button",class:"close-form-button",onClick:m[0]||(m[0]=S=>f.$emit("close"))},"×"),_("h2",null,Q(t.mode==="login"?"Logga In":"Skapa Konto"),1),_("div",hp,[We(_("input",{type:"email","onUpdate:modelValue":m[1]||(m[1]=S=>i.value=S),placeholder:"E-post",required:""},null,512),[[Wt,i.value]]),m[5]||(m[5]=_("i",{class:"bx bxs-envelope"},null,-1))]),_("div",fp,[We(_("input",{type:"password","onUpdate:modelValue":m[2]||(m[2]=S=>o.value=S),placeholder:"Lösenord",required:""},null,512),[[Wt,o.value]]),m[6]||(m[6]=_("i",{class:"bx bx-lock"},null,-1))]),t.mode==="signup"?(re(),oe("div",pp,[We(_("input",{type:"text","onUpdate:modelValue":m[3]||(m[3]=S=>a.value=S),placeholder:"Användarnamn",maxlength:"20",required:""},null,512),[[Wt,a.value]]),m[7]||(m[7]=_("i",{class:"bx bx-user"},null,-1)),_("span",gp,Q(a.value.length)+"/20",1)])):Ee("",!0),t.mode==="signup"?(re(),oe("div",mp,[We(_("input",{type:"text","onUpdate:modelValue":m[4]||(m[4]=S=>l.value=S),placeholder:"För och efternamn (Frivillig)"},null,512),[[Wt,l.value]]),m[8]||(m[8]=_("i",{class:"bx bx-user"},null,-1))])):Ee("",!0),_("button",vp,Q(t.mode==="login"?"Login":"Create Account"),1),c.value?(re(),oe("p",_p,Q(c.value),1)):Ee("",!0)],32))}},bp=zs(yp,[["__scopeId","data-v-a31956dc"]]),wp={id:"app"},Sp={__name:"App",setup(t){const e=le(""),s=xn(),n=Ui();return document.addEventListener("visibilitychange",async()=>{if(console.log("Document visibility changed:",document.visibilityState),document.visibilityState==="visible"&&s.isAuthed){const{data:r,error:i}=await s.refreshSession();i?console.warn("Session refresh failed:",i):console.log("Session refreshed successfully")}}),Fs(async()=>{n.init()}),(r,i)=>{const o=xi("RouterView");return re(),oe(Ue,null,[ke(dp,{class:"navbar",onUpdateAuthMode:i[0]||(i[0]=a=>e.value=a)}),We(ke(bp,{class:"auth-form",mode:e.value,onClose:i[1]||(i[1]=a=>e.value="")},null,8,["mode"]),[[Ed,e.value!==""]]),_("div",wp,[ke(o)])],64)}}};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Cs=typeof document<"u";function sc(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function kp(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&sc(t.default)}const pe=Object.assign;function Ur(t,e){const s={};for(const n in e){const r=e[n];s[n]=dt(r)?r.map(t):t(r)}return s}const ln=()=>{},dt=Array.isArray,nc=/#/g,Ep=/&/g,Tp=/\//g,Pp=/=/g,xp=/\?/g,rc=/\+/g,Cp=/%5B/g,Ap=/%5D/g,ic=/%5E/g,Op=/%60/g,oc=/%7B/g,Rp=/%7C/g,ac=/%7D/g,$p=/%20/g;function Ni(t){return encodeURI(""+t).replace(Rp,"|").replace(Cp,"[").replace(Ap,"]")}function Ip(t){return Ni(t).replace(oc,"{").replace(ac,"}").replace(ic,"^")}function ui(t){return Ni(t).replace(rc,"%2B").replace($p,"+").replace(nc,"%23").replace(Ep,"%26").replace(Op,"`").replace(oc,"{").replace(ac,"}").replace(ic,"^")}function jp(t){return ui(t).replace(Pp,"%3D")}function Mp(t){return Ni(t).replace(nc,"%23").replace(xp,"%3F")}function Lp(t){return t==null?"":Mp(t).replace(Tp,"%2F")}function yn(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Dp=/\/$/,Up=t=>t.replace(Dp,"");function Nr(t,e,s="/"){let n,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),r=t(i)),a>-1&&(n=n||e.slice(0,a),o=e.slice(a,e.length)),n=zp(n??e,s),{fullPath:n+(i&&"?")+i+o,path:n,query:r,hash:yn(o)}}function Np(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function sa(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Fp(t,e,s){const n=e.matched.length-1,r=s.matched.length-1;return n>-1&&n===r&&Ls(e.matched[n],s.matched[r])&&lc(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function Ls(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function lc(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!Bp(t[s],e[s]))return!1;return!0}function Bp(t,e){return dt(t)?na(t,e):dt(e)?na(e,t):t===e}function na(t,e){return dt(e)?t.length===e.length&&t.every((s,n)=>s===e[n]):t.length===1&&t[0]===e}function zp(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),n=t.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let i=s.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+n.slice(o).join("/")}const Ut={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var bn;(function(t){t.pop="pop",t.push="push"})(bn||(bn={}));var cn;(function(t){t.back="back",t.forward="forward",t.unknown=""})(cn||(cn={}));function Hp(t){if(!t)if(Cs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Up(t)}const qp=/^[^#]+#/;function Vp(t,e){return t.replace(qp,"#")+e}function Wp(t,e){const s=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-s.left-(e.left||0),top:n.top-s.top-(e.top||0)}}const vr=()=>({left:window.scrollX,top:window.scrollY});function Kp(t){let e;if("el"in t){const s=t.el,n=typeof s=="string"&&s.startsWith("#"),r=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!r)return;e=Wp(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function ra(t,e){return(history.state?history.state.position-e:-1)+t}const di=new Map;function Gp(t,e){di.set(t,e)}function Jp(t){const e=di.get(t);return di.delete(t),e}let Yp=()=>location.protocol+"//"+location.host;function cc(t,e){const{pathname:s,search:n,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),sa(l,"")}return sa(s,t)+n+r}function Xp(t,e,s,n){let r=[],i=[],o=null;const a=({state:h})=>{const f=cc(t,location),m=s.value,S=e.value;let E=0;if(h){if(s.value=f,e.value=h,o&&o===m){o=null;return}E=S?h.position-S.position:0}else n(f);r.forEach($=>{$(s.value,m,{delta:E,type:bn.pop,direction:E?E>0?cn.forward:cn.back:cn.unknown})})};function l(){o=s.value}function c(h){r.push(h);const f=()=>{const m=r.indexOf(h);m>-1&&r.splice(m,1)};return i.push(f),f}function u(){const{history:h}=window;h.state&&h.replaceState(pe({},h.state,{scroll:vr()}),"")}function d(){for(const h of i)h();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function ia(t,e,s,n=!1,r=!1){return{back:t,current:e,forward:s,replaced:n,position:window.history.length,scroll:r?vr():null}}function Qp(t){const{history:e,location:s}=window,n={value:cc(t,s)},r={value:e.state};r.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=t.indexOf("#"),h=d>-1?(s.host&&document.querySelector("base")?t:t.slice(d))+l:Yp()+t+l;try{e[u?"replaceState":"pushState"](c,"",h),r.value=c}catch(f){console.error(f),s[u?"replace":"assign"](h)}}function o(l,c){const u=pe({},e.state,ia(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});i(l,u,!0),n.value=l}function a(l,c){const u=pe({},r.value,e.state,{forward:l,scroll:vr()});i(u.current,u,!0);const d=pe({},ia(n.value,l,null),{position:u.position+1},c);i(l,d,!1),n.value=l}return{location:n,state:r,push:a,replace:o}}function Zp(t){t=Hp(t);const e=Qp(t),s=Xp(t,e.state,e.location,e.replace);function n(i,o=!0){o||s.pauseListeners(),history.go(i)}const r=pe({location:"",base:t,go:n,createHref:Vp.bind(null,t)},e,s);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function eg(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),Zp(t)}function tg(t){return typeof t=="string"||t&&typeof t=="object"}function uc(t){return typeof t=="string"||typeof t=="symbol"}const dc=Symbol("");var oa;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(oa||(oa={}));function Ds(t,e){return pe(new Error,{type:t,[dc]:!0},e)}function Et(t,e){return t instanceof Error&&dc in t&&(e==null||!!(t.type&e))}const aa="[^/]+?",sg={sensitive:!1,strict:!1,start:!0,end:!0},ng=/[.+*?^${}()[\]/\\]/g;function rg(t,e){const s=pe({},sg,e),n=[];let r=s.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];s.strict&&!c.length&&(r+="/");for(let d=0;d<c.length;d++){const h=c[d];let f=40+(s.sensitive?.25:0);if(h.type===0)d||(r+="/"),r+=h.value.replace(ng,"\\$&"),f+=40;else if(h.type===1){const{value:m,repeatable:S,optional:E,regexp:$}=h;i.push({name:m,repeatable:S,optional:E});const I=$||aa;if(I!==aa){f+=10;try{new RegExp(`(${I})`)}catch(g){throw new Error(`Invalid custom RegExp for param "${m}" (${I}): `+g.message)}}let b=S?`((?:${I})(?:/(?:${I}))*)`:`(${I})`;d||(b=E&&c.length<2?`(?:/${b})`:"/"+b),E&&(b+="?"),r+=b,f+=20,E&&(f+=-8),S&&(f+=-20),I===".*"&&(f+=-50)}u.push(f)}n.push(u)}if(s.strict&&s.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}s.strict||(r+="/?"),s.end?r+="$":s.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,s.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let h=1;h<u.length;h++){const f=u[h]||"",m=i[h-1];d[m.name]=f&&m.repeatable?f.split("/"):f}return d}function l(c){let u="",d=!1;for(const h of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const f of h)if(f.type===0)u+=f.value;else if(f.type===1){const{value:m,repeatable:S,optional:E}=f,$=m in c?c[m]:"";if(dt($)&&!S)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const I=dt($)?$.join("/"):$;if(!I)if(E)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=I}}return u||"/"}return{re:o,score:n,keys:i,parse:a,stringify:l}}function ig(t,e){let s=0;for(;s<t.length&&s<e.length;){const n=e[s]-t[s];if(n)return n;s++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function hc(t,e){let s=0;const n=t.score,r=e.score;for(;s<n.length&&s<r.length;){const i=ig(n[s],r[s]);if(i)return i;s++}if(Math.abs(r.length-n.length)===1){if(la(n))return 1;if(la(r))return-1}return r.length-n.length}function la(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const og={type:0,value:""},ag=/[a-zA-Z0-9_]/;function lg(t){if(!t)return[[]];if(t==="/")return[[og]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${s})/"${c}": ${f}`)}let s=0,n=s;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,c="",u="";function d(){c&&(s===0?i.push({type:0,value:c}):s===1||s===2||s===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),s=1):h();break;case 4:h(),s=n;break;case 1:l==="("?s=2:ag.test(l)?h():(d(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:s=3:u+=l;break;case 3:d(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return s===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),r}function cg(t,e,s){const n=rg(lg(t.path),s),r=pe(n,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function ug(t,e){const s=[],n=new Map;e=ha({strict:!1,end:!0,sensitive:!1},e);function r(d){return n.get(d)}function i(d,h,f){const m=!f,S=ua(d);S.aliasOf=f&&f.record;const E=ha(e,d),$=[S];if("alias"in d){const g=typeof d.alias=="string"?[d.alias]:d.alias;for(const D of g)$.push(ua(pe({},S,{components:f?f.record.components:S.components,path:D,aliasOf:f?f.record:S})))}let I,b;for(const g of $){const{path:D}=g;if(h&&D[0]!=="/"){const V=h.record.path,J=V[V.length-1]==="/"?"":"/";g.path=h.record.path+(D&&J+D)}if(I=cg(g,h,E),f?f.alias.push(I):(b=b||I,b!==I&&b.alias.push(I),m&&d.name&&!da(I)&&o(d.name)),fc(I)&&l(I),S.children){const V=S.children;for(let J=0;J<V.length;J++)i(V[J],I,f&&f.children[J])}f=f||I}return b?()=>{o(b)}:ln}function o(d){if(uc(d)){const h=n.get(d);h&&(n.delete(d),s.splice(s.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=s.indexOf(d);h>-1&&(s.splice(h,1),d.record.name&&n.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return s}function l(d){const h=fg(d,s);s.splice(h,0,d),d.record.name&&!da(d)&&n.set(d.record.name,d)}function c(d,h){let f,m={},S,E;if("name"in d&&d.name){if(f=n.get(d.name),!f)throw Ds(1,{location:d});E=f.record.name,m=pe(ca(h.params,f.keys.filter(b=>!b.optional).concat(f.parent?f.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),d.params&&ca(d.params,f.keys.map(b=>b.name))),S=f.stringify(m)}else if(d.path!=null)S=d.path,f=s.find(b=>b.re.test(S)),f&&(m=f.parse(S),E=f.record.name);else{if(f=h.name?n.get(h.name):s.find(b=>b.re.test(h.path)),!f)throw Ds(1,{location:d,currentLocation:h});E=f.record.name,m=pe({},h.params,d.params),S=f.stringify(m)}const $=[];let I=f;for(;I;)$.unshift(I.record),I=I.parent;return{name:E,path:S,params:m,matched:$,meta:hg($)}}t.forEach(d=>i(d));function u(){s.length=0,n.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:r}}function ca(t,e){const s={};for(const n of e)n in t&&(s[n]=t[n]);return s}function ua(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:dg(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function dg(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const n in t.components)e[n]=typeof s=="object"?s[n]:s;return e}function da(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function hg(t){return t.reduce((e,s)=>pe(e,s.meta),{})}function ha(t,e){const s={};for(const n in t)s[n]=n in e?e[n]:t[n];return s}function fg(t,e){let s=0,n=e.length;for(;s!==n;){const i=s+n>>1;hc(t,e[i])<0?n=i:s=i+1}const r=pg(t);return r&&(n=e.lastIndexOf(r,n-1)),n}function pg(t){let e=t;for(;e=e.parent;)if(fc(e)&&hc(t,e)===0)return e}function fc({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function gg(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const i=n[r].replace(rc," "),o=i.indexOf("="),a=yn(o<0?i:i.slice(0,o)),l=o<0?null:yn(i.slice(o+1));if(a in e){let c=e[a];dt(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function fa(t){let e="";for(let s in t){const n=t[s];if(s=jp(s),n==null){n!==void 0&&(e+=(e.length?"&":"")+s);continue}(dt(n)?n.map(i=>i&&ui(i)):[n&&ui(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+s,i!=null&&(e+="="+i))})}return e}function mg(t){const e={};for(const s in t){const n=t[s];n!==void 0&&(e[s]=dt(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return e}const vg=Symbol(""),pa=Symbol(""),_r=Symbol(""),pc=Symbol(""),hi=Symbol("");function Ks(){let t=[];function e(n){return t.push(n),()=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Ht(t,e,s,n,r,i=o=>o()){const o=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(Ds(4,{from:s,to:e})):h instanceof Error?l(h):tg(h)?l(Ds(2,{from:e,to:h})):(o&&n.enterCallbacks[r]===o&&typeof h=="function"&&o.push(h),a())},u=i(()=>t.call(n&&n.instances[r],e,s,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(h=>l(h))})}function Fr(t,e,s,n,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(sc(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Ht(u,s,n,o,a,r))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=kp(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&Ht(f,s,n,o,a,r)()}))}}return i}function ga(t){const e=ct(_r),s=ct(pc),n=Me(()=>{const l=qe(t.to);return e.resolve(l)}),r=Me(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],d=s.matched;if(!u||!d.length)return-1;const h=d.findIndex(Ls.bind(null,u));if(h>-1)return h;const f=ma(l[c-2]);return c>1&&ma(u)===f&&d[d.length-1].path!==f?d.findIndex(Ls.bind(null,l[c-2])):h}),i=Me(()=>r.value>-1&&Sg(s.params,n.value.params)),o=Me(()=>r.value>-1&&r.value===s.matched.length-1&&lc(s.params,n.value.params));function a(l={}){if(wg(l)){const c=e[qe(t.replace)?"replace":"push"](qe(t.to)).catch(ln);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:Me(()=>n.value.href),isActive:i,isExactActive:o,navigate:a}}function _g(t){return t.length===1?t[0]:t}const yg=Ns({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ga,setup(t,{slots:e}){const s=ds(ga(t)),{options:n}=ct(_r),r=Me(()=>({[va(t.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[va(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=e.default&&_g(e.default(s));return t.custom?i:$i("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:r.value},i)}}}),bg=yg;function wg(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Sg(t,e){for(const s in e){const n=e[s],r=t[s];if(typeof n=="string"){if(n!==r)return!1}else if(!dt(r)||r.length!==n.length||n.some((i,o)=>i!==r[o]))return!1}return!0}function ma(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const va=(t,e,s)=>t??e??s,kg=Ns({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const n=ct(hi),r=Me(()=>t.route||n.value),i=ct(pa,0),o=Me(()=>{let c=qe(i);const{matched:u}=r.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=Me(()=>r.value.matched[o.value]);Nn(pa,Me(()=>o.value+1)),Nn(vg,a),Nn(hi,r);const l=le();return yt(()=>[l.value,a.value,t.name],([c,u,d],[h,f,m])=>{u&&(u.instances[d]=c,f&&f!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!Ls(u,f)||!h)&&(u.enterCallbacks[d]||[]).forEach(S=>S(c))},{flush:"post"}),()=>{const c=r.value,u=t.name,d=a.value,h=d&&d.components[u];if(!h)return _a(s.default,{Component:h,route:c});const f=d.props[u],m=f?f===!0?c.params:typeof f=="function"?f(c):f:null,E=$i(h,pe({},m,e,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return _a(s.default,{Component:E,route:c})||E}}});function _a(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const Eg=kg;function Tg(t){const e=ug(t.routes,t),s=t.parseQuery||gg,n=t.stringifyQuery||fa,r=t.history,i=Ks(),o=Ks(),a=Ks(),l=Gc(Ut);let c=Ut;Cs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Ur.bind(null,y=>""+y),d=Ur.bind(null,Lp),h=Ur.bind(null,yn);function f(y,T){let O,L;return uc(y)?(O=e.getRecordMatcher(y),L=T):L=y,e.addRoute(L,O)}function m(y){const T=e.getRecordMatcher(y);T&&e.removeRoute(T)}function S(){return e.getRoutes().map(y=>y.record)}function E(y){return!!e.getRecordMatcher(y)}function $(y,T){if(T=pe({},T||l.value),typeof y=="string"){const w=Nr(s,y,T.path),P=e.resolve({path:w.path},T),A=r.createHref(w.fullPath);return pe(w,P,{params:h(P.params),hash:yn(w.hash),redirectedFrom:void 0,href:A})}let O;if(y.path!=null)O=pe({},y,{path:Nr(s,y.path,T.path).path});else{const w=pe({},y.params);for(const P in w)w[P]==null&&delete w[P];O=pe({},y,{params:d(w)}),T.params=d(T.params)}const L=e.resolve(O,T),q=y.hash||"";L.params=u(h(L.params));const p=Np(n,pe({},y,{hash:Ip(q),path:L.path})),v=r.createHref(p);return pe({fullPath:p,hash:q,query:n===fa?mg(y.query):y.query||{}},L,{redirectedFrom:void 0,href:v})}function I(y){return typeof y=="string"?Nr(s,y,l.value.path):pe({},y)}function b(y,T){if(c!==y)return Ds(8,{from:T,to:y})}function g(y){return J(y)}function D(y){return g(pe(I(y),{replace:!0}))}function V(y){const T=y.matched[y.matched.length-1];if(T&&T.redirect){const{redirect:O}=T;let L=typeof O=="function"?O(y):O;return typeof L=="string"&&(L=L.includes("?")||L.includes("#")?L=I(L):{path:L},L.params={}),pe({query:y.query,hash:y.hash,params:L.path!=null?{}:y.params},L)}}function J(y,T){const O=c=$(y),L=l.value,q=y.state,p=y.force,v=y.replace===!0,w=V(O);if(w)return J(pe(I(w),{state:typeof w=="object"?pe({},q,w.state):q,force:p,replace:v}),T||O);const P=O;P.redirectedFrom=T;let A;return!p&&Fp(n,L,O)&&(A=Ds(16,{to:P,from:L}),$e(L,L,!0,!1)),(A?Promise.resolve(A):j(P,L)).catch(x=>Et(x)?Et(x,2)?x:et(x):fe(x,P,L)).then(x=>{if(x){if(Et(x,2))return J(pe({replace:v},I(x.to),{state:typeof x.to=="object"?pe({},q,x.to.state):q,force:p}),T||P)}else x=C(P,L,!0,v,q);return M(P,L,x),x})}function ee(y,T){const O=b(y,T);return O?Promise.reject(O):Promise.resolve()}function z(y){const T=U.values().next().value;return T&&typeof T.runWithContext=="function"?T.runWithContext(y):y()}function j(y,T){let O;const[L,q,p]=Pg(y,T);O=Fr(L.reverse(),"beforeRouteLeave",y,T);for(const w of L)w.leaveGuards.forEach(P=>{O.push(Ht(P,y,T))});const v=ee.bind(null,y,T);return O.push(v),F(O).then(()=>{O=[];for(const w of i.list())O.push(Ht(w,y,T));return O.push(v),F(O)}).then(()=>{O=Fr(q,"beforeRouteUpdate",y,T);for(const w of q)w.updateGuards.forEach(P=>{O.push(Ht(P,y,T))});return O.push(v),F(O)}).then(()=>{O=[];for(const w of p)if(w.beforeEnter)if(dt(w.beforeEnter))for(const P of w.beforeEnter)O.push(Ht(P,y,T));else O.push(Ht(w.beforeEnter,y,T));return O.push(v),F(O)}).then(()=>(y.matched.forEach(w=>w.enterCallbacks={}),O=Fr(p,"beforeRouteEnter",y,T,z),O.push(v),F(O))).then(()=>{O=[];for(const w of o.list())O.push(Ht(w,y,T));return O.push(v),F(O)}).catch(w=>Et(w,8)?w:Promise.reject(w))}function M(y,T,O){a.list().forEach(L=>z(()=>L(y,T,O)))}function C(y,T,O,L,q){const p=b(y,T);if(p)return p;const v=T===Ut,w=Cs?history.state:{};O&&(L||v?r.replace(y.fullPath,pe({scroll:v&&w&&w.scroll},q)):r.push(y.fullPath,q)),l.value=y,$e(y,T,O,v),et()}let te;function he(){te||(te=r.listen((y,T,O)=>{if(!R.listening)return;const L=$(y),q=V(L);if(q){J(pe(q,{replace:!0,force:!0}),L).catch(ln);return}c=L;const p=l.value;Cs&&Gp(ra(p.fullPath,O.delta),vr()),j(L,p).catch(v=>Et(v,12)?v:Et(v,2)?(J(pe(I(v.to),{force:!0}),L).then(w=>{Et(w,20)&&!O.delta&&O.type===bn.pop&&r.go(-1,!1)}).catch(ln),Promise.reject()):(O.delta&&r.go(-O.delta,!1),fe(v,L,p))).then(v=>{v=v||C(L,p,!1),v&&(O.delta&&!Et(v,8)?r.go(-O.delta,!1):O.type===bn.pop&&Et(v,20)&&r.go(-1,!1)),M(L,p,v)}).catch(ln)}))}let Te=Ks(),me=Ks(),ne;function fe(y,T,O){et(y);const L=me.list();return L.length?L.forEach(q=>q(y,T,O)):console.error(y),Promise.reject(y)}function rt(){return ne&&l.value!==Ut?Promise.resolve():new Promise((y,T)=>{Te.add([y,T])})}function et(y){return ne||(ne=!y,he(),Te.list().forEach(([T,O])=>y?O(y):T()),Te.reset()),y}function $e(y,T,O,L){const{scrollBehavior:q}=t;if(!Cs||!q)return Promise.resolve();const p=!O&&Jp(ra(y.fullPath,0))||(L||!O)&&history.state&&history.state.scroll||null;return cr().then(()=>q(y,T,p)).then(v=>v&&Kp(v)).catch(v=>fe(v,y,T))}const K=y=>r.go(y);let k;const U=new Set,R={currentRoute:l,listening:!0,addRoute:f,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:E,getRoutes:S,resolve:$,options:t,push:g,replace:D,go:K,back:()=>K(-1),forward:()=>K(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:me.add,isReady:rt,install(y){const T=this;y.component("RouterLink",bg),y.component("RouterView",Eg),y.config.globalProperties.$router=T,Object.defineProperty(y.config.globalProperties,"$route",{enumerable:!0,get:()=>qe(l)}),Cs&&!k&&l.value===Ut&&(k=!0,g(r.location).catch(q=>{}));const O={};for(const q in Ut)Object.defineProperty(O,q,{get:()=>l.value[q],enumerable:!0});y.provide(_r,T),y.provide(pc,qa(O)),y.provide(hi,l);const L=y.unmount;U.add(y),y.unmount=function(){U.delete(y),U.size<1&&(c=Ut,te&&te(),te=null,l.value=Ut,k=!1,ne=!1),L()}}};function F(y){return y.reduce((T,O)=>T.then(()=>z(O)),Promise.resolve())}return R}function Pg(t,e){const s=[],n=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>Ls(c,a))?n.push(a):s.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Ls(c,l))||r.push(l))}return[s,n,r]}function gc(){return ct(_r)}const xg={key:1,class:"debug-overlay"},Cg={class:"debug-section"},Ag={class:"debug-row"},Og={class:"debug-row"},Rg={class:"debug-row"},$g={class:"debug-section"},Ig={class:"debug-row"},jg={class:"debug-row"},Mg={class:"debug-section"},Lg={class:"debug-row"},Dg={class:"debug-row"},Ug={class:"debug-section"},Ng={class:"debug-row"},Fg={class:"debug-row"},Bg={class:"debug-section"},zg={class:"debug-row"},Hg={class:"debug-row"},qg={class:"debug-row"},Vg={class:"debug-section"},Wg=Ns({__name:"HamiltonianSnake",props:{autoStart:{type:Boolean,default:!0},fps:{default:12},visualCycle:{type:Boolean,default:!0},visualPath:{type:Boolean,default:!0},showGeneration:{type:Boolean,default:!0},generationDelay:{default:50},debugMode:{type:Boolean,default:!1}},setup(t,{expose:e}){const s=t;yt(()=>s.visualCycle,K=>{typeof window<"u"&&(window.visualCycle=K)}),yt(()=>s.visualPath,K=>{typeof window<"u"&&(window.visualPath=K)}),yt(()=>s.showGeneration,async K=>{g&&g.hamilDone?await j():s.autoStart&&await z()}),yt(()=>s.fps,K=>{m&&(clearInterval(m),m=0),!c&&g&&g.hamilDone&&(m=setInterval(C,1e3/K))});const n=le(),r=le(typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1),i=le(""),o=le(!1),a=le(null),l={light:{background:"#ffffff",gridLine:"#e0e0e0",hamiltonianPath:"#1f6124",snakePath:"#666666",mazeVisited:"#76b366",mazeUnvisited:"#f5f5f5",mazeCurrent:"#d32f2f",mazeWall:"#333333",textColor:"#333333"},dark:{background:"#121212",gridLine:"#404040",hamiltonianPath:"#76b366",snakePath:"#cccccc",mazeVisited:"#2d803a",mazeUnvisited:"#2a2a2a",mazeCurrent:"#f44336",mazeWall:"#e0e0e0",textColor:"#e0e0e0"}};let c=!1,u=20,d=20,h=25;performance.now();let f,m,S,E=[],$,I,b=[],g;class D{x;y;visited=!1;nextNode=null;neighbors=[];walls=[!0,!0,!0,!0];constructor(k,U){this.x=k,this.y=U}}class V{selectedNode=null;grid=[];hamilDone=!1;hamilStart=null;hamilPath=[];mazeStart=null;mazeGrid=[];mazePath=[];snakePath=[];debugMode=!0;shortcutsTaken=0;totalMoves=0;constructor(){this.setup()}sleep(k){return new Promise(U=>setTimeout(U,k))}setup(){this.grid=[];for(let k=0;k<u;k++){this.grid.push([]);for(let U=0;U<d;U++)this.grid[k]?.push(new D(U,k))}for(let k=0;k<this.grid.length;k++){const U=this.grid[k];if(U)for(let R=0;R<U.length;R++){const F=U[R];if(F){if(k>0){const y=this.grid[k-1]?.[R];y&&F.neighbors.push(y)}if(R<U.length-1){const y=this.grid[k]?.[R+1];y&&F.neighbors.push(y)}if(k<this.grid.length-1){const y=this.grid[k+1]?.[R];y&&F.neighbors.push(y)}if(R>0){const y=this.grid[k]?.[R-1];y&&F.neighbors.push(y)}}}}}async genMaze(){const k=Math.floor(u/2),U=Math.floor(d/2);this.mazeGrid=[];for(let y=0;y<k;y++){this.mazeGrid.push([]);for(let T=0;T<U;T++)this.mazeGrid[y]?.push(new D(T,y))}for(let y=0;y<this.mazeGrid.length;y++){const T=this.mazeGrid[y];if(T)for(let O=0;O<T.length;O++){const L=T[O];if(L){if(y>0){const q=this.mazeGrid[y-1]?.[O];q&&L.neighbors.push(q)}if(O<T.length-1){const q=this.mazeGrid[y]?.[O+1];q&&L.neighbors.push(q)}if(y<this.mazeGrid.length-1){const q=this.mazeGrid[y+1]?.[O];q&&L.neighbors.push(q)}if(O>0){const q=this.mazeGrid[y]?.[O-1];q&&L.neighbors.push(q)}}}}const R=this.mazeGrid[Math.floor(Math.random()*this.mazeGrid.length)];R&&R.length>0?this.mazeStart=R[Math.floor(Math.random()*R.length)]||null:this.mazeStart=null,this.mazeStart&&(this.mazePath=[this.mazeStart],this.mazeStart.visited=!0,await this.genMazeFunc(this.mazeStart),console.log("Maze generation complete."));for(const y of this.grid)for(const T of y)T.visited=!1;for(const y of this.mazeGrid)for(const T of y)T.visited=!1;const F=this.grid[0];F&&F[0]?(this.hamilStart=F[0],this.hamilPath=[this.hamilStart],await this.genCycleFromMaze(this.hamilStart,1)?(console.log("Hamiltonian cycle generated successfully!"),this.hamilPath.length===u*d?this.hamilDone=!0:console.warn("Cycle length mismatch")):(console.error("Could not generate Hamiltonian cycle"),this.hamilDone=!1)):(console.error("Could not initialize grid properly"),this.hamilDone=!1)}async genMazeFunc(k){if(s.showGeneration){this.drawMaze(k);const R=J();f.fillStyle=R.textColor,f.font=`${Math.max(12,h*.8)}px Arial`,f.textAlign="left",f.fillText("Generating Maze...",h*.5,h*.9),await this.sleep(s.generationDelay)}const U=k.neighbors.filter(R=>!R.visited);if(U.length>0){const R=U[Math.floor(Math.random()*U.length)];return R&&(R.visited=!0,this.removeWalls(k,R),this.mazePath.push(R),await this.genMazeFunc(R)),!0}else{if(this.mazePath.length>1){this.mazePath.pop();const R=this.mazePath[this.mazePath.length-1];R&&await this.genMazeFunc(R)}return!0}}drawHamiltonianGeneration(k){this.drawMaze();const U=J();f.strokeStyle=U.gridLine,f.lineWidth=1;for(let R=0;R<=d;R++)f.beginPath(),f.moveTo(R*h,0),f.lineTo(R*h,u*h),f.stroke();for(let R=0;R<=u;R++)f.beginPath(),f.moveTo(0,R*h),f.lineTo(d*h,R*h),f.stroke();f.fillStyle=U.mazeVisited;for(const R of this.hamilPath)R.visited&&f.fillRect(R.x*h+2,R.y*h+2,h-4,h-4);if(this.hamilPath.length>1&&this.hamilPath[0]){f.strokeStyle="#4466bb",f.lineWidth=Math.max(2,h/10),f.beginPath(),f.moveTo(this.hamilPath[0].x*h+h/2,this.hamilPath[0].y*h+h/2);for(let R=1;R<this.hamilPath.length;R++){const F=this.hamilPath[R];F&&f.lineTo(F.x*h+h/2,F.y*h+h/2)}f.stroke()}k&&(f.fillStyle=U.mazeCurrent,f.fillRect(k.x*h+1,k.y*h+1,h-2,h-2)),f.fillStyle=U.textColor,f.font=`${Math.max(12,h*.8)}px Arial`,f.textAlign="left",f.fillText(`Generating Hamiltonian Cycle... (${this.hamilPath.length}/${u*d})`,h*.5,h*.9)}drawMaze(k=null){const U=J();f.clearRect(0,0,d*h,u*h);const R=Math.floor(u/2),F=Math.floor(d/2),y=d/F,T=u/R;for(const O of this.mazeGrid)for(const L of O){const q=L.x*y,p=L.y*T;L===k?(f.fillStyle=U.mazeCurrent,f.fillRect(q*h,p*h,y*h,T*h)):L.visited&&(f.fillStyle=U.mazeVisited,f.fillRect(q*h,p*h,y*h,T*h)),f.strokeStyle=U.mazeWall,f.lineWidth=2,f.beginPath();const v=q*h,w=p*h,P=y*h,A=T*h;L.walls[0]&&(f.moveTo(v,w),f.lineTo(v+P,w)),L.walls[1]&&(f.moveTo(v,w),f.lineTo(v,w+A)),L.walls[2]&&(f.moveTo(v,w+A),f.lineTo(v+P,w+A)),L.walls[3]&&(f.moveTo(v+P,w),f.lineTo(v+P,w+A)),f.stroke()}}removeWalls(k,U){const R=U.x-k.x,F=U.y-k.y;R===1?(k.walls[3]=!1,U.walls[1]=!1):R===-1?(k.walls[1]=!1,U.walls[3]=!1):F===-1?(k.walls[0]=!1,U.walls[2]=!1):F===1&&(k.walls[2]=!1,U.walls[0]=!1)}getEmergencyMove(k){return(k+1)%this.hamilPath.length}isShortcutSafe(k,U){let R=u*d;for(let F=0;F<E.length;F++){const y=E[F];if(!y||y[0]===void 0||y[1]===void 0)continue;const T=Math.floor(y[0]/h),O=Math.floor(y[1]/h);if(O<0||O>=this.grid.length||T<0||!this.grid[O]||T>=this.grid[O].length)continue;const L=this.grid[O][T];if(!L)continue;const q=this.hamilPath.indexOf(L);if(q===-1)continue;let p=this.getDistance(U,q);if(p===0)continue;const v=Math.ceil(E.length*1.05)-F;if(p<R&&(R=p),v>p)return{safetyCheckPassed:!1,snakeBodyIn:R}}return{safetyCheckPassed:!0,snakeBodyIn:R}}getMazeCell(k,U){const R=Math.floor(U/2),F=Math.floor(k/2);return R>=0&&R<this.mazeGrid.length&&F>=0&&this.mazeGrid[R]&&F<this.mazeGrid[R].length&&this.mazeGrid[R][F]||null}getDistance(k,U){return(U-k+this.hamilPath.length)%this.hamilPath.length}async genCycleFromMaze(k,U){if(s.showGeneration&&(this.drawHamiltonianGeneration(k),await this.sleep(s.generationDelay)),k.visited=!0,this.hamilPath.length===u*d){let y=!1;for(const T of k.neighbors)if(T===this.hamilStart){const O=T.x-k.x,L=T.y-k.y;let q=!0;if(L===1){const p=this.getMazeCell(k.x,k.y);(k.y+1)%2===0&&p?.walls[2]&&(q=!1)}else if(L===-1){const p=this.getMazeCell(k.x,k.y);k.y%2===0&&p?.walls[0]&&(q=!1)}else if(O===1){const p=this.getMazeCell(k.x,k.y);(k.x+1)%2===0&&p?.walls[3]&&(q=!1)}else if(O===-1){const p=this.getMazeCell(k.x,k.y);k.x%2===0&&p?.walls[1]&&(q=!1)}if(q){y=!0,k.nextNode=T;break}}return y?!0:(k.visited=!1,!1)}const R=k.neighbors.filter(y=>!y.visited),F=[];if(R.length>0){for(const y of R){const T=y.x-k.x,O=y.y-k.y;let L=0,q=!0,p=3;if(O===1){const v=this.getMazeCell(k.x,k.y);(k.y+1)%2===0&&v?.walls[2]&&(q=!1),q&&(L=0,p=U===1?0:U===0?1:U===3?2:3)}else if(O===-1){const v=this.getMazeCell(k.x,k.y);k.y%2===0&&v?.walls[0]&&(q=!1),q&&(L=2,p=U===3?0:U===2?1:U===1?2:3)}else if(T===1){const v=this.getMazeCell(k.x,k.y);(k.x+1)%2===0&&v?.walls[3]&&(q=!1),q&&(L=1,p=U===2?0:U===1?1:U===0?2:3)}else if(T===-1){const v=this.getMazeCell(k.x,k.y);k.x%2===0&&v?.walls[1]&&(q=!1),q&&(L=3,p=U===0?0:U===3?1:U===2?2:3)}q&&F.push([p,y,L])}F.sort((y,T)=>y[0]-T[0]);for(const y of F){const[,T,O]=y;if(this.hamilPath.push(T),k.nextNode=T,await this.genCycleFromMaze(T,O))return!0;this.hamilPath.pop(),k.nextNode=null}}return k.visited=!1,!1}draw(){const k=J();if(s.visualPath&&this.snakePath&&this.snakePath.length>0){f.fillStyle=k.snakePath;for(const U of this.snakePath)f.fillRect(U.x*h+h*.25,U.y*h+h*.25,h*.5,h*.5)}if(s.visualCycle&&this.hamilPath&&this.hamilPath.length>0&&this.hamilDone&&this.hamilPath[0]){f.strokeStyle=k.hamiltonianPath,f.lineWidth=Math.max(1,h/15),f.beginPath(),f.moveTo(this.hamilPath[0].x*h+h/2,this.hamilPath[0].y*h+h/2);for(let R=1;R<this.hamilPath.length;R++){const F=this.hamilPath[R];F&&f.lineTo(F.x*h+h/2,F.y*h+h/2)}this.hamilPath[this.hamilPath.length-1]?.nextNode===this.hamilStart&&this.hamilStart&&f.lineTo(this.hamilStart.x*h+h/2,this.hamilStart.y*h+h/2),f.stroke()}}}function J(){return r.value?l.dark:l.light}function ee(){if(!n.value)return;const K=n.value;f=K.getContext("2d");const k=Math.ceil(window.devicePixelRatio)||1,U=window.innerWidth,R=window.innerHeight;let F=Math.floor(U/h);d=F%2===0?F:F-1,d<4&&(d=4);let y=Math.floor(R/h);u=y%2===0?y:y-1,u<4&&(u=4),h=Math.max(1,Math.min(Math.floor(U/d),Math.floor(R/u))),K.width=d*h*k,K.height=u*h*k,K.style.width=`${d*h}px`,K.style.height=`${u*h}px`,f.setTransform(k,0,0,k,0,0),console.log(`Board: ${d}x${u}, BlockSize: ${h}`)}async function z(){if(m&&(clearInterval(m),m=0),S&&(cancelAnimationFrame(S),S=0),ee(),g=new V,await g.genMaze(),g.hamilDone){const K=g.hamilPath[0];K?($=K.x*h,I=K.y*h,E=[],c=!1,et(),m=setInterval(C,1e3/s.fps),S=requestAnimationFrame(M)):(console.error("Game cannot start: No valid starting position."),$e("Error: Failed to find starting position. Please refresh.",!0))}else console.error("Game cannot start: Hamiltonian cycle generation failed."),$e("Error: Failed to generate game paths. Please refresh.",!0)}async function j(){m&&(clearInterval(m),m=0),S&&(cancelAnimationFrame(S),S=0);const K=c,k=!c&&!K;if(f&&f.clearRect(0,0,d*h,u*h),g=new V,await g.genMaze(),g.hamilDone){const U=g.hamilPath[0];if(U){if($=U.x*h,I=U.y*h,E=[],c=K,et(),b&&b[0]!==void 0&&b[1]!==void 0){const R=Math.floor(b[0]/h),F=Math.floor(b[1]/h);if(R>=0&&R<d&&F>=0&&F<u){const y=g.grid[F],T=g.grid[Math.floor(I/h)],O=y?.[R],L=T?.[Math.floor($/h)];if(O&&L){const q=g.hamilPath.indexOf(L),p=g.hamilPath.indexOf(O);q!==-1&&p!==-1&&(g.snakePath=g.hamilPath.slice(q,p+1),q>p&&(g.snakePath=g.hamilPath.slice(q).concat(g.hamilPath.slice(0,p+1))))}}}k&&!c?(m&&clearInterval(m),m=setInterval(C,1e3/s.fps),S&&cancelAnimationFrame(S),S=requestAnimationFrame(M)):Te()}else console.error("Failed to regenerate game paths: no starting node."),$e("Error: Failed to regenerate game paths.",!0)}else console.error("Failed to regenerate game paths."),$e("Error: Failed to regenerate game paths.",!0)}function M(){Te(),c||(S=requestAnimationFrame(M))}function C(){const K=Math.min(Math.max(1,Math.floor(s.fps/250)),20);for(let k=0;k<K&&!c;k++)te()}function te(){if(performance.now(),c||!g.hamilDone)return;for(let y=E.length-1;y>0;y--){const T=E[y-1];T&&(E[y]=T)}if(E.length&&(E[0]=[$,I]),typeof $>"u"||typeof I>"u"||!b||b[0]===void 0||b[1]===void 0)return;const K=Math.floor($/h),k=Math.floor(I/h);if(K<0||K>=d||k<0||k>=u||!g.grid[k])return;const U=g.grid[k][K];if(!U)return;const R=Math.floor(b[0]/h),F=Math.floor(b[1]/h);if(R<0||R>=d||F<0||F>=u||!g.grid[F]){const y=Math.floor(Math.random()*d)*h,T=Math.floor(Math.random()*u)*h,L=g.grid[Math.floor(T/h)]?.[Math.floor(y/h)];L&&he(U,L)}else{const T=g.grid[F]?.[R];T&&he(U,T)}if($===b[0]&&I===b[1]){let y=E.length>0?E[E.length-1]:[$,I];if(y&&y[0]!==void 0&&y[1]!==void 0){let O=g.grid[Math.floor(y[1]/h)]?.[Math.floor(y[0]/h)],L=O?g.hamilPath.indexOf(O):-1;if(L===-1){const p=g.grid[Math.floor(I/h)]?.[Math.floor($/h)];p&&(L=g.hamilPath.indexOf(p))}if(L!==-1){let q=(L-1+g.hamilPath.length)%g.hamilPath.length,p=g.hamilPath[q];p&&E.push([p.x*h,p.y*h])}}if(et(),!c&&b&&b[0]!==void 0&&b[1]!==void 0){const T=Math.floor(b[0]/h),O=Math.floor(b[1]/h);if(T>=0&&T<d&&O>=0&&O<u){const q=g.grid[O]?.[T],p=Math.floor($/h),v=Math.floor(I/h),P=g.grid[v]?.[p];if(q&&P){const A=g.hamilPath.indexOf(P),x=g.hamilPath.indexOf(q);A!==-1&&x!==-1&&(g.snakePath=g.hamilPath.slice(A,x+1),A>x&&(g.snakePath=g.hamilPath.slice(A).concat(g.hamilPath.slice(0,x+1))))}}}}c||rt()}function he(K,k){const U=g.hamilPath.indexOf(k);if(U===-1){console.error("Food node not found in Hamiltonian path");return}const R=g.hamilPath.indexOf(K);if(R===-1){console.error("Current node not found in Hamiltonian path");return}let F=fe(K,k);F||(F=K.nextNode||g.hamilPath[0]||null);let y=F?g.hamilPath.indexOf(F):-1;if(y===-1&&(console.error("Next node not found in Hamiltonian path"),y=g.getEmergencyMove(R),F=g.hamilPath[y]||null),F){const T=F.x*h,O=F.y*h;E.some(q=>q&&q[0]===T&&q[1]===O)&&(y=g.getEmergencyMove(R),F=g.hamilPath[y]||null),F&&(g.snakePath=g.hamilPath.slice(y,U+1),y>U&&(g.snakePath=g.hamilPath.slice(y).concat(g.hamilPath.slice(0,U+1))),$=F.x*h,I=F.y*h)}}function Te(){J(),f.clearRect(0,0,d*h,u*h),g.draw(),b&&b[0]!==void 0&&b[1]!==void 0&&(f.fillStyle="rgba(250,40,40, 0.7)",f.fillRect(b[0],b[1],h,h));const K=[[$,I],...E],k=K[0];if(k&&k[0]!==void 0&&k[1]!==void 0){f.beginPath(),f.moveTo(k[0]+h/2,k[1]+h/2);for(let U=1;U<K.length;U++){const R=K[U],F=K[U-1];R&&F&&R[0]!==void 0&&R[1]!==void 0&&F[0]!==void 0&&F[1]!==void 0&&(Math.sqrt((R[0]-F[0])**2+(R[1]-F[1])**2)<=h*1.5?f.lineTo(R[0]+h/2,R[1]+h/2):f.moveTo(R[0]+h/2,R[1]+h/2))}f.lineWidth=h/1.1,f.strokeStyle="rgba(40, 200, 60, 1)",f.stroke(),f.fillStyle="rgba(40, 170, 50, 1)",f.fillRect(k[0]+.02*h,k[1]+.02*h,h-.04*h,h-.04*h)}c?$e("Hur hände detta... den dog :((",!0):g.hamilDone&&E.length>=u*d&&($e("Wow! Den klarade det!!",!0),c=!0)}function me(){if(typeof $>"u"||typeof I>"u")return!1;if($<0||Math.round($)>=d*h||I<0||Math.round(I)>=u*h)return!0;for(let K=0;K<E.length;K++){const k=E[K];if(k&&k[0]!==void 0&&k[1]!==void 0&&$===k[0]&&I===k[1])return!0}return!1}function ne(K,k){return!g.grid||g.grid.length===0||!g.hamilPath||g.hamilPath.length===0?1/0:g.getDistance(K,k)}function fe(K,k){if(!g.hamilPath||g.hamilPath.length===0)return K.nextNode||g.hamilPath[0]||null;const U=g.hamilPath.indexOf(K),R=g.hamilPath.indexOf(k);if(U===-1||R===-1)return console.error("Node not found in Hamiltonian path"),K.nextNode||g.hamilPath[0]||null;g.totalMoves++;let F=K.nextNode;if(F||(F=g.hamilPath[(U+1)%g.hamilPath.length]||null),!F)return null;const y=g.hamilPath.indexOf(F);if(y===-1)return F;const T=ne(y,R),O=u*d,L=(E.length+1)/O,q=Math.min(Math.max(1,Math.floor((E.length+1)*.05)),7),p=L<.8;let v=F,w="hamiltonian",P="Following Hamiltonian path (default)",A=0,x=u*d-E.length;if(p){const W=K.neighbors.map(H=>{const B=g.hamilPath.indexOf(H);if(B===-1||B===U)return null;const N=ne(B,R),Y=T-N;return{node:H,index:B,distanceToFood:N,savings:Y}}).filter(H=>H!==null&&H.savings>=q).sort((H,B)=>B.savings-H.savings);for(const H of W){const{node:B,index:N,savings:Y,distanceToFood:G}=H,{safetyCheckPassed:X,snakeBodyIn:se}=g.isShortcutSafe(U,N);if(x>se&&(x=se),A++,X){w="shortcut",P=`Taking shortcut: saves ${Y} steps (${T} → ${G})`,g.shortcutsTaken++,v=B;break}else X?P=`Best shortcut fails path check (would save ${Y} steps)`:P=`Best shortcut fails safety check (would save ${Y} steps)`}W.length===0&&(P=`No shortcuts available (savings ≥${q} needed)`)}else w="skip",P=`Snake too large for shortcuts (${(L*100).toFixed(1)}% full)`;return s.debugMode&&(a.value={snakeLength:E.length+1,snakeRatio:L,maxSnakeLength:O,shortcutThreshold:p?1:0,lengthCheckPassed:p,minDistToFood:T,minRequiredSavings:q,validNeighbors:A,snakeBodyIn:x,shortcutsTaken:g.shortcutsTaken,totalMoves:g.totalMoves,shortcutRate:g.totalMoves>0?g.shortcutsTaken/g.totalMoves*100:0,lastDecision:{type:w,reason:P}}),v}function rt(){me()&&(c=!0),g.hamilDone&&E.length+1>=u*d&&(c=!0),c&&(m&&clearInterval(m),S&&cancelAnimationFrame(S),Te())}function et(){if(c)return;const K=g.grid.flat().map(R=>[R.x,R.y]).filter(R=>{if(!R||R[0]===void 0||R[1]===void 0)return!1;const F=R[0]*h,y=R[1]*h;return!E.some(T=>T&&T[0]===F&&T[1]===y)&&!(typeof $<"u"&&typeof I<"u"&&$===F&&I===y)});if(K.length===0){c=!0;return}const k=Math.floor(Math.random()*K.length),U=K[k];if(U&&U[0]!==void 0&&U[1]!==void 0){const[R,F]=U;b=[R*h,F*h]}}function $e(K,k){i.value=K,o.value=k}return Fs(()=>{if(typeof window<"u"){window.visualCycle=s.visualCycle,window.visualPath=s.visualPath;const K=window.matchMedia("(prefers-color-scheme: dark)"),k=U=>{r.value=U.matches};K.addEventListener("change",k),Yn(()=>{K.removeEventListener("change",k)})}s.autoStart&&z()}),Yn(()=>{m&&(clearInterval(m),m=0),S&&(cancelAnimationFrame(S),S=0)}),e({startGame:z,stopGame:()=>{c=!0,m&&(clearInterval(m),m=0),S&&(cancelAnimationFrame(S),S=0)}}),(K,k)=>(re(),oe("div",{class:Fe(["hamiltonian-snake",{"dark-theme":r.value}])},[_("canvas",{ref_key:"snakeCanvas",ref:n,id:"snakeCanvas"},null,512),i.value?(re(),oe("div",{key:0,class:Fe(["game-message",{show:o.value}])},Q(i.value),3)):Ee("",!0),s.debugMode&&a.value?(re(),oe("div",xg,[k[6]||(k[6]=_("h3",null,"Shortcut Info",-1)),_("div",Cg,[k[0]||(k[0]=_("h4",null,"Snake State",-1)),_("div",Ag,"Snake Length: "+Q(a.value.snakeLength),1),_("div",Og,"Snake Ratio: "+Q(a.value.snakeRatio.toFixed(3)),1),_("div",Rg,"Max Snake Length: "+Q(a.value.maxSnakeLength),1)]),_("div",$g,[k[1]||(k[1]=_("h4",null,"Shortcut Thresholds",-1)),_("div",Ig,"Shortcut Threshold: "+Q(a.value.shortcutThreshold),1),_("div",jg," Length Check Passed: "+Q(a.value.lengthCheckPassed?"YES":"NO"),1)]),_("div",Mg,[k[2]||(k[2]=_("h4",null,"Distance Analysis",-1)),_("div",Lg,"Distance to Food (Hamilton): "+Q(a.value.minDistToFood),1),_("div",Dg,"Min Required Savings: "+Q(a.value.minRequiredSavings),1)]),_("div",Ug,[k[3]||(k[3]=_("h4",null,"Neighbor Analysis",-1)),_("div",Ng,"Valid Neighbors: "+Q(a.value.validNeighbors),1),_("div",Fg,"Snake Body In: "+Q(a.value.snakeBodyIn),1)]),_("div",Bg,[k[4]||(k[4]=_("h4",null,"Statistics",-1)),_("div",zg,"Shortcuts Taken: "+Q(a.value.shortcutsTaken),1),_("div",Hg,"Total Moves: "+Q(a.value.totalMoves),1),_("div",qg,"Shortcut Rate: "+Q(a.value.shortcutRate.toFixed(2))+"%",1)]),_("div",Vg,[k[5]||(k[5]=_("h4",null,"Last Decision",-1)),_("div",{class:Fe(["debug-row decision",a.value.lastDecision.type])},Q(a.value.lastDecision.reason),3)])])):Ee("",!0)],2))}}),Kg=zs(Wg,[["__scopeId","data-v-177c5591"]]),Gg={class:"landing-page"},Jg={class:"theme-toggle"},Yg={class:"toggle-switch"},Xg=["checked"],Qg={class:"slider"},Zg={class:"toggle-icon"},em={class:"background-game"},tm={key:0,class:"welcome-card"},sm={class:"autotype"},nm={class:"subtitle"},rm={class:"game-grid"},im={class:"game-card"},om={class:"game-card"},am={class:"game-card"},lm={class:"game-card"},cm={class:"game-card"},um={class:"game-card"},dm={key:0,class:"snake-info"},hm={class:"snake-controls"},fm={class:"fps-control"},pm={class:"fps-value"},gm=40,mm=0,vm=Ns({__name:"LandingPage",setup(t){gc();const e=Ui(),s=le(!1),n=le(10),r=le(!1),i=ds({cycle:!1,path:!1,generation:!1}),o=le(!0),a=["Välkommen till spelhörnan! Här kommer det upp något nytt spel ibland när någon i webmästeriet pallar.","Har du förslag eller är intresserad av att hjälpa till?","Sök webmästeriet!","","Tips: Logga in för att spara dina framsteg!"],l=le("");async function c(){l.value="";for(const f of a){for(const m of f)l.value+=m,await new Promise(S=>setTimeout(S,gm));f!==a[a.length-1]&&(l.value+=`
`,await new Promise(m=>setTimeout(m,mm)))}}const u=Me(()=>e.isDarkMode);Fs(()=>{e.init(),c()});function d(){s.value=!s.value}function h(f){i[f]=!i[f]}return(f,m)=>{const S=xi("router-link");return re(),oe("div",Gg,[_("div",Jg,[_("label",Yg,[_("input",{type:"checkbox",checked:u.value,onChange:m[0]||(m[0]=(...E)=>qe(e).toggleTheme&&qe(e).toggleTheme(...E))},null,40,Xg),_("span",Qg,[_("span",Zg,Q(u.value?"🌙":"☀️"),1)])])]),_("div",em,[ke(Kg,{"auto-start":!0,fps:n.value,"visual-cycle":i.cycle,"visual-path":i.path,"show-generation":i.generation,"generation-delay":10,"debug-mode":r.value},null,8,["fps","visual-cycle","visual-path","show-generation","debug-mode"])]),_("div",{class:"overlay-content",style:Sn({display:o.value?"":"none"})},[o.value?(re(),oe("div",tm,[m[20]||(m[20]=_("h1",{class:"title"},"Välkommen till KfKSpel",-1)),_("div",sm,[_("p",nm,Q(l.value),1)]),_("div",rm,[_("div",im,[m[8]||(m[8]=_("h3",null,"KfKblock",-1)),ke(S,{to:"/kfkblock",class:"play-btn"},{default:Ct(()=>[...m[7]||(m[7]=[Ie("Spela",-1)])]),_:1})]),_("div",om,[m[10]||(m[10]=_("h3",null,"KfKbandvagn",-1)),ke(S,{to:"/kfkbandvagn",class:"play-btn"},{default:Ct(()=>[...m[9]||(m[9]=[Ie("Spela",-1)])]),_:1})]),_("div",am,[m[12]||(m[12]=_("h3",null,"Snake",-1)),ke(S,{to:"/snake",class:"play-btn"},{default:Ct(()=>[...m[11]||(m[11]=[Ie("Spela",-1)])]),_:1})]),_("div",lm,[m[14]||(m[14]=_("h3",null,"2048",-1)),ke(S,{to:"/2048",class:"play-btn"},{default:Ct(()=>[...m[13]||(m[13]=[Ie("Spela",-1)])]),_:1})]),_("div",cm,[m[16]||(m[16]=_("h3",null,"Minesweeper",-1)),ke(S,{to:"/minesweeper",class:"play-btn"},{default:Ct(()=>[...m[15]||(m[15]=[Ie("Spela",-1)])]),_:1})]),_("div",um,[m[18]||(m[18]=_("h3",null,"Lights Out",-1)),ke(S,{to:"/lights-out",class:"play-btn"},{default:Ct(()=>[...m[17]||(m[17]=[Ie("Spela",-1)])]),_:1})])]),s.value?(re(),oe("div",dm,[_("div",hm,[_("button",{onClick:m[1]||(m[1]=E=>h("cycle")),class:Fe({active:i.cycle})}," Show Hamiltonian Cycle ",2),_("button",{onClick:m[2]||(m[2]=E=>h("path")),class:Fe({active:i.path})}," Show Snake Path ",2),_("button",{onClick:m[3]||(m[3]=E=>h("generation")),class:Fe({active:i.generation})}," Show Generation Process ",2),_("button",{onClick:m[4]||(m[4]=E=>r.value=!r.value),class:Fe({active:r.value,debug:!0})}," Shortcuts Info ",2),_("div",fm,[m[19]||(m[19]=_("label",{for:"fps"},"Snake Speed (FPS): ",-1)),We(_("input",{type:"range",name:"fps",id:"fps",min:"1",max:"1000","onUpdate:modelValue":m[5]||(m[5]=E=>n.value=E),class:"fps-slider"},null,512),[[Wt,n.value,void 0,{number:!0}]]),_("span",pm,Q(n.value)+" FPS",1)])])])):Ee("",!0)])):Ee("",!0)],4),_("button",{class:"hamilinfo-btn",onClick:d},Q(s.value?"!":"?"),1),_("button",{class:"close-btn",onClick:m[6]||(m[6]=E=>o.value=!o.value)},"x")])}}}),_m=zs(vm,[["__scopeId","data-v-11c32488"]]),ym={class:"feedback-container"},bm={class:"feedback-form"},wm={class:"form-group"},Sm={class:"form-group"},km={class:"form-group"},Em={key:0,class:"form-group"},Tm={class:"form-group"},Pm={class:"form-group"},xm={key:0,class:"file-list"},Cm={class:"file-size-summary"},Am={class:"size-bar"},Om={class:"size-text"},Rm={key:0,class:"remaining"},$m={class:"file-info"},Im={class:"file-name"},jm={class:"file-size"},Mm=["onClick"],Lm={class:"form-group"},Dm={class:"browser-info"},Um={class:"form-actions"},Nm=["disabled"],Fm={key:1,class:"success-message"},Bm={key:2,class:"error-message"},zm=Ns({__name:"Feedback",setup(t){const e=ds({type:"",title:"",email:"",severity:"medium",description:""}),s=le([]),n=le(!1),r=le(!1),i=le(!1),o=le(""),a=le(),l=le({browser:"",browserVersion:"",os:"",resolution:"",viewport:"",userAgent:"",language:"",timezone:""}),c=Me(()=>s.value.reduce((b,g)=>b+g.size,0)),u=Me(()=>Math.max(0,31457280-c.value));Fs(()=>{d()});function d(){const b=navigator.userAgent;let g="Unknown",D="Unknown";const V=b.match(/Chrome\/(\d+\.\d+\.\d+\.\d+)/),J=b.match(/Firefox\/(\d+\.\d+)/),ee=b.match(/Version\/(\d+\.\d+(?:\.\d+)?).*Safari/),z=b.match(/Edg\/(\d+\.\d+\.\d+\.\d+)/);z?(g="Edge",D=z[1]||"Unknown"):V&&!b.includes("Edg")?(g="Chrome",D=V[1]||"Unknown"):J?(g="Firefox",D=J[1]||"Unknown"):ee&&!b.includes("Chrome")&&(g="Safari",D=ee[1]||"Unknown");let j="Unknown";if(b.includes("Windows NT 10.0"))j="Windows 10/11";else if(b.includes("Windows NT 6.3"))j="Windows 8.1";else if(b.includes("Windows NT 6.2"))j="Windows 8";else if(b.includes("Windows NT 6.1"))j="Windows 7";else if(b.includes("Windows"))j="Windows";else if(b.includes("Mac OS X")){const M=b.match(/Mac OS X (\d+[._]\d+[._]?\d*)/);j=M?`macOS ${M[1]?.replace(/_/g,".")||""}`:"macOS"}else if(b.includes("Linux"))j="Linux";else if(b.includes("Android")){const M=b.match(/Android (\d+(?:\.\d+)?)/);j=M?`Android ${M[1]}`:"Android"}else if(b.includes("iPhone")||b.includes("iPad")){const M=b.match(/OS (\d+_\d+(?:_\d+)?)/);j=M?`iOS ${M[1]?.replace(/_/g,".")||""}`:"iOS"}l.value={browser:`${g} ${D}`,browserVersion:D,os:j,resolution:`${screen.width}x${screen.height}`,viewport:`${window.innerWidth}x${window.innerHeight}`,userAgent:b,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}}function h(b){const g=b.target;g.files&&m(Array.from(g.files))}function f(b){n.value=!1,b.dataTransfer?.files&&m(Array.from(b.dataTransfer.files))}function m(b){const g=["image/jpeg","image/png","image/gif","image/webp","video/mp4","video/webm","video/mov"],V=s.value.reduce((z,j)=>z+j.size,0),J=b.filter(z=>g.includes(z.type)?!0:(o.value=`Filtypen ${z.type} stöds inte`,!1)),ee=J.reduce((z,j)=>z+j.size,0);if(V+ee>31457280){const z=31457280-V;o.value=`Total filstorlek får inte överstiga 30MB. Du har ${E(z)} kvar att använda.`;return}s.value.push(...J),o.value=""}function S(b){s.value.splice(b,1)}function E(b){if(b===0)return"0 Bytes";const g=1024,D=["Bytes","KB","MB"],V=Math.floor(Math.log(b)/Math.log(g));return parseFloat((b/Math.pow(g,V)).toFixed(2))+" "+D[V]}async function $(){if(s.value.length===0)return[];const b=new FormData;s.value.forEach(V=>{b.append("file",V)});const{data:g,error:D}=await He.functions.invoke("feedback/upload",{body:b});if(D)throw new Error(`Failed to upload files: ${D.message}`);return g?.files?g.files.map(V=>V.filePath):[]}async function I(){if(!r.value){if(c.value>30*1024*1024){o.value="Total filstorlek överstiger 30MB. Ta bort några filer innan du skickar.";return}r.value=!0,o.value="";try{let b=[];s.value.length>0&&(b=await $());const g={type:e.type,title:e.title,email:e.email||null,severity:e.type==="bug"?e.severity:null,description:e.description,browser_info:JSON.stringify(l.value),media_urls:b.length>0?b:null,status:"open"},{error:D}=await He.from("feedback").insert([g]);if(D)throw new Error("Failed to submit feedback");Object.assign(e,{type:"",title:"",email:"",severity:"medium",description:""}),s.value=[],i.value=!0,setTimeout(()=>{i.value=!1},5e3)}catch(b){console.error("Submission error:",b),o.value=b instanceof Error?b.message:"Ett fel uppstod vid skickning av feedback"}finally{r.value=!1}}}return(b,g)=>(re(),oe("div",ym,[_("div",bm,[g[24]||(g[24]=_("h1",null,"Feedback & Bugg-Rapport",-1)),g[25]||(g[25]=_("p",{class:"subtitle"}," Hjälp oss förbättra spelen genom att dela dina tankar, buggar eller nya spelidéer! ",-1)),_("form",{onSubmit:Os(I,["prevent"]),class:"form"},[_("div",wm,[g[9]||(g[9]=_("label",{for:"type",class:"form-label"},"Typ av feedback",-1)),We(_("select",{id:"type","onUpdate:modelValue":g[0]||(g[0]=D=>e.type=D),class:"form-input",required:""},[...g[8]||(g[8]=[Pl('<option value="" data-v-0de15745>Välj typ</option><option value="bug" data-v-0de15745>🐛 Bugg-rapport</option><option value="feature" data-v-0de15745>💡 Ny Spelidé</option><option value="improvement" data-v-0de15745>⭐ Förbättringsförslag</option><option value="other" data-v-0de15745>💬 Övrigt</option>',5)])],512),[[As,e.type]])]),_("div",Sm,[g[10]||(g[10]=_("label",{for:"title",class:"form-label"},"Titel",-1)),We(_("input",{id:"title",type:"text","onUpdate:modelValue":g[1]||(g[1]=D=>e.title=D),class:"form-input",placeholder:"Kort beskrivning av din feedback",required:""},null,512),[[Wt,e.title]])]),_("div",km,[g[11]||(g[11]=_("label",{for:"email",class:"form-label"},"Email (valfritt)",-1)),We(_("input",{id:"email",type:"email","onUpdate:modelValue":g[2]||(g[2]=D=>e.email=D),class:"form-input",placeholder:"För att vi ska kunna svara dig"},null,512),[[Wt,e.email]])]),e.type==="bug"?(re(),oe("div",Em,[g[13]||(g[13]=_("label",{for:"severity",class:"form-label"},"Allvarlighetsgrad",-1)),We(_("select",{id:"severity","onUpdate:modelValue":g[3]||(g[3]=D=>e.severity=D),class:"form-input"},[...g[12]||(g[12]=[_("option",{value:"low"},"Låg - Mindre problem",-1),_("option",{value:"medium"},"Medium - Påverkar spelupplevelsen",-1),_("option",{value:"high"},"Hög - Spelet kraschar eller fungerar inte",-1)])],512),[[As,e.severity]])])):Ee("",!0),_("div",Tm,[g[14]||(g[14]=_("label",{for:"description",class:"form-label"},"Beskrivning",-1)),We(_("textarea",{id:"description","onUpdate:modelValue":g[4]||(g[4]=D=>e.description=D),class:"form-textarea",rows:"6",placeholder:"Beskriv detaljerat vad som hänt, vad du förväntade dig, eller din idé...",required:""},null,512),[[Wt,e.description]])]),_("div",Pm,[g[16]||(g[16]=_("label",{class:"form-label"},"Bilagor (bilder/videos)",-1)),_("div",{class:Fe(["file-upload-area",{"drag-over":n.value}]),onDragover:g[5]||(g[5]=Os(D=>n.value=!0,["prevent"])),onDragleave:g[6]||(g[6]=Os(D=>n.value=!1,["prevent"])),onDrop:Os(f,["prevent"]),onClick:g[7]||(g[7]=D=>a.value?.click())},[g[15]||(g[15]=_("div",{class:"upload-content"},[_("span",{class:"upload-icon"},"📎"),_("p",null,"Klicka för att välja filer eller dra och släpp"),_("p",{class:"upload-hint"}," Bilder: JPG, PNG, GIF, WebP | Videos: MP4, WebM, MOV | Max 30MB totalt ")],-1)),_("input",{ref_key:"fileInput",ref:a,type:"file",multiple:"",accept:"image/*,video/*",onChange:h,style:{display:"none"}},null,544)],34),s.value.length>0?(re(),oe("div",xm,[_("div",Cm,[_("div",Am,[_("div",{class:"size-progress",style:Sn({width:`${c.value/(30*1024*1024)*100}%`})},null,4)]),_("p",Om,[Ie(Q(E(c.value))+" / 30MB använt ",1),u.value>0?(re(),oe("span",Rm," ("+Q(E(u.value))+" kvar) ",1)):Ee("",!0)])]),(re(!0),oe(Ue,null,Un(s.value,(D,V)=>(re(),oe("div",{key:V,class:"file-item"},[_("div",$m,[_("span",Im,Q(D.name),1),_("span",jm,"("+Q(E(D.size))+")",1)]),_("button",{type:"button",onClick:J=>S(V),class:"remove-file-btn"},"×",8,Mm)]))),128))])):Ee("",!0)]),_("div",Lm,[g[23]||(g[23]=_("label",{class:"form-label"},"Teknisk information",-1)),_("div",Dm,[_("p",null,[g[17]||(g[17]=_("strong",null,"Browser:",-1)),Ie(" "+Q(l.value.browser),1)]),_("p",null,[g[18]||(g[18]=_("strong",null,"OS:",-1)),Ie(" "+Q(l.value.os),1)]),_("p",null,[g[19]||(g[19]=_("strong",null,"Skärmupplösning:",-1)),Ie(" "+Q(l.value.resolution),1)]),_("p",null,[g[20]||(g[20]=_("strong",null,"Viewport:",-1)),Ie(" "+Q(l.value.viewport),1)]),_("p",null,[g[21]||(g[21]=_("strong",null,"Språk:",-1)),Ie(" "+Q(l.value.language),1)]),_("p",null,[g[22]||(g[22]=_("strong",null,"Tidszon:",-1)),Ie(" "+Q(l.value.timezone),1)])])]),_("div",Um,[_("button",{type:"submit",class:"submit-btn",disabled:r.value},Q(r.value?"Skickar...":"Skicka Feedback"),9,Nm)]),i.value?(re(),oe("div",Fm," ✅ Tack för din feedback! Vi har tagit emot den och kommer att titta på den så snart som möjligt. ")):Ee("",!0),o.value?(re(),oe("div",Bm,Q(o.value),1)):Ee("",!0)],32)])]))}}),Hm=zs(zm,[["__scopeId","data-v-0de15745"]]),qm={class:"admin-container"},Vm={class:"admin-interface"},Wm={class:"admin-header"},Km={class:"fetch-section"},Gm=["disabled"],Jm={key:0,class:"admin-stats"},Ym={class:"stat-card"},Xm={class:"stat-number"},Qm={class:"stat-card"},Zm={class:"stat-number"},ev={class:"stat-card"},tv={class:"stat-number"},sv={class:"filters"},nv={class:"filter-group"},rv={class:"filter-group"},iv={class:"filter-group"},ov={key:0,class:"loading"},av={key:1,class:"error-message"},lv={key:2,class:"feedback-list"},cv=["onClick"],uv={class:"feedback-title"},dv={class:"feedback-meta"},hv={class:"date"},fv={class:"expand-icon"},pv={key:0,class:"feedback-content"},gv={class:"content-section"},mv={class:"description"},vv={key:0,class:"content-section"},_v={key:1,class:"content-section"},yv={class:"media-list"},bv=["onClick"],wv={key:2,class:"content-section"},Sv={class:"browser-info"},kv={class:"content-section"},Ev={class:"status-control"},Tv=["onUpdate:modelValue","onChange"],Pv=["value","onInput","onBlur"],xv={key:3,class:"no-results"},Cv=["src"],Av=["src"],Ov=Ns({__name:"FeedbackAdmin",setup(t){gc(),xn();const e=le([]),s=le(!1),n=le(""),r=le(null),i=le(!1),o=le(""),a=le(""),l=le("created_at-desc"),c=le(!1),u=le(""),d=le("image"),h=Me(()=>e.value.filter(j=>j.status==="open").length),f=Me(()=>e.value.filter(j=>j.status==="closed").length);async function m(){s.value=!0,n.value="",i.value=!0;try{let j=He.from("feedback").select("*");o.value&&(j=j.eq("status",o.value)),a.value&&(j=j.eq("type",a.value));const[M,C]=l.value.split("-"),te=C==="asc";M==="severity"?j=j.order("severity",{ascending:!1,nullsFirst:!1}).order("created_at",{ascending:!1}):M&&(j=j.order(M,{ascending:te}));const{data:he,error:Te}=await j;if(Te){console.error("Fetch error:",Te),n.value="Kunde inte ladda feedback. Ett fel uppstod vid hämtning av data.";return}e.value=he||[]}catch(j){console.error("Fetch error:",j),n.value="Ett fel uppstod vid laddning av feedback."}finally{s.value=!1}}function S(j){r.value=r.value===j?null:j}async function E(j,M){try{const{error:C}=await He.from("feedback").update({status:M}).eq("id",j);C&&(console.error("Update error:",C),e.value.find(he=>he.id===j)&&await m())}catch(C){console.error("Update error:",C)}}async function $(j,M){try{const{error:C}=await He.from("feedback").update({admin_notes:M}).eq("id",j);C&&console.error("Update error:",C)}catch(C){console.error("Update error:",C)}}function I(j){return{bug:"🐛",feature:"💡",improvement:"⭐",other:"💬"}[j]||"📝"}function b(j){return{open:"Öppen",in_progress:"Pågående",closed:"Stängd"}[j]||j}function g(j){return new Date(j).toLocaleDateString("sv-SE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function D(j){try{return JSON.parse(j)}catch{return{}}}function V(j){return{browser:"Browser",os:"OS",resolution:"Skärmupplösning",viewport:"Viewport",language:"Språk",timezone:"Tidszon"}[j]||j}function J(j){return j.split("/").pop()||"Fil"}async function ee(j){try{const{data:M}=await He.storage.from("feedback-media").createSignedUrl(j,3600);M?.signedUrl&&(u.value=M.signedUrl,d.value=j.toLowerCase().includes(".mp4")||j.toLowerCase().includes(".webm")||j.toLowerCase().includes(".mov")?"video":"image",c.value=!0)}catch(M){console.error("Error creating signed URL:",M)}}function z(){c.value=!1,u.value=""}return(j,M)=>(re(),oe(Ue,null,[_("div",qm,[_("div",Vm,[_("div",Wm,[M[7]||(M[7]=_("h1",null,"Feedback Administration",-1)),_("div",Km,[_("button",{onClick:m,class:"fetch-button",disabled:s.value},Q(s.value?"Laddar...":"Hämta Feedback Data"),9,Gm)]),e.value.length>0?(re(),oe("div",Jm,[_("div",Ym,[_("span",Xm,Q(e.value.length),1),M[4]||(M[4]=_("span",{class:"stat-label"},"Total",-1))]),_("div",Qm,[_("span",Zm,Q(h.value),1),M[5]||(M[5]=_("span",{class:"stat-label"},"Öppna",-1))]),_("div",ev,[_("span",tv,Q(f.value),1),M[6]||(M[6]=_("span",{class:"stat-label"},"Stängda",-1))])])):Ee("",!0)]),_("div",sv,[_("div",nv,[M[9]||(M[9]=_("label",null,"Status:",-1)),We(_("select",{"onUpdate:modelValue":M[0]||(M[0]=C=>o.value=C),onChange:m},[...M[8]||(M[8]=[_("option",{value:""},"Alla",-1),_("option",{value:"open"},"Öppna",-1),_("option",{value:"in_progress"},"Pågående",-1),_("option",{value:"closed"},"Stängda",-1)])],544),[[As,o.value]])]),_("div",rv,[M[11]||(M[11]=_("label",null,"Typ:",-1)),We(_("select",{"onUpdate:modelValue":M[1]||(M[1]=C=>a.value=C),onChange:m},[...M[10]||(M[10]=[Pl('<option value="" data-v-e471fecb>Alla</option><option value="bug" data-v-e471fecb>Buggar</option><option value="feature" data-v-e471fecb>Spelidéer</option><option value="improvement" data-v-e471fecb>Förbättringar</option><option value="other" data-v-e471fecb>Övrigt</option>',5)])],544),[[As,a.value]])]),_("div",iv,[M[13]||(M[13]=_("label",null,"Sortera:",-1)),We(_("select",{"onUpdate:modelValue":M[2]||(M[2]=C=>l.value=C),onChange:m},[...M[12]||(M[12]=[_("option",{value:"created_at-desc"},"Senaste först",-1),_("option",{value:"created_at-asc"},"Äldsta först",-1),_("option",{value:"severity"},"Allvarlighetsgrad",-1)])],544),[[As,l.value]])])]),s.value?(re(),oe("div",ov,"Laddar feedback...")):Ee("",!0),n.value?(re(),oe("div",av,Q(n.value),1)):Ee("",!0),!s.value&&!n.value?(re(),oe("div",lv,[(re(!0),oe(Ue,null,Un(e.value,C=>(re(),oe("div",{key:C.id,class:Fe(["feedback-card",{expanded:r.value===C.id}])},[_("div",{class:"feedback-header",onClick:te=>S(C.id)},[_("div",uv,[_("span",{class:Fe(["type-badge",C.type])},Q(I(C.type)),3),_("h3",null,Q(C.title),1),C.severity?(re(),oe("span",{key:0,class:Fe(["severity-badge",C.severity])},Q(C.severity.toUpperCase()),3)):Ee("",!0)]),_("div",dv,[_("span",{class:Fe(["status-badge",C.status])},Q(b(C.status)),3),_("span",hv,Q(g(C.created_at)),1),_("span",fv,Q(r.value===C.id?"▼":"▶"),1)])],8,cv),r.value===C.id?(re(),oe("div",pv,[_("div",gv,[M[14]||(M[14]=_("h4",null,"Beskrivning",-1)),_("p",mv,Q(C.description),1)]),C.email?(re(),oe("div",vv,[M[15]||(M[15]=_("h4",null,"Kontakt",-1)),_("p",null,Q(C.email),1)])):Ee("",!0),C.media_urls&&C.media_urls.length>0?(re(),oe("div",_v,[M[16]||(M[16]=_("h4",null,"Bilagor",-1)),_("div",yv,[(re(!0),oe(Ue,null,Un(C.media_urls,(te,he)=>(re(),oe("div",{key:he,class:"media-item"},[_("button",{onClick:Te=>ee(te),class:"media-button"}," 📎 "+Q(J(te)),9,bv)]))),128))])])):Ee("",!0),C.browser_info?(re(),oe("div",wv,[M[17]||(M[17]=_("h4",null,"Teknisk Information",-1)),_("div",Sv,[(re(!0),oe(Ue,null,Un(D(C.browser_info),(te,he)=>(re(),oe("div",{key:String(he)},[_("strong",null,Q(V(String(he)))+":",1),Ie(" "+Q(te),1)]))),128))])])):Ee("",!0),_("div",kv,[M[19]||(M[19]=_("h4",null,"Status & Anteckningar",-1)),_("div",Ev,[We(_("select",{"onUpdate:modelValue":te=>C.status=te,onChange:te=>E(C.id,C.status)},[...M[18]||(M[18]=[_("option",{value:"open"},"Öppen",-1),_("option",{value:"in_progress"},"Pågående",-1),_("option",{value:"closed"},"Stängd",-1)])],40,Tv),[[As,C.status]])]),_("textarea",{value:C.admin_notes||"",onInput:te=>C.admin_notes=te.target.value,onBlur:te=>$(C.id,C.admin_notes||""),placeholder:"Lägg till anteckningar...",class:"notes-textarea"},null,40,Pv)])])):Ee("",!0)],2))),128))])):Ee("",!0),!s.value&&!n.value&&e.value.length===0&&i.value?(re(),oe("div",xv,[...M[20]||(M[20]=[_("p",null,"Ingen feedback hittades med de valda filtren.",-1),_("p",{class:"admin-notice"}," Om du inte kan se någon data kan det bero på att du inte har administratörsbehörighet. ",-1)])])):Ee("",!0)])]),c.value?(re(),oe("div",{key:0,class:"modal-overlay",onClick:z},[_("div",{class:"modal-content",onClick:M[3]||(M[3]=Os(()=>{},["stop"]))},[_("button",{class:"modal-close",onClick:z},"×"),d.value==="image"?(re(),oe("img",{key:0,src:u.value,alt:"Feedback media",class:"modal-media"},null,8,Cv)):d.value==="video"?(re(),oe("video",{key:1,src:u.value,controls:"",class:"modal-media"},null,8,Av)):Ee("",!0)])])):Ee("",!0)],64))}}),Rv=zs(Ov,[["__scopeId","data-v-e471fecb"]]),$v=[{path:"/2048",name:"2048",component:()=>at(()=>import("./2048-D51ZAE1G.js"),__vite__mapDeps([0,1]))},{path:"/minesweeper",name:"Minesweeper",component:()=>at(()=>import("./Minesweeper-r71dXdZb.js"),__vite__mapDeps([2,3]))},{path:"/kfkblock",name:"KfKblock",component:()=>at(()=>import("./Kfkblock-C6FZDbqY.js"),__vite__mapDeps([4,5]))},{path:"/kfkbandvagn",name:"KfKbandvagn",component:()=>at(()=>import("./Kfkbandvagn-C7gXI3vF.js"),__vite__mapDeps([6,7]))},{path:"/snake",name:"Snake",component:()=>at(()=>import("./Snake-DDnVyuW-.js"),__vite__mapDeps([8,9]))},{path:"/lights-out",name:"LightsOut",component:()=>at(()=>import("./LightsOut-BlExRPDW.js"),__vite__mapDeps([10,11]))}],Iv=Tg({history:eg("/"),routes:[{path:"/",name:"home",component:_m},{path:"/feedback",name:"feedback",component:Hm},{path:"/admin/feedback",name:"feedback-admin",component:Rv},...$v]}),Fi=Hd(Sp);Fi.use(Wd());Fi.use(Iv);const jv=xn();jv.init();Fi.mount("#app");export{He as A,xn as B,ed as C,bp as D,Pl as E,Ue as F,Dl as G,at as H,Ns as I,Mv as T,zs as _,Yn as a,_ as b,oe as c,Ee as d,Os as e,We as f,Lv as g,re as h,ds as i,Me as j,ol as k,ke as l,As as m,cr as n,Fs as o,Un as p,Ct as q,le as r,Ie as s,Q as t,Ui as u,Wt as v,yt as w,Sn as x,Fe as y,qe as z};
