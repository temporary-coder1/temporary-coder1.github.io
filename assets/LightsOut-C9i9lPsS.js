import{I as b,c as k,h as p,y,b as l,_ as O,r as a,j as I,o as H,a as K,t as g,x as N,F as R,p as U,C as V}from"./index-CVO9u6ab.js";const J=b({__name:"Cell",props:{isLit:{type:Boolean,required:!0},isClicked:{type:Boolean,required:!0}},emits:["pressed"],setup(h,{emit:n}){const o=n;return(v,i)=>(p(),k("div",{class:y(["cell",{highlighted:h.isClicked}]),onClick:i[0]||(i[0]=c=>o("pressed"))},[l("div",{class:y(["lamp",{lit:h.isLit}])},null,2)],2))}}),Q=O(J,[["__scopeId","data-v-053c69e8"]]),W={class:"app-container"},X={class:"settings"},Y={class:"clicks"},Z={class:"score"},ee={class:"timeLeft"},te=["value"],se={class:"game-wrapper"},B=180*1e3,T="0123456789abcdefghijklmnopqrstuvwxyz",le=b({__name:"LightsOut",setup(h){const n=a([]),o=a(5),v=a(5),i=a("000"),c=a(0),_=a(0),d=a(0),f=a(B),r=a(null),m=a(!1),$=I(()=>{const e=Math.max(0,f.value),t=Math.floor(e/6e4),s=Math.floor(e%6e4/1e3);return`${t}:${s.toString().padStart(2,"0")}`});function z(){if(r.value!==null||m.value)return;const e=Date.now()+f.value;r.value=window.setInterval(()=>{const t=e-Date.now();f.value=t>0?t:0,t<=0&&(C(),m.value=!0)},250)}function C(){r.value!==null&&(window.clearInterval(r.value),r.value=null)}function A(e,t=3){e=Math.max(0,Math.floor(e))%Math.pow(36,t);let s="";do s=T[e%36]+s,e=Math.floor(e/36);while(e>0);return s.padStart(t,"0")}function E(e){e=(e||"").toLowerCase().slice(0,3);let t=0;for(const s of e){const u=T.indexOf(s);if(u<0)return 0;t=t*36+u}return t}function q(e){return(e||"").toLowerCase().replace(/[^0-9a-z]/g,"").slice(0,3)}function D(e){const t=e.target;i.value=q(t.value)}const L=I(()=>n.value.filter(e=>e.isLit).length);function P(e,t){if(e<0||e>=v.value||t<0||t>=o.value)return;const s=e*o.value+t;n.value[s].isLit=!n.value[s].isLit}function j(e){m.value||(r.value===null&&z(),_.value++,n.value.forEach(t=>t.isClicked=!1),n.value[e].isClicked=!0,M(e),F())}function M(e){const t=Math.floor(e/o.value),s=e%o.value,u=[[0,0],[0,1],[0,-1],[1,0],[-1,0]];for(const[x,G]of u)P(t+x,s+G)}function F(){console.log("Lit Cells",L.value),L.value<=0&&(d.value++,S())}async function S(){c.value=c.value+5,n.value=Array.from({length:v.value*o.value},()=>({isLit:!1,isClicked:!1}));const e=3+d.value*2;for(let t=0;t<e;t++){const s=Math.floor((c.value+t)*Math.sqrt((t+1)*3)%(o.value*v.value));M(s)}}function w(){c.value=E(i.value),C(),f.value=B,m.value=!1,d.value=0,_.value=0,S()}return H(()=>{const e=Math.floor(Math.random()*Math.pow(36,3));i.value=A(e,3),w()}),K(()=>{C()}),(e,t)=>(p(),k("div",W,[t[1]||(t[1]=l("h1",null,"Lights Out",-1)),l("div",X,[l("span",Y,"Klickar: "+g(_.value),1),l("span",Z,"Poäng: "+g(d.value),1),l("span",ee,"Tid kvar: "+g($.value),1),t[0]||(t[0]=l("label",{for:"seedCode"},[l("strong",null,"Seed:")],-1)),l("input",{id:"seedCode",type:"text",value:i.value,onInput:D,placeholder:"a1b",maxlength:"3"},null,40,te),l("button",{onClick:w},"Använd")]),l("div",se,[l("div",{class:"game-container",style:N({gridTemplateColumns:`repeat(${o.value}, 1fr)`})},[(p(!0),k(R,null,U(n.value,(s,u)=>(p(),V(Q,{key:u,isLit:s.isLit,isClicked:s.isClicked,onPressed:x=>j(u)},null,8,["isLit","isClicked","onPressed"]))),128))],4)])]))}}),ne=O(le,[["__scopeId","data-v-8e2ea0ab"]]);export{ne as default};
